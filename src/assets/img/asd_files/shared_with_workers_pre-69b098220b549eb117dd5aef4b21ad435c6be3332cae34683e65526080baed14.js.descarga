/*!@licenses
 *
 * This file is part of the Iconfu project
 * Copyright (c) 2017 INCORS GmbH - All Rights Reserved
 *
 * Iconfu uses the following third party software components under the MIT License:
 *
 * Paper.js
 * http://paperjs.org
 * Copyright (c) 2011 - 2016, Juerg Lehni & Jonathan Puckey
 * http://scratchdisk.com/ & http://jonathanpuckey.com/
 *
 * pako
 * http://nodeca.github.io/pako/
 * Copyright (c) 2014-2017 by Vitaly Puzrin and Andrei Tuputcyn
 *
 * Dexie.js
 * http://dexie.org/
 * Copyright David Fahlander
 *
 * AngularJS
 * https://angularjs.org
 * Copyright (c) 2010-2017 Google, Inc.
 *
 * AngularJS Material
 * https://material.angularjs.org/latest/
 * Copyright (c) 2014-2017 Google, Inc.
 *
 * jQuery
 * https://jquery.org
 * Copyright 2017 The jQuery Foundation
 *
 * FileSaver.js
 * https://github.com/eligrey/FileSaver.js
 * Copyright Â© 2016 Eli Grey
 *
 * Hamster.js
 * https://github.com/monospaced/hamster.js
 * (c) 2013 Monospaced
 * http://monospaced.com
 *
 * Angular Mousewheel
 * https://github.com/monospaced/angular-mousewheel
 * (c) 2016 Monospaced
 * http://monospaced.com
 *
 * perfect-scrollbar
 * https://noraesae.github.io/perfect-scrollbar/
 * Copyright (c) 2012-2016 Hyunje Jun and other contributors
 *
 * AngularDevise
 * https://github.com/cloudspace/angular_devise
 * Copyright (c) 2013 Justin Ridgewell
 *
 * Bowser
 * https://github.com/ded/bowser
 * Copyright (c) Dustin Diaz 2015
 *
 *
 * For the third party software components listed above, the following applies:
 *
 * "Permission is hereby granted, free of charge,
 * to any person obtaining a copy of this software and
 * associated documentation files (the "Software"), to
 * deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify,
 * merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom
 * the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice
 * shall be included in all copies or substantial portions of the Software."
 *
 */
var paper=function(t,e){function i(){for(var t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",e="",i=0;i<8;i++)e+=t[Math.floor(62*Math.random())];return e}function n(t,e,i){for(var n,s=new Array(t.length),a=0;a<s.length;a++){var o=t[a].bounds;s[a]=[o.left,o.top,o.right,o.bottom]}if(e){n=new Array(e.length);for(a=0;a<n.length;a++){o=e[a].bounds;n[a]=[o.left,o.top,o.right,o.bottom]}}return r(s,n,i||0)}function r(t,e,i){var n,r=t.length,s=r+(e?e.length:0),a=!e,o=a?t:t.concat(e)
;if(!a&&e.length){n=e[0].slice();for(var h=0;h<4;h++){for(var l=0;l<e.length;l++)(h<2?e[l][h]<n[h]:e[l][h]>n[h])&&(n[h]=e[l][h]);n[h]=n[h]+(h<2?-i:i)}}var u=new Array(s);for(h=0;h<s;h++)u[h]=h;u.sort(function(t,e){return o[t][0]-o[e][0]});var c=[],d=new Array(r);for(h=0;h<u.length;h++){var f=u[h],_=o[f];if(!n||f>=r||_[0]<=n[2]&&_[2]>=n[0]&&_[1]<=n[3]&&_[3]>=n[1]){var g=a?f:f-r,v=f<r,p=a||f>=r,m=v?[]:null;if(c.length){for(var w=_[0]-i;c.length&&o[c[0]][2]<w;)c.shift();for(l=0;l<c.length;l++){
var y=c[l];_[3]>=o[y][1]-i&&_[1]<=o[y][3]+i&&(v&&(a||y>=r)&&m.push(a?y:y-r),p&&y<r&&d[y].push(g))}}if(v&&(d[f]=m),c.length){for(var b=o[f][2],x=0,S=c.length;x<S;){var C=S+x>>>1;b>o[c[C]][2]?x=C+1:S=C}c.splice(x,0,f)}else c.push(f)}}for(h=0;h<d.length;h++)d[h]&&d[h].sort(function(t,e){return t-e});return d}var s=(t=t||require("./node/self.js")).window,a=t.document,o=new function(){function t(t,e,r,s,a){function l(n,l){
"string"==typeof(l=l||(l=o(e,n))&&(l.get?l:l.value))&&"#"===l[0]&&(l=t[l.substring(1)]||l);var c,d="function"==typeof l,f=l,_=a||d&&!l.base?l&&l.get?n in t:t[n]:null;a&&_||(d&&_&&(l.base=_),d&&!1!==s&&(c=n.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(u[c[3].toLowerCase()+c[4]]=c[2]),f&&!d&&f.get&&"function"==typeof f.get&&i.isPlainObject(f)||(f={value:f,writable:!0}),(o(t,n)||{configurable:!0}).configurable&&(f.configurable=!0,f.enumerable=null!=r?r:!c),h(t,n,f))}var u={};if(e){
for(var c in e)e.hasOwnProperty(c)&&!n.test(c)&&l(c);for(var c in u){var d=u[c],f=t["set"+d],_=t["get"+d]||f&&t["is"+d];!_||!0!==s&&0!==_.length||l(c,{get:_,set:f})}}return t}function i(){for(var t=0,e=arguments.length;t<e;t++){var i=arguments[t];i&&c(this,i)}return this}var n=/^(statics|enumerable|beans|preserve)$/,r=[],s=r.slice,a=Object.create,o=Object.getOwnPropertyDescriptor,h=Object.defineProperty,l=r.forEach||function(t,e){for(var i=0,n=this.length;i<n;i++)t.call(e,this[i],i,this)
},u=function(t,e){for(var i in this)this.hasOwnProperty(i)&&t.call(e,this[i],i,this)},c=Object.assign||function(t){for(var e=1,i=arguments.length;e<i;e++){var n=arguments[e];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t},d=function(t,e,i){if(t){var n=o(t,"length");(n&&"number"==typeof n.value?l:u).call(t,e,i=i||t)}return i};return t(i,{inject:function(e){if(e){var i=!0===e.statics?e:e.statics,n=e.beans,r=e.preserve;i!==e&&t(this.prototype,e,e.enumerable,n,r),t(this,i,null,n,r)}
for(var s=1,a=arguments.length;s<a;s++)this.inject(arguments[s]);return this},extend:function(){for(var e,i,n,r=this,s=0,o=arguments.length;s<o&&(!e||!i);s++)n=arguments[s],e=e||n.initialize,i=i||n.prototype;return i=(e=e||function(){r.apply(this,arguments)}).prototype=i||a(this.prototype),h(i,"constructor",{value:e,writable:!0,configurable:!0}),t(e,this),arguments.length&&this.inject.apply(e,arguments),e.base=r,e}}).inject({enumerable:!1,initialize:i,set:i,inject:function(){
for(var e=0,i=arguments.length;e<i;e++){var n=arguments[e];n&&t(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var t=a(this);return t.inject.apply(t,arguments)},each:function(t,e){return d(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:c,each:d,create:a,define:h,describe:o,clone:function(t){return c(new t.constructor,t)},isPlainObject:function(t){var e=null!=t&&t.constructor;return e&&(e===Object||e===i||"Object"===e.name)},pick:function(t,i){
return t!==e?t:i},slice:function(t,e,i){return s.call(t,e,i)}}})};"undefined"!=typeof module&&(module.exports=o),o.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+o.each(this,function(t,e){if(!/^_/.test(e)){var i=typeof t;this.push(e+": "+("number"===i?c.instance.number(t):"string"===i?"'"+t+"'":t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){
return o.importJSON(t,this)},exportJSON:function(t){return o.exportJSON(this,t)},toJSON:function(){return o.serialize(this)},set:function(t,e){return t&&o.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function at(){var t=at.base.apply(this,arguments),e=t.prototype._class;return e&&!o.exports[e]&&(o.exports[e]=t),t},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t)
;if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){if((i=t.length)!==e.length)return!1;for(;i--;)if(!o.equals(t[i],e[i]))return!1}else{var i,n=Object.keys(t);if((i=n.length)!==Object.keys(e).length)return!1;for(;i--;){var r=n[i];if(!e.hasOwnProperty(r)||!o.equals(t[r],e[r]))return!1}}return!0}return!1},read:function(t,i,n,r){if(this===o){var s=this.peek(t,i);return t.__index++,s}var a=this.prototype,h=a._readIndex,l=i||h&&t.__index||0,u=t.length,c=t[l]
;if(r=r||u-l,c instanceof this||n&&n.readNull&&null==c&&r<=1)return h&&(t.__index=l+1),c&&n&&n.clone?c.clone():c;if(c=o.create(a),h&&(c.__read=!0),c=c.initialize.apply(c,l>0||l+r<u?o.slice(t,l,l+r):t)||c,h){t.__index=l+c.__read;var d=c.__filtered;d&&(t.__filtered=d,c.__filtered=e),c.__read=e}return c},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,i,n){
for(var r,s=[],a=e||0,o=n?a+n:t.length,h=a;h<o;h++)s.push(Array.isArray(r=t[h])?this.read(r,0,i):this.read(t,h,i,1));return s},readNamed:function(t,i,n,r,s){var a=this.getNamed(t,i),h=a!==e;if(h){var l=t.__filtered;l||((l=t.__filtered=o.create(t[0])).__unfiltered=t[0]),l[i]=e}var u=h?[a]:t;return this.read(u,n,r,s)},getNamed:function(t,i){var n=t[0];if(t._hasObject===e&&(t._hasObject=1===t.length&&o.isPlainObject(n)),t._hasObject)return i?n[i]:t.__filtered||n},hasNamed:function(t,e){
return!!this.getNamed(t,e)},filter:function(t,i,n,r){function s(r){if(!(n&&r in n||a&&r in a)){var s=i[r];s!==e&&(t[r]=s)}}var a;if(r){for(var o,h={},l=0,u=r.length;l<u;l++)(o=r[l])in i&&(s(o),h[o]=!0);a=h}return Object.keys(i.__unfiltered||i).forEach(s),t},isPlainValue:function(t,e){return o.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,i,n){e=e||{};var r,s=!n;if(s&&(e.formatter=new c(e.precision),n={length:0,definitions:{},references:{},add:function(t,e){
var i="#"+t._id,n=this.references[i];if(!n){this.length++;var r=e.call(t),s=t._class;s&&r[0]!==s&&r.unshift(s),this.definitions[i]=r,n=this.references[i]=[i]}return n}}),t&&t._serialize){r=t._serialize(e,n);var a=t._class;!a||t._compactSerialize||!s&&i||r[0]===a||r.unshift(a)}else if(Array.isArray(t)){r=[];for(var h=0,l=t.length;h<l;h++)r[h]=o.serialize(t[h],e,i,n)}else if(o.isPlainObject(t)){r={};var u=Object.keys(t);for(h=0,l=u.length;h<l;h++){var d=u[h];r[d]=o.serialize(t[d],e,i,n)}
}else r="number"==typeof t?e.formatter.number(t,e.precision):t;return s&&n.length>0?[["dictionary",n.definitions],r]:r},deserialize:function(t,e,i,n,r){var s=t,a=!i,h=a&&t&&t.length&&"dictionary"===t[0][0];if(i=i||{},Array.isArray(t)){var l=t[0],u="dictionary"===l;if(1==t.length&&/^#/.test(l))return i.dictionary[l];s=[];for(var c=(l=o.exports[l])?1:0,d=t.length;c<d;c++)s.push(o.deserialize(t[c],e,i,u,h));if(l){var f=s;e?s=e(l,f,a||r):(s=o.create(l.prototype),l.apply(s,f))}
}else if(o.isPlainObject(t))for(var _ in s={},n&&(i.dictionary=s),t)s[_]=o.deserialize(t[_],e,i);return h?s[1]:s},exportJSON:function(t,e){var i=o.serialize(t,e);return e&&0==e.asString?i:JSON.stringify(i)},importJSON:function(t,e){return o.deserialize("string"==typeof t?JSON.parse(t):t,function(t,i,n){var r=n&&e&&e.constructor===t,s=r?e:o.create(t.prototype);if(1===i.length&&s instanceof S&&(r||!(s instanceof k))){var a=i[0];o.isPlainObject(a)&&(a.insert=!1)}return(r?s.set:t).apply(s,i),
r&&(e=null),s})},splice:function(t,i,n,r){var s=i&&i.length,a=n===e;(n=a?t.length:n)>t.length&&(n=t.length);for(var o=0;o<s;o++)i[o]._index=n+o;if(a)return t.push.apply(t,i),[];var h=[n,r];i&&h.push.apply(h,i);for(var l=t.splice.apply(t,h),u=(o=0,l.length);o<u;o++)l[o]._index=e;for(o=n+s,u=t.length;o<u;o++)t[o]._index=o;return l},capitalize:function(t){return t.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(t,e){
return e.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var h={on:function(t,e){if("string"!=typeof t)o.each(t,function(t,e){this.on(e,t)},this);else{var i=this._eventTypes,n=i&&i[t],r=this._callbacks=this._callbacks||{};-1===(r=r[t]=r[t]||[]).indexOf(e)&&(r.push(e),n&&n.install&&1===r.length&&n.install.call(this,t))}return this},off:function(t,e){if("string"==typeof t){var i,n=this._eventTypes,r=n&&n[t],s=this._callbacks&&this._callbacks[t]
;return s&&(!e||-1!==(i=s.indexOf(e))&&1===s.length?(r&&r.uninstall&&r.uninstall.call(this,t),delete this._callbacks[t]):-1!==i&&s.splice(i,1)),this}o.each(t,function(t,e){this.off(e,t)},this)},once:function(t,e){return this.on(t,function(){e.apply(this,arguments),this.off(t,e)})},emit:function(t,e){var i=this._callbacks&&this._callbacks[t];if(!i)return!1;var n=o.slice(arguments,1),r=e&&e.target&&!e.currentTarget;i=i.slice(),r&&(e.currentTarget=this)
;for(var s=0,a=i.length;s<a;s++)if(0==i[s].apply(this,n)){e&&e.stop&&e.stop();break}return r&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,i=this._callbacks,n=t?"install":"uninstall";if(e)for(var r in i)if(i[r].length>0){var s=e[r],a=s&&s[n];a&&a.call(this,r)}},statics:{inject:function ot(t){var e=t._events;if(e){var i={};o.each(e,function(e,n){
var r="string"==typeof e,s=r?e:n,a=o.capitalize(s),h=s.substring(2).toLowerCase();i[h]=r?{}:e,s="_"+s,t["get"+a]=function(){return this[s]},t["set"+a]=function(t){var e=this[s];e&&this.off(h,e),t&&this.on(h,t),this[s]=t}}),t._eventTypes=i}return ot.base.apply(this,arguments)}}},l=o.extend({_class:"PaperScope",initialize:function ht(){paper=this,this.settings=new o({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=ht._id++,
ht._scopes[this._id]=this;var e=ht.prototype;if(!this.support){var i=it.getContext(1,1)||{};e.support={nativeDash:"setLineDash"in i||"mozDash"in i,nativeBlendModes:nt.nativeModes},it.release(i)}if(!this.agent){var n=t.navigator.userAgent.toLowerCase(),r=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(n)||[])[0],s="darwin"===r?"mac":r,a=e.agent=e.browser={platform:s};s&&(a[s]=!0),
n.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(t,e,i,n,r){if(!a.chrome){var s="opera"===e?n:/^(node|trident)$/.test(e)?r:i;a.version=s,a.versionNumber=parseFloat(s),e="trident"===e?"msie":e,a.name=e,a[e]=!0}}),a.chrome&&delete a.webkit,a.atom&&delete a.chrome}},version:"0.11.4-develop",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){
paper.PaperScript.execute(t,this,e),J.updateFocus()},install:function(t){var e=this;for(var i in o.each(["project","view","tool"],function(i){o.define(t,i,{configurable:!0,get:function(){return e[i]}})}),this)!/^_/.test(i)&&this[i]&&(t[i]=this[i])},setup:function(t){return paper=this,this.project=new x(t),this},createCanvas:function(t,e){return it.getCanvas(t,e)},activate:function(){paper=this},clear:function(){for(var t=this.projects,e=this.tools,i=t.length-1;i>=0;i--)t[i].remove()
;for(i=e.length-1;i>=0;i--)e[i].remove()},remove:function(){this.clear(),delete l._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,i){return e[t](i)||e[t]("data-paper-"+i)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),u=o.extend(h,{initialize:function(t){this._scope=paper,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},
activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(o.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}
}),c=o.extend({initialize:function(t){this.precision=o.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,i){return this.number(t)+(i||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}})
;c.instance=new c;var d=new function(){function t(t,e,i){return t<e?e:t>i?i:t}function e(t,e,i){function n(t){var e=134217729*t,i=t-e+e;return[i,t-i]}var r=e*e-t*i,a=e*e+t*i;if(3*s(r)<a){var o=n(t),h=n(e),l=n(i),u=e*e,c=t*i;r=u-c+(h[0]*h[0]-u+2*h[0]*h[1]+h[1]*h[1]-(o[0]*l[0]-c+o[0]*l[1]+o[1]*l[0]+o[1]*l[1]))}return r}function i(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?o(2,-Math.round(h(t))):0}
var n=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],r=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],s=Math.abs,a=Math.sqrt,o=Math.pow,h=Math.log2||function(t){
return Math.log(t)*Math.LOG2E},l=1e-12,u=1.12e-16;return{EPSILON:l,MACHINE_EPSILON:u,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,CLIPPING_EPSILON:1e-10,KAPPA:4*(a(2)-1)/3,isZero:function(t){return t>=-l&&t<=l},clamp:t,integrate:function(t,e,i,s){for(var a=n[s-2],o=r[s-2],h=.5*(i-e),l=h+e,u=0,c=s+1>>1,d=1&s?o[u++]*t(l):0;u<c;){var f=h*a[u];d+=o[u++]*(t(l+f)+t(l-f))}return h*d},findRoot:function(e,i,n,r,a,o,h){for(var l=0;l<o;l++){var u=e(n),c=u/i(n),d=n-c;if(s(c)<h){
n=d;break}u>0?(a=n,n=d<=r?.5*(r+a):d):(r=n,n=d>=a?.5*(r+a):d)}return t(n,r,a)},solveQuadratic:function(n,r,o,h,c,d){var f,_=Infinity;if(s(n)<l){if(s(r)<l)return s(o)<l?-1:0;f=-o/r}else{var g=e(n,r*=-.5,o);if(g&&s(g)<u){var v=i(s(n),s(r),s(o));v&&(g=e(n*=v,r*=v,o*=v))}if(g>=-u){var p=g<0?0:a(g),m=r+(r<0?-p:p);0===m?_=-(f=o/n):(f=m/n,_=o/m)}}var w=0,y=null==c,b=c-l,x=d+l;return isFinite(f)&&(y||f>b&&f<x)&&(h[w++]=y?f:t(f,c,d)),_!==f&&isFinite(_)&&(y||_>b&&_<x)&&(h[w++]=y?_:t(_,c,d)),w},
solveCubic:function(e,n,r,h,c,f,_){function g(t){var i=e*(v=t);w=(i+(p=i+n))*v+(m=p*v+r),y=m*v+h}var v,p,m,w,y,b=i(s(e),s(n),s(r),s(h));if(b&&(e*=b,n*=b,r*=b,h*=b),s(e)<l)e=n,p=r,m=h,v=Infinity;else if(s(h)<l)p=n,m=r,v=0;else{g(-n/e/3);var x=y/e,S=o(s(x),1/3),C=x<0?-1:1,k=-w/e,z=k>0?1.324717957244746*Math.max(S,a(k)):S,P=v-C*z;if(P!==v){do{g(P),P=0===w?v:v-y/w/(1+u)}while(C*P>C*v);s(e)*v*v>s(h/v)&&(p=((m=-h/v)-r)/v)}}var I=d.solveQuadratic(e,p,m,c,f,_),M=null==f
;return isFinite(v)&&(0===I||I>0&&v!==c[0]&&v!==c[1])&&(M||v>f-l&&v<_+l)&&(c[I++]=M?v:t(v,f,_)),I}}},f={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},_=o.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var i=typeof t,n=this.__read,r=0;if("number"===i){var s="number"==typeof e;this._set(t,s?e:t),n&&(r=s?2:1)}else if("undefined"===i||null===t)this._set(0,0),n&&(r=null===t?1:0);else{
var a="string"===i?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(a)?this._set(+a[0],+(a.length>1?a[1]:a[0])):"x"in a?this._set(a.x||0,a.y||0):"width"in a?this._set(a.width||0,a.height||0):"angle"in a?(this._set(a.length||0,0),this.setAngle(a.angle||0)):(this._set(0,0),r=0)}return n&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},
clone:function(){return new _(this.x,this.y)},toString:function(){var t=c.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var i=t/this.getLength();d.isZero(i)&&this.getAngle(),this._set(this.x*i,this.y*i)}},
getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=_.read(arguments),e=this.getLength()*t.getLength();if(d.isZero(e))return NaN;var i=this.dot(t)/e;return Math.acos(i<-1?-1:i>1?1:i)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},
setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=_.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(t){var e=(t=_.read(arguments)).x-this.x,i=t.y-this.y,n=e*e+i*i;return o.read(arguments)?n:Math.sqrt(n)},normalize:function(t){t===e&&(t=1)
;var i=this.getLength(),n=0!==i?t/i:0,r=new _(this.x*n,this.y*n);return n>=0&&(r._angle=this._angle),r},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var i=e?this.subtract(e):this,n=Math.sin(t),r=Math.cos(t);return i=new _(i.x*r-i.y*n,i.x*n+i.y*r),e?i.add(e):i},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=_.read(arguments);return new _(this.x+t.x,this.y+t.y)},subtract:function(){var t=_.read(arguments);return new _(this.x-t.x,this.y-t.y)},
multiply:function(){var t=_.read(arguments);return new _(this.x*t.x,this.y*t.y)},divide:function(){var t=_.read(arguments);return new _(this.x/t.x,this.y/t.y)},modulo:function(){var t=_.read(arguments);return new _(this.x%t.x,this.y%t.y)},negate:function(){return new _(-this.x,-this.y)},isInside:function(){return m.read(arguments).contains(this)},isClose:function(t,e){var i=this.x-t.x,n=this.y-t.y;return i*i+n*n<e*e},isCollinear:function(){var t=_.read(arguments)
;return _.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=_.read(arguments);return _.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=d.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=_.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=_.read(arguments)
;return this.x*t.y-this.y*t.x},project:function(){var t=_.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new _(t.x*e,t.y*e)},statics:{min:function(){var t=_.read(arguments),e=_.read(arguments);return new _(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var t=_.read(arguments),e=_.read(arguments);return new _(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new _(Math.random(),Math.random())},isCollinear:function(t,e,i,n){
return Math.abs(t*n-e*i)<=1e-8*Math.sqrt((t*t+e*e)*(i*i+n*n))},isOrthogonal:function(t,e,i,n){return Math.abs(t*i+e*n)<=1e-8*Math.sqrt((t*t+e*e)*(i*i+n*n))}}},o.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new _(e(this.x),e(this.y))}},{})),g=_.extend({initialize:function(t,e,i,n){this._x=t,this._y=e,this._owner=i,this._setter=n},_set:function(t,e,i){return this._x=t,this._y=e,i||this._owner[this._setter](this),this},getX:function(){return this._x},
setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),v=o.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var i=typeof t,n=this.__read,r=0;if("number"===i){
var s="number"==typeof e;this._set(t,s?e:t),n&&(r=s?2:1)}else if("undefined"===i||null===t)this._set(0,0),n&&(r=null===t?1:0);else{var a="string"===i?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(a)?this._set(+a[0],+(a.length>1?a[1]:a[0])):"width"in a?this._set(a.width||0,a.height||0):"x"in a?this._set(a.x||0,a.y||0):(this._set(0,0),r=0)}return n&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){
return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new v(this.width,this.height)},toString:function(){var t=c.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=v.read(arguments);return new v(this.width+t.width,this.height+t.height)},
subtract:function(){var t=v.read(arguments);return new v(this.width-t.width,this.height-t.height)},multiply:function(){var t=v.read(arguments);return new v(this.width*t.width,this.height*t.height)},divide:function(){var t=v.read(arguments);return new v(this.width/t.width,this.height/t.height)},modulo:function(){var t=v.read(arguments);return new v(this.width%t.width,this.height%t.height)},negate:function(){return new v(-this.width,-this.height)},isZero:function(){var t=d.isZero
;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new v(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new v(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new v(Math.random(),Math.random())}}},o.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new v(e(this.width),e(this.height))}},{})),p=v.extend({
initialize:function(t,e,i,n){this._width=t,this._height=e,this._owner=i,this._setter=n},_set:function(t,e,i){return this._width=t,this._height=e,i||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),m=o.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,i,n,r){
var s,a=typeof t;if("number"===a?(this._set(t,i,n,r),s=4):"undefined"===a||null===t?(this._set(0,0,0,0),s=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this._set.apply(this,t),s=1):t.x!==e||t.width!==e?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),s=1):t.from===e&&t.to===e&&(this._set(0,0,0,0),o.filter(this,t),s=1)),s===e){var h,l,u=_.readNamed(arguments,"from"),c=o.peek(arguments),d=u.x,f=u.y;if(c&&c.x!==e||o.hasNamed(arguments,"to")){var g=_.readNamed(arguments,"to");h=g.x-d,
l=g.y-f,h<0&&(d=g.x,h=-h),l<0&&(f=g.y,l=-l)}else{var p=v.read(arguments);h=p.width,l=p.height}this._set(d,f,h,l),s=arguments.__index;var m=arguments.__filtered;m&&(this.__filtered=m)}return this.__read&&(this.__read=s),this},set:"#initialize",_set:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},clone:function(){return new m(this.x,this.y,this.width,this.height)},equals:function(t){var e=o.isPlainValue(t)?m.read(arguments):t
;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=c.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?_:g)(this.x,this.y,this,"setPoint")},setPoint:function(){
var t=_.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?v:p)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=v.read(arguments),e=this._sx,i=this._sy,n=t.width,r=t.height;e&&(this.x+=(this.width-n)*e),i&&(this.y+=(this.height-r)*i),this.width=n,this.height=r,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=.5===this._sx?2*e:e}this.x=t,this._sx=this._fw=0},getTop:function(){
return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=.5===this._sy?2*e:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=.5===this._sx?2*e:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=.5===this._sy?2*e:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){
return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?_:g)(this.getCenterX(),this.getCenterY(),this,"setCenter")},
setCenter:function(){var t=_.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==e||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(m.read(arguments)):this._containsPoint(_.read(arguments))},_containsPoint:function(t){var e=t.x,i=t.y;return e>=this.x&&i>=this.y&&e<=this.x+this.width&&i<=this.y+this.height},
_containsRectangle:function(t){var e=t.x,i=t.y;return e>=this.x&&i>=this.y&&e+t.width<=this.x+this.width&&i+t.height<=this.y+this.height},intersects:function(){var t=m.read(arguments),e=o.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=m.read(arguments),e=Math.max(this.x,t.x),i=Math.max(this.y,t.y),n=Math.min(this.x+this.width,t.x+t.width),r=Math.min(this.y+this.height,t.y+t.height)
;return new m(e,i,n-e,r-i)},unite:function(){var t=m.read(arguments),e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x+t.width),r=Math.max(this.y+this.height,t.y+t.height);return new m(e,i,n-e,r-i)},include:function(){var t=_.read(arguments),e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x),r=Math.max(this.y+this.height,t.y);return new m(e,i,n-e,r-i)},expand:function(){var t=v.read(arguments),e=t.width,i=t.height
;return new m(this.x-e/2,this.y-i/2,this.width+e,this.height+i)},scale:function(t,i){return this.expand(this.width*t-this.width,this.height*(i===e?t:i)-this.height)}},o.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var i=t.join(""),n=/^[RL]/.test(i);e>=4&&(t[1]+=n?"Y":"X");var r=t[n?0:1],s=t[n?1:0],a="get"+r,o="get"+s,h="set"+r,l="set"+s,u="set"+i;this["get"+i]=function(t){
return new(t?_:g)(this[a](),this[o](),this,u)},this[u]=function(){var t=_.read(arguments);this[h](t.x),this[l](t.y)}},{beans:!0})),w=m.extend({initialize:function(t,e,i,n,r,s){this._set(t,e,i,n,!0),this._owner=r,this._setter=s},_set:function(t,e,i,n,r){return this._x=t,this._y=e,this._width=i,this._height=n,r||this._owner[this._setter](this),this}},new function(){var t=m.prototype;return o.each(["x","y","width","height"],function(t){var e=o.capitalize(t),i="_"+t;this["get"+e]=function(){
return this[i]},this["set"+e]=function(t){this[i]=t,this._dontNotify||this._owner[this._setter](this)}},o.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var i="set"+e;this[i]=function(){this._dontNotify=!0,t[i].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},
setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),y=o.extend({_class:"Matrix",initialize:function lt(t,e){var i=arguments.length,n=!0;if(i>=6?this._set.apply(this,arguments):1===i||2===i?t instanceof lt?this._set(t._a,t._b,t._c,t._d,t._tx,t._ty,e):Array.isArray(t)?this._set.apply(this,e?t.concat([e]):t):n=!1:i?n=!1:this.reset(),!n)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,i,n,r,s,a){
return this._a=t,this._b=e,this._c=i,this._d=n,this._tx=r,this._ty=s,a||this._changed(),this},_serialize:function(t,e){return o.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(9))},clone:function(){return new y(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){
var t=c.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var i=this._owner;return!!i&&(i.transform(null,!0,o.pick(t,!0),e),this.isIdentity())},translate:function(){var t=_.read(arguments),e=t.x,i=t.y;return this._tx+=e*this._a+i*this._c,
this._ty+=e*this._b+i*this._d,this._changed(),this},scale:function(){var t=_.read(arguments),e=_.read(arguments,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=_.read(arguments,1),i=e.x,n=e.y,r=Math.cos(t),s=Math.sin(t),a=i-i*r+n*s,o=n-i*s-n*r,h=this._a,l=this._b,u=this._c,c=this._d;return this._a=r*h+s*u,this._b=r*l+s*c,this._c=-s*h+r*u,this._d=-s*l+r*c,
this._tx+=a*h+o*u,this._ty+=a*l+o*c,this._changed(),this},shear:function(){var t=_.read(arguments),e=_.read(arguments,0,{readNull:!0});e&&this.translate(e);var i=this._a,n=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*i,this._d+=t.x*n,e&&this.translate(e.negate()),this._changed(),this},skew:function(){var t=_.read(arguments),e=_.read(arguments,0,{readNull:!0}),i=Math.PI/180,n=new _(Math.tan(t.x*i),Math.tan(t.y*i));return this.shear(n,e)},append:function(t,e){if(t){
var i=this._a,n=this._b,r=this._c,s=this._d,a=t._a,o=t._c,h=t._b,l=t._d,u=t._tx,c=t._ty;this._a=a*i+h*r,this._c=o*i+l*r,this._b=a*n+h*s,this._d=o*n+l*s,this._tx+=u*i+c*r,this._ty+=u*n+c*s,e||this._changed()}return this},prepend:function(t,e){if(t){var i=this._a,n=this._b,r=this._c,s=this._d,a=this._tx,o=this._ty,h=t._a,l=t._c,u=t._b,c=t._d,d=t._tx,f=t._ty;this._a=h*i+l*n,this._c=h*r+l*s,this._b=u*i+c*n,this._d=u*r+c*s,this._tx=h*a+l*o+d,this._ty=u*a+c*o+f,e||this._changed()}return this},
appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,i=this._c,n=this._d,r=this._tx,s=this._ty,a=t*n-e*i,o=null;return a&&!isNaN(a)&&isFinite(r)&&isFinite(s)&&(this._a=n/a,this._b=-e/a,this._c=-i/a,this._d=t/a,this._tx=(i*s-n*r)/a,this._ty=(e*r-t*s)/a,o=this),o},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){
return new y(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,i){
return arguments.length<3?this._transformPoint(_.read(arguments)):this._transformCoordinates(t,e,i)},_transformPoint:function(t,e,i){var n=t.x,r=t.y;return e||(e=new _),e._set(n*this._a+r*this._c+this._tx,n*this._b+r*this._d+this._ty,i)},_transformCoordinates:function(t,e,i){for(var n=0,r=2*i;n<r;n+=2){var s=t[n],a=t[n+1];e[n]=s*this._a+a*this._c+this._tx,e[n+1]=s*this._b+a*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,i=t.y,n=e+t.width,r=i+t.height,s=[e,i,n,i,n,r,e,r]
;return this._transformCoordinates(s,s,4)},_transformBounds:function(t,e,i){for(var n=this._transformCorners(t),r=n.slice(0,2),s=r.slice(),a=2;a<8;a++){var o=n[a],h=1&a;o<r[h]?r[h]=o:o>s[h]&&(s[h]=o)}return e||(e=new m),e._set(r[0],r[1],s[0]-r[0],s[1]-r[1],i)},inverseTransform:function(){return this._inverseTransform(_.read(arguments))},_inverseTransform:function(t,e,i){var n=this._a,r=this._b,s=this._c,a=this._d,o=this._tx,h=this._ty,l=n*a-r*s,u=null;if(l&&!isNaN(l)&&isFinite(o)&&isFinite(h)){
var c=t.x-this._tx,d=t.y-this._ty;e||(e=new _),u=e._set((c*a-d*s)/l,(d*n-c*r)/l,i)}return u},decompose:function(){var t,e,i,n=this._a,r=this._b,s=this._c,a=this._d,o=n*a-r*s,h=Math.sqrt,l=Math.atan2,u=180/Math.PI;if(0!==n||0!==r){var c=h(n*n+r*r);t=Math.acos(n/c)*(r>0?1:-1),e=[c,o/c],i=[l(n*s+r*a,c*c),0]}else if(0!==s||0!==a){var d=h(s*s+a*a);t=Math.asin(s/d)*(a>0?1:-1),e=[o/d,d],i=[0,l(n*s+r*a,d*d)]}else t=0,i=e=[0,0];return{translation:this.getTranslation(),rotation:t*u,scaling:new _(e),
skewing:new _(i[0]*u,i[1]*u)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new _(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},o.each(["a","b","c","d","tx","ty"],function(t){var e=o.capitalize(t),i="_"+t
;this["get"+e]=function(){return this[i]},this["set"+e]=function(t){this[i]=t,this._changed()}},{})),b=o.extend({_class:"Line",initialize:function(t,e,i,n,r){var s=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=i,this._vy=n,s=r):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,s=i),s||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new _(this._px,this._py)},getVector:function(){return new _(this._vx,this._vy)},getLength:function(){
return this.getVector().getLength()},intersect:function(t,e){return b.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return b.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return b.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return _.isCollinear(this._vx,this._vy,t._vx,t._vy)},
isOrthogonal:function(t){return _.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,i,n,r,s,a,o,h,l){h||(i-=t,n-=e,a-=r,o-=s);var u=i*o-n*a;if(!d.isZero(u)){var c=t-r,f=e-s,g=(a*f-o*c)/u,v=(i*f-n*c)/u,p=1e-12,m=-p,w=1+p;if(l||m<g&&g<w&&m<v&&v<w)return l||(g=g<=0?0:g>=1?1:g),new _(t+g*i,e+g*n)}},getSide:function(t,e,i,n,r,s,a,o){a||(i-=t,n-=e);var h=r-t,l=h*n-(s-e)*i;return!o&&d.isZero(l)&&(l=(h*i+h*i)/(i*i+n*n))>=0&&l<=1&&(l=0),l<0?-1:l>0?1:0},
getSignedDistance:function(t,e,i,n,r,s,a){return a||(i-=t,n-=e),0===i?n>0?r-t:t-r:0===n?i<0?s-e:e-s:((r-t)*n-(s-e)*i)/Math.sqrt(i*i+n*n)},getDistance:function(t,e,i,n,r,s,a){return Math.abs(b.getSignedDistance(t,e,i,n,r,s,a))}}}),x=u.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){u.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new U(null,null,this),
this._view=J.create(this,t||it.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return o.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var i=this._view;i&&(i._needsUpdate=!0,!i._requested&&i._autoUpdate&&i.requestUpdate())}var n=this._changes;if(n&&e){var r=this._changesById,s=e._id,a=r[s];a?a.flags|=t:n.push(r[s]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},
isEmpty:function(){return!this._children.length},remove:function ut(){return!!ut.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new k({project:this,insert:!0
})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({"class":I,match:function(i){var n=i._definition,r=n._id;return e[r]||(e[r]=!0,t.push(n)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var i in t){var n=t[i],r=n._selection;1&r&&n.isInserted()?e.push(n):r||this._updateSelection(n)}return e},_updateSelection:function(t){var e=t._id,i=this._selectionItems;t._selection?i[e]!==t&&(this._selectionCount++,
i[e]=t):i[e]===t&&(this._selectionCount--,delete i[e])},selectAll:function(){for(var t=this._children,e=0,i=t.length;e<i;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(e,t)},insertLayer:function(t,e){if(e instanceof k){e._remove(!1,!0),o.splice(this._children,[e],t,0),e._setProject(this,!0);var i=e._name;i&&e.setName(i),this._changes&&e._changed(5),
this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,i,n){return i=this.insertLayer(t,i)||(this._activeLayer||this._insertItem(e,new k(S.NO_INSERT),!0)).insertChild(t,i),n&&i.activate&&i.activate(),i},getItems:function(t){return S._getItems(this,t)},getItem:function(t){return S._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return o.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){
var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var i=e[t];if(i){for(var n in i){var r=i[n];for(var s in e){var a=e[s];a&&a!=i&&delete a[r._id]}r.remove()}e[t]=null}}},draw:function(t,e,i){this._updateVersion++,t.save(),e.applyToContext(t);for(var n=this._children,r=new o({offset:new _(0,0),pixelRatio:i,viewMatrix:e.isIdentity()?null:e,matrices:[new y],updateMatrix:!0}),s=0,a=n.length;s<a;s++)n[s].draw(t,r);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1
;var h=this._selectionItems,l=this._scope.settings.handleSize,u=this._updateVersion;for(var c in h)h[c]._drawSelection(t,e,l,h,u);t.restore()}}}),S=o.extend(h,{statics:{extend:function ct(t){return t._serializeFields&&(t._serializeFields=o.set({},this.prototype._serializeFields,t._serializeFields)),ct.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,
_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new y,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return o.each(t,function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},
uninstall:function(t){this.getView()._countItemEvent(t,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,i){var n=t&&o.isPlainObject(t),r=n&&!0===t.internal,s=this._matrix=new y,a=n&&t.project||paper.project,h=paper.settings;return this._id=r?null:f.get(),this._parent=this._index=null,
this._applyMatrix=this._canApplyMatrix&&h.applyMatrix,i&&s.translate(i),s._owner=this,this._style=new U(a._currentStyle,this,a),r||n&&0==t.insert||!h.insertItems&&(!n||!0!==t.insert)?this._setProject(a):(n&&t.parent||a)._insertItem(e,this,!0),n&&t!==S.NO_INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(t,e){function i(i){for(var s in i){var a=r[s];o.equals(a,"leading"===s?1.2*i.fontSize:i[s])||(n[s]=o.serialize(a,t,"data"!==s,e))}}var n={},r=this
;return i(this._serializeFields),this instanceof C||i(this._style._defaults),[this._class,n]},_changed:function(t){var i=this._symbol,n=this._parent||i,r=this._project;8&t&&(this._bounds=this._position=this._decomposed=this._globalMatrix=e),n&&40&t&&S._clearBoundsCache(n),2&t&&S._clearBoundsCache(this),r&&r._changed(t,this),i&&i._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),
t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var i=this._getOwner();if(t&&i){var n=i._children,r=i._namedChildren;(r[t]=r[t]||[]).push(this),t in n||(n[t]=this)}this._name=t||e,this._changed(128)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},o.each(["locked","visible","blendMode","opacity","guide"],function(t){var e=o.capitalize(t),i="_"+t,n={locked:128,visible:137};this["get"+e]=function(){return this[i]},
this["set"+e]=function(e){e!=this[i]&&(this[i]=e,this._changed(n[t]||129))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(129))}},_changeSelection:function(t,e){var i=this._selection;this.setSelection(e?i|t:i&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,i=t.length;e<i;e++)if(t[e].isSelected())return!0
;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,i=0,n=e.length;i<n;i++)e[i].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var i=0,n=t.length;i<n;i++)if(!t[i].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var i=0,n=e.length;i<n;i++)e[i].setFullySelected(t);this._changeSelection(1,t)},
isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=this._position,i=t?_:g;if(!e){var n=this._pivot;e=this._position=n?this._matrix._transformPoint(n):this.getBounds().getCenter(!0)}
return new i(e.x,e.y,this,"setPosition")},setPosition:function(){this.translate(_.read(arguments).subtract(this.getPosition(!0)))},getPivot:function(){var t=this._pivot;return t?new g(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=_.read(arguments,0,{clone:!0,readNull:!0}),this._position=e}},o.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(t,e){this[e]=function(e){return this.getBounds(e,t)}},{beans:!0,
getBounds:function(t,e){var i=e||t instanceof y,n=o.set({},i?e:t,this._boundsOptions);n.stroke&&!this.getStrokeScaling()||(n.cacheItem=this);var r=this._getCachedBounds(i&&t,n).rect;return arguments.length?r:new w(r.x,r.y,r.width,r.height,this,"setBounds")},setBounds:function(){var t=m.read(arguments),e=this.getBounds(),i=this._matrix,n=new y,r=t.getCenter();n.translate(r),t.width==e.width&&t.height==e.height||(i.isInvertible()||(i.set(i._backup||(new y).translate(i.getTranslation())),
e=this.getBounds()),n.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),r=e.getCenter(),n.translate(-r.x,-r.y),this.transform(n)},_getBounds:function(t,e){var i=this._children;return i&&i.length?(S._updateBoundsCache(this,e.cacheItem),S._getBounds(i,t,e)):new m},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,i){t=t&&t._orNullIfIdentity()
;var n=e.internal&&!i,r=e.cacheItem,s=n?null:this._matrix._orNullIfIdentity(),a=r&&(!t||t.equals(s))&&this._getBoundsCacheKey(e,n),o=this._bounds;if(S._updateBoundsCache(this._parent||this._symbol,r),a&&o&&a in o)return{rect:(d=o[a]).rect.clone(),nonscaling:d.nonscaling};var h=this._getBounds(t||s,e),l=h.rect||h,u=this._style,c=h.nonscaling||u.hasStroke()&&!u.getStrokeScaling();if(a){o||(this._bounds=o={});var d=o[a]={rect:l.clone(),nonscaling:c,internal:n}}return{rect:l,nonscaling:c}},
_getStrokeMatrix:function(t,e){var i=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,n=i?i.getViewMatrix().invert():t;return n&&n._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var i=e._id,n=t._boundsCache=t._boundsCache||{ids:{},list:[]};n.ids[i]||(n.list.push(e),n.ids[i]=e)}},_clearBoundsCache:function(t){var i=t._boundsCache;if(i){t._bounds=t._position=t._boundsCache=e;for(var n=0,r=i.list,s=r.length;n<s;n++){var a=r[n]
;a!==t&&(a._bounds=a._position=e,a._boundsCache&&S._clearBoundsCache(a))}}},_getBounds:function(t,e,i){var n=Infinity,r=-n,s=n,a=r,o=!1;i=i||{};for(var h=0,l=t.length;h<l;h++){var u=t[h];if(u._visible&&!u.isEmpty()){var c=u._getCachedBounds(e&&e.appended(u._matrix),i,!0),d=c.rect;n=Math.min(d.x,n),s=Math.min(d.y,s),r=Math.max(d.x+d.width,r),a=Math.max(d.y+d.height,a),c.nonscaling&&(o=!0)}}return{rect:isFinite(n)?new m(n,s,r-n,a-s):new m,nonscaling:o}}}}),{beans:!0,_decompose:function(){
return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var i=this._decomposed;this.rotate(t-e),i&&(i.rotation=t,this._decomposed=i)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new g(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=_.read(arguments,0,{clone:!0,
readNull:!0});if(t&&e&&!t.equals(e)){var i=this.getRotation(),n=this._decomposed,r=new y,s=this.getPosition(!0);r.translate(s),i&&r.rotate(i),r.scale(e.x/t.x,e.y/t.y),i&&r.rotate(-i),r.translate(s.negate()),this.transform(r),n&&(n.scaling=e,this._decomposed=n)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix,i=this._project._updateVersion;if(e&&e._updateVersion!==i&&(e=null),
!e){e=this._globalMatrix=this._matrix.clone();var n=this._parent;n&&e.prepend(n.getGlobalMatrix(!0)),e._updateVersion=i}return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){
return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var i=this._children,n=0,r=i&&i.length;n<r;n++)i[n]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function dt(t){dt.base.call(this,t);for(var e=this._children,i=0,n=e&&e.length;i<n;i++)e[i]._installEvents(t)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof k)return t;return null},
getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},
getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){
return o.equals(this._children,t._children)},clone:function(t){var i=new this.constructor(S.NO_INSERT),n=this._children,r=o.pick(t?t.insert:e,t===e||!0===t),s=o.pick(t?t.deep:e,!0);n&&i.copyAttributes(this),n&&!s||i.copyContent(this),n||i.copyAttributes(this),r&&i.insertAbove(this);var a=this._name,h=this._parent;if(a&&h){n=h._children;for(var l=a,u=1;n[a];)a=l+" "+u++;a!==l&&i.setName(a)}return i},copyContent:function(t){
for(var e=t._children,i=0,n=e&&e.length;i<n;i++)this.addChild(e[i].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var i=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],n=0,r=i.length;n<r;n++){var s=i[n];t.hasOwnProperty(s)&&(this[s]=t[s])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var a=t._data,h=t._name;this._data=a?o.clone(a):null,h&&this.setName(h)},
rasterize:function(t,i){var n=this.getStrokeBounds(),r=(t||this.getView().getResolution())/72,s=n.getTopLeft().floor(),a=n.getBottomRight().ceil(),h=new v(a.subtract(s)),l=new P(S.NO_INSERT);if(!h.isZero()){var u=it.getCanvas(h.multiply(r)),c=u.getContext("2d"),d=(new y).scale(r).translate(s.negate());c.save(),d.applyToContext(c),this.draw(c,new o({matrices:[d]})),c.restore(),l.setCanvas(u)}return l.transform((new y).translate(s.add(h.divide(2))).scale(1/r)),(i===e||i)&&l.insertAbove(this),l},
contains:function(){return!!this._contains(this._matrix._inverseTransform(_.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var i=e.length-1;i>=0;i--)if(e[i].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return m.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new E.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){
return t instanceof S&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){return this._hitTest(_.read(arguments),T.getOptions(arguments))}function e(){var t=_.read(arguments),e=T.getOptions(arguments),i=[];return this._hitTest(t,o.set({all:i},e)),i}function i(t,e,i,n){var r=this._children;if(r)for(var s=r.length-1;s>=0;s--){var a=r[s],o=a!==n&&a._hitTest(t,e,i);if(o&&!e.all)return o}return null}return x.inject({hitTest:t,hitTestAll:e,_hitTest:i
}),{hitTest:t,hitTestAll:e,_hitTestChildren:i}},{_hitTest:function(t,e,i){function n(t){return t&&f&&!f(t)&&(t=null),t&&e.all&&e.all.push(t),t}function r(e,i){var n=i?u["get"+i]():_.getPosition();if(t.subtract(n).divide(l).length<=1)return new T(e,_,{name:i?o.hyphenate(i):e,point:n})}if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null
;var s=this._matrix,a=i?i.appended(s):this.getGlobalMatrix().prepend(this.getView()._matrix),h=Math.max(e.tolerance,1e-12),l=e._tolerancePadding=new v(E._getStrokePadding(h,s._shiftless().invert()));if(!(t=s._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(l.multiply(2))._containsPoint(t))return null
;var u,c,d=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==o.hyphenate(this._class)||e["class"]&&!(this instanceof e["class"])),f=e.match,_=this,g=e.position,p=e.center,m=e.bounds;if(d&&this._parent&&(g||p||m)){if((p||m)&&(u=this.getInternalBounds()),!(c=g&&r("position")||p&&r("center","Center"))&&m)for(var w=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],y=0;y<8&&!c;y++)c=r("bounds",w[y]);c=n(c)}
return c||(c=this._hitTestChildren(t,e,a)||d&&n(this._hitTestSelf(t,e,a,this.getStrokeScaling()?null:a._shiftless().invert()))||null),c&&c.point&&(c.point=s.transform(c.point)),c},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new T("fill",this)},matches:function(t,e){function i(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n],s=e[n];if(o.isPlainObject(r)&&o.isPlainObject(s)){if(!i(r,s))return!1}else if(!o.equals(r,s))return!1}return!0}var n=typeof t
;if("object"===n){for(var r in t)if(t.hasOwnProperty(r)&&!this.matches(r,t[r]))return!1;return!0}if("function"===n)return t(this);if("match"===t)return e(this);var s=/^(empty|editable)$/.test(t)?this["is"+o.capitalize(t)]():"type"===t?o.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;s=this._class}if("function"==typeof e)return!!e(s);if(e){if(e.test)return e.test(s);if(o.isPlainObject(e))return i(e,s)}return o.equals(s,e)},getItems:function(t){
return S._getItems(this,t,this._matrix)},getItem:function(t){return S._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function ft(t,e,i,n,r){if(!n){var s="object"==typeof e&&e,a=s&&s.overlapping,h=s&&s.inside,l=(p=a||h)&&m.read([p]);n={items:[],recursive:s&&!1!==s.recursive,inside:!!h,overlapping:!!a,rect:l,path:a&&new E.Rectangle({rectangle:l,insert:!1})},s&&(e=o.filter({},e,{recursive:!0,inside:!0,overlapping:!0}))}var u=t._children,c=n.items;i=(l=n.rect)&&(i||new y)
;for(var d=0,f=u&&u.length;d<f;d++){var _=u[d],g=i&&i.appended(_._matrix),v=!0;if(l){var p=_.getBounds(g);if(!l.intersects(p))continue;l.contains(p)||n.overlapping&&(p.contains(l)||n.path.intersects(_,g))||(v=!1)}if(v&&_.matches(e)&&(c.push(_),r))break;if(!1!==n.recursive&&ft(_,e,g,n,r),r&&c.length>0)break}return c}}},{importJSON:function(t){var e=o.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(e,t)},insertChild:function(t,e){
var i=e?this.insertChildren(t,[e]):null;return i&&i[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var i=this._children;if(i&&e&&e.length>0){for(var n={},r=(e=o.slice(e)).length-1;r>=0;r--){var s=(u=e[r])&&u._id;!u||n[s]?e.splice(r,1):(u._remove(!1,!0),n[s]=!0)}o.splice(i,e,t,0);for(var a=this._project,h=a._changes,l=(r=0,e.length);r<l;r++){var u,c=(u=e[r])._name;u._parent=this,u._setProject(a,!0),c&&u.setName(c),h&&u._changed(5)}
this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var i=t&&t._getOwner(),n=t!==this&&i?this:null;return n&&(n._remove(!1,!0),i._insertItem(t._index+e,n)),n},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(e,this):null},appendTop:"#addChild",
appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(e,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&1===e.length){var i=e[0].reduce(t);return this._parent?(i.insertAbove(this),this.remove()):i.remove(),i}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,i=t._namedChildren,n=this._name,r=i[n],s=r?r.indexOf(this):-1
;-1!==s&&(e[n]==this&&delete e[n],r.splice(s,1),r.length?e[n]=r[0]:delete i[n])}},_remove:function(t,e){var i=this._getOwner(),n=this._project,r=this._index;return!!i&&(this._name&&this._removeNamed(),null!=r&&(n._activeLayer===this&&(n._activeLayer=this.getNextSibling()||this.getPreviousSibling()),o.splice(i._children,null,r,1)),this._installEvents(!1),t&&n._changes&&this._changed(5),e&&i._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},
replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=o.pick(e,this._children.length);for(var i=o.splice(this._children,null,t,e-t),n=i.length-1;n>=0;n--)i[n]._remove(!0,!1);return i.length>0&&this._changed(11),i},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},
isEmpty:function(){var t=this._children;return!t||!t.length},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do{e.unshift(t)}while(t=t._parent);return e}
for(var i=e(this),n=e(t),r=0,s=Math.min(i.length,n.length);r<s;r++)if(i[r]!=n[r])return i[r]._index<n[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){
for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},o.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var i=(e?o:_).read(arguments),n=_.read(arguments,0,{readNull:!0})
;return this.transform((new y)[t](i,n||this.getPosition(!0)))}},{translate:function(){var t=new y;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,i,n){var r=this._matrix,s=t&&!t.isIdentity(),a=(e||this._applyMatrix)&&(!r.isIdentity()||s||e&&i&&this._children);if(!s&&!a)return this;if(s){!t.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(t,!0);var o=this._style,h=o.getFillColor(!0),l=o.getStrokeColor(!0);h&&h.transform(t),l&&l.transform(t)}
if(a&&(a=this._transformContent(r,i,n))){var u=this._pivot;u&&r._transformPoint(u,u,!0),r.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var c=this._bounds,d=this._position;(s||a)&&this._changed(9);var f=s&&c&&t.decompose();if(f&&f.skewing.isZero()&&f.rotation%90==0){for(var _ in c){var g=c[_];if(g.nonscaling)delete c[_];else if(a||!g.internal){var v=g.rect;t._transformBounds(v,v)}}this._bounds=c;var p=c[this._getBoundsCacheKey(this._boundsOptions||{})]
;p&&(this._position=p.rect.getCenter(!0))}else s&&d&&this._pivot&&(this._position=t._transformPoint(d,d));return this},_transformContent:function(t,e,i){var n=this._children;if(n){for(var r=0,s=n.length;r<s;r++)n[r].transform(t,!0,e,i);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(_.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(_.read(arguments))},parentToLocal:function(){
return this._matrix._inverseTransform(_.read(arguments))},localToParent:function(){return this._matrix._transformPoint(_.read(arguments))},fitBounds:function(t,e){t=m.read(arguments);var i=this.getBounds(),n=i.height/i.width,r=t.height/t.width,s=(e?n>r:n<r)?t.width/i.width:t.height/i.height,a=new m(new _,new v(i.width*s,i.height*s));a.setCenter(t.getCenter()),this.setBounds(a)}}),{_setStyles:function(t,e,i){var n=this._style,r=this._matrix
;if(n.hasFill()&&(t.fillStyle=n.getFillColor().toCanvasStyle(t,r)),n.hasStroke()){t.strokeStyle=n.getStrokeColor().toCanvasStyle(t,r),t.lineWidth=n.getStrokeWidth();var s=n.getStrokeJoin(),a=n.getStrokeCap(),o=n.getMiterLimit();if(s&&(t.lineJoin=s),a&&(t.lineCap=a),o&&(t.miterLimit=o),paper.support.nativeDash){var h=n.getDashArray(),l=n.getDashOffset();h&&h.length&&("setLineDash"in t?(t.setLineDash(h),t.lineDashOffset=l):(t.mozDash=h,t.mozDashOffset=l))}}if(n.hasShadow()){
var u=e.pixelRatio||1,c=i._shiftless().prepend((new y).scale(u,u)),d=c.transform(new _(n.getShadowBlur(),0)),f=c.transform(this.getShadowOffset());t.shadowColor=n.getShadowColor().toCanvasStyle(t),t.shadowBlur=d.getLength(),t.shadowOffsetX=f.x,t.shadowOffsetY=f.y}},draw:function(t,e,i){var n=this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var r=e.matrices,s=e.viewMatrix,a=this._matrix,o=r[r.length-1].appended(a);if(o.isInvertible()){s=s?s.appended(o):o,
r.push(o),e.updateMatrix&&(o._updateVersion=n,this._globalMatrix=o);var h,l,u,c=this._blendMode,d=this._opacity,f="normal"===c,_=nt.nativeModes[c],g=f&&1===d||e.dontStart||e.clip||(_||f&&d<1)&&this._canComposite(),v=e.pixelRatio||1;if(!g){var p=this.getStrokeBounds(s);if(!p.width||!p.height)return;u=e.offset,l=e.offset=p.getTopLeft().floor(),h=t,t=it.getContext(p.getSize().ceil().add(1).multiply(v)),1!==v&&t.scale(v,v)}t.save()
;var m=i?i.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&s,w=!g&&e.clipItem,y=!m||w;if(g?(t.globalAlpha=d,_&&(t.globalCompositeOperation=c)):y&&t.translate(-l.x,-l.y),y&&(g?a:s).applyToContext(t),w&&e.clipItem.draw(t,e.extend({clip:!0})),m){t.setTransform(v,0,0,v,0,0);var b=e.offset;b&&t.translate(-b.x,-b.y)}this._draw(t,e,s,m),t.restore(),r.pop(),e.clip&&!e.dontFinish&&t.clip(),g||(nt.process(c,t,h,d,l.subtract(u).multiply(v)),it.release(t),e.offset=u)}}},_isUpdated:function(t){
var e=this._parent;if(e instanceof D)return e._isUpdated(t);var i=this._updateVersion===t;return!i&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,i=!0),i},_drawSelection:function(t,e,i,n,r){var s=this._selection,a=1&s,o=2&s||a&&this._selectBounds,h=4&s;if(this._drawSelected||(a=!1),(a||o||h)&&this._isUpdated(r)){var l,u=this.getSelectedColor(!0)||(l=this.getLayer())&&l.getSelectedColor(!0),c=e.appended(this.getGlobalMatrix(!0)),d=i/2
;if(t.strokeStyle=t.fillStyle=u?u.toCanvasStyle(t):"#009dec",a&&this._drawSelected(t,c,n),h){var f=this.getPosition(!0),_=f.x,g=f.y;t.beginPath(),t.arc(_,g,d,0,2*Math.PI,!0),t.stroke();for(var v=[[0,-1],[1,0],[0,1],[-1,0]],p=d,m=i+1,w=0;w<4;w++){var y=v[w],b=y[0],x=y[1];t.moveTo(_+b*p,g+x*p),t.lineTo(_+b*m,g+x*m),t.stroke()}}if(o){var S=c._transformCorners(this.getInternalBounds());t.beginPath();for(w=0;w<8;w++)t[w?"lineTo":"moveTo"](S[w],S[++w]);t.closePath(),t.stroke()
;for(w=0;w<8;w++)t.fillRect(S[w]-d,S[++w]-d,i,i)}}},_canComposite:function(){return!1}},o.each(["down","drag","up","move"],function(t){this["removeOn"+o.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(t){for(var e in t)if(t[e]){var i="mouse"+e,n=this._project,r=n._removeSets=n._removeSets||{};r[i]=r[i]||{},r[i][this._id]=this}return this}})),C=S.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},
initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function _t(t){_t.base.call(this,t),1026&t&&(this._clipItem=e)},_getClipItem:function(){var t=this._clipItem;if(t===e){t=null;for(var i=this._children,n=0,r=i.length;n<r;n++)if(i[n]._clipMask){t=i[n];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},
_getBounds:function gt(t,e){var i=this._getClipItem();return i?i._getCachedBounds(t&&t.appended(i._matrix),o.set({},e,{stroke:!1})):gt.base.call(this,t,e)},_hitTestChildren:function vt(t,e,i){var n=this._getClipItem();return(!n||n.contains(t))&&vt.base.call(this,t,e,i,n)},_draw:function(t,e){var i=e.clip,n=!i&&this._getClipItem();e=e.extend({clipItem:n,clip:!1}),i?(t.beginPath(),e.dontStart=e.dontFinish=!0):n&&n.draw(t,e.extend({clip:!0}));for(var r=this._children,s=0,a=r.length;s<a;s++){
var o=r[s];o!==n&&o.draw(t,e)}}}),k=C.extend({_class:"Layer",initialize:function(){C.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function pt(){return this._parent?pt.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),z=S.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},
initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&o.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new p(t.width,t.height,this,"setSize")},setSize:function(){var t=v.read(arguments)
;if(this._size){if(!this._size.equals(t)){var e=this._type,i=t.width,n=t.height;"rectangle"===e?this._radius.set(v.min(this._radius,t.divide(2))):"circle"===e?(i=n=(i+n)/2,this._radius=i/2):"ellipse"===e&&this._radius._set(i/2,n/2),this._size._set(i,n),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new p(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return
;var i=2*t;this._radius=t,this._size._set(i,i)}else if(t=v.read(arguments),this._radius){if(this._radius.equals(t))return;if(this._radius.set(t),"rectangle"===e){i=v.max(this._size,t.multiply(2));this._size.set(i)}else"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var i=new(E[o.capitalize(this._type)])({center:new _,size:this._size,radius:this._radius,insert:!1});return i.copyAttributes(this),
paper.settings.applyMatrix&&i.setApplyMatrix(!0),(t===e||t)&&i.insertAbove(this),i},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,i,n){var r=this._style,s=r.hasFill(),a=r.hasStroke(),o=e.dontFinish||e.clip,h=!n;if(s||a||o){var l=this._type,u=this._radius,c="circle"===l;if(e.dontStart||t.beginPath(),h&&c)t.arc(0,0,u,0,2*Math.PI,!0);else{var d=c?u:u.width,f=c?u:u.height,_=this._size,g=_.width,v=_.height
;if(h&&"rectangle"===l&&0===d&&0===f)t.rect(-g/2,-v/2,g,v);else{var p=g/2,m=v/2,w=.44771525016920644,y=d*w,b=f*w,x=[-p,-m+f,-p,-m+b,-p+y,-m,-p+d,-m,p-d,-m,p-y,-m,p,-m+b,p,-m+f,p,m-f,p,m-b,p-y,m,p-d,m,-p+d,m,-p+y,m,-p,m-b,-p,m-f];n&&n.transform(x,x,32),t.moveTo(x[0],x[1]),t.bezierCurveTo(x[2],x[3],x[4],x[5],x[6],x[7]),p!==d&&t.lineTo(x[8],x[9]),t.bezierCurveTo(x[10],x[11],x[12],x[13],x[14],x[15]),m!==f&&t.lineTo(x[16],x[17]),t.bezierCurveTo(x[18],x[19],x[20],x[21],x[22],x[23]),
p!==d&&t.lineTo(x[24],x[25]),t.bezierCurveTo(x[26],x[27],x[28],x[29],x[30],x[31])}}t.closePath()}o||!s&&!a||(this._setStyles(t,e,i),s&&(t.fill(r.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),a&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var i=new m(this._size).setCenter(0,0),n=this._style,r=e.stroke&&n.hasStroke()&&n.getStrokeWidth();return t&&(i=t._transformBounds(i)),r?i.expand(E._getStrokePadding(r,this._getStrokeMatrix(t,e))):i}
},new function(){function t(t,e,i){var n=t._radius;if(!n.isZero())for(var r=t._size.divide(2),s=1;s<=4;s++){var a=new _(s>1&&s<4?-1:1,s>2?-1:1),o=a.multiply(r),h=o.subtract(a.multiply(n));if(new m(i?o.add(a.multiply(i)):o,h).contains(e))return{point:h,quadrant:s}}}function e(t,e,i,n){var r=t.divide(e);return(!n||r.isInQuadrant(n))&&r.subtract(r.normalize()).multiply(e).divide(i).length<=1}return{_contains:function i(e){if("rectangle"===this._type){var n=t(this,e)
;return n?e.subtract(n.point).divide(this._radius).getLength()<=1:i.base.call(this,e)}return e.divide(this.size).getLength()<=.5},_hitTestSelf:function n(i,r,s,a){var o=!1,h=this._style,l=r.stroke&&h.hasStroke(),u=r.fill&&h.hasFill();if(l||u){var c=this._type,d=this._radius,f=l?h.getStrokeWidth()/2:0,_=r._tolerancePadding.add(E._getStrokePadding(f,!h.getStrokeScaling()&&a));if("rectangle"===c){var g=_.multiply(2),v=t(this,i,g);if(v)o=e(i.subtract(v.point),d,_,v.quadrant);else{
var p=new m(this._size).setCenter(0,0),w=p.expand(g),y=p.expand(g.negate());o=w._containsPoint(i)&&!y._containsPoint(i)}}else o=e(i,d,_)}return o?new T(l?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,i,n,r){var s=new z(o.getNamed(r),e);return s._type=t,s._size=i,s._radius=n,s}return{Circle:function(){var e=_.readNamed(arguments,"center"),i=o.readNamed(arguments,"radius");return t("circle",e,new v(2*i),i,arguments)},Rectangle:function(){
var e=m.readNamed(arguments,"rectangle"),i=v.min(v.readNamed(arguments,"radius"),e.getSize(!0).divide(2));return t("rectangle",e.getCenter(!0),e.getSize(!0),i,arguments)},Ellipse:function(){var e=z._readEllipse(arguments),i=e.radius;return t("ellipse",e.center,i.multiply(2),i,arguments)},_readEllipse:function(t){var e,i;if(o.hasNamed(t,"radius"))e=_.readNamed(t,"center"),i=v.readNamed(t,"radius");else{var n=m.readNamed(t,"rectangle");e=n.getCenter(!0),i=n.getSize(!0).divide(2)}return{center:e,
radius:i}}}}}),P=S.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],initialize:function(t,i){if(!this._initialize(t,i!==e&&_.read(arguments,1))){var n="string"==typeof t?a.getElementById(t):t;n?this.setImage(n):this.setSource(t)}this._size||(this._size=new v,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){
var e=t._image,i=t._canvas;if(e)this._setImage(e);else if(i){var n=it.getCanvas(t._size);n.getContext("2d").drawImage(i,0,0),this._setImage(n)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new p(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(){var t=v.read(arguments);if(!t.equals(this._size))if(t.width>0&&t.height>0){var e=this.getElement();this._setImage(it.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)
}else this._canvas&&it.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){
var t=this._matrix,e=new _(0,0).transform(t),i=new _(1,0).transform(t).subtract(e),n=new _(0,1).transform(t).subtract(e);return new v(72/i.getLength(),72/n.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){function e(t){var e=i.getView(),n=t&&t.type||"load";e&&i.responds(n)&&(paper=e._scope,i.emit(n,new $(t)))}var i=this;this._setImage(t),this._loaded?setTimeout(e,0):t&&W.add(t,{load:function(n){i._setImage(t),e(n)},error:e})},
_setImage:function(t){this._canvas&&it.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new v(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(521)},getCanvas:function(){if(!this._canvas){var t=it.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){it.release(t)}}return this._canvas},
setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(513)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(e){var i=new t.Image,n=this._crossOrigin;n&&(i.crossOrigin=n),i.src=e,this.setImage(i)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},
setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=m.read(arguments),e=it.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=m.read(arguments),e=new P(S.NO_INSERT);return e._setImage(this.getSubCanvas(t)),
e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var i=this.getCanvas();return i?i.toDataURL.apply(i,arguments):null},drawImage:function(t){var e=_.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,i;if(t?t instanceof B?(i=t,
e=t.getBounds()):"object"==typeof t&&("width"in t?e=new m(t):"x"in t&&(e=new m(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var n=32,r=Math.min(e.width,n),s=Math.min(e.height,n),a=P._sampleContext;a?a.clearRect(0,0,n+1,n+1):a=P._sampleContext=it.getContext(new v(n)),a.save();var h=(new y).scale(r/e.width,s/e.height).translate(-e.x,-e.y);h.applyToContext(a),i&&i.draw(a,new o({clip:!0,matrices:[h]})),this._matrix.applyToContext(a);var l=this.getElement(),u=this._size
;l&&a.drawImage(l,-u.width/2,-u.height/2),a.restore();for(var c=a.getImageData(.5,.5,Math.ceil(r),Math.ceil(s)).data,d=[0,0,0],f=0,_=0,g=c.length;_<g;_+=4){var p=c[_+3];f+=p,p/=255,d[0]+=c[_]*p,d[1]+=c[_+1]*p,d[2]+=c[_+2]*p}for(_=0;_<3;_++)d[_]/=f;return f?V.read(d):null},getPixel:function(){var t=_.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new V("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){
var t=_.read(arguments),e=V.read(arguments),i=e._convert("rgb"),n=e._alpha,r=this.getContext(!0),s=r.createImageData(1,1),a=s.data;a[0]=255*i[0],a[1]=255*i[1],a[2]=255*i[2],a[3]=null!=n?255*n:255,r.putImageData(s,t.x,t.y)},createImageData:function(){var t=v.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=m.read(arguments);return t.isEmpty()&&(t=new m(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},
setImageData:function(t){var e=_.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t){var e=new m(this._size).setCenter(0,0);return t?t._transformBounds(e):e},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new T("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t){var e=this.getElement();e&&(t.globalAlpha=this._opacity,
t.drawImage(e,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),I=S.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,i){this._initialize(t,i!==e&&_.read(arguments,1))||this.setDefinition(t instanceof M?t:new M(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){
return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var i=this._definition._item;return i._getCachedBounds(i._matrix.prepended(t),e)},_hitTestSelf:function(t,e,i){var n=this._definition._item._hitTest(t,e,i);return n&&(n.item=this),n},_draw:function(t,e){this._definition._item.draw(t,e)}}),M=o.extend({
_class:"SymbolDefinition",initialize:function(t,e){this._id=f.get(),this.project=paper.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,function(){return o.serialize([this._class,this._item],t,!1,e)})},_changed:function(t){8&t&&S._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new _),
t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new I(this,t)},clone:function(){return new M(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),T=o.extend({_class:"HitResult",initialize:function(t,e,i){this.type=t,this.item=e,i&&this.inject(i)},statics:{getOptions:function(t){var e=t&&o.read(t);return o.set({type:null,tolerance:paper.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,
handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),A=o.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,i,n,r,s,a){var o,h,l,u,c=arguments.length;c>0&&(null==t||"object"==typeof t?1===c&&t&&"point"in t?(o=t.point,h=t.handleIn,l=t.handleOut,u=t.selection):(o=t,h=i,l=n,u=r):(o=[t,i],h=n!==e?[n,r]:null,l=s!==e?[s,a]:null)),new O(o,this,"_point"),new O(h,this,"_handleIn"),new O(l,this,"_handleOut"),u&&this.setSelection(u)},_serialize:function(t,e){
var i=this._point,n=this._selection,r=n||this.hasHandles()?[i,this._handleIn,this._handleOut]:i;return n&&r.push(n),o.serialize(r,t,!0,e)},_changed:function(t){var e=this._path;if(e){var i,n=e._curves,r=this._index;n&&(t&&t!==this._point&&t!==this._handleIn||!(i=r>0?n[r-1]:e._closed?n[n.length-1]:null)||i._changed(),t&&t!==this._point&&t!==this._handleOut||!(i=n[r])||i._changed()),e._changed(25)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(_.read(arguments))},
getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(_.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(_.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},
getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,i=this._path;this._selection=t=t||0,i&&t!==e&&(i._updateSelection(this,e,t),i._changed(129))},_changeSelection:function(t,e){var i=this._selection;this.setSelection(e?i|t:i&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==e?this._index:null},getPath:function(){return this._path||null},
getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new N(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,i,n){
var r=t||{},s=r.type,a=r.factor,o=this.getPrevious(),h=this.getNext(),l=(o||this)._point,u=this._point,c=(h||this)._point,d=l.getDistance(u),f=u.getDistance(c);if(s&&"catmull-rom"!==s){if("geometric"!==s)throw new Error("Smoothing method '"+s+"' not supported.");if(o&&h){var g=l.subtract(c),v=a===e?.4:a,p=v*d/(d+f);i||this.setHandleIn(g.multiply(p)),n||this.setHandleOut(g.multiply(p-v))}}else{var m=a===e?.5:a,w=Math.pow(d,m),y=w*w,b=Math.pow(f,m),x=b*b;if(!i&&o){var S=2*x+3*b*w+y,C=3*b*(b+w)
;this.setHandleIn(0!==C?new _((x*l._x+S*u._x-y*c._x)/C-u._x,(x*l._y+S*u._y-y*c._y)/C-u._y):new _)}if(!n&&h){S=2*y+3*w*b+x,C=3*w*(w+b);this.setHandleOut(0!==C?new _((y*c._x+S*u._x-x*l._x)/C-u._x,(y*c._y+S*u._y-x*l._y)/C-u._y):new _)}}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},
reverse:function(){var t=this._handleIn,e=this._handleOut,i=t.clone();t.set(e),e.set(i)},reversed:function(){return new A(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new A(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},
toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,i){var n=1-i,r=i,s=t._point,a=e._point,o=t._handleIn,h=e._handleIn,l=e._handleOut,u=t._handleOut;this._point._set(n*s._x+r*a._x,n*s._y+r*a._y,!0),
this._handleIn._set(n*o._x+r*h._x,n*o._y+r*h._y,!0),this._handleOut._set(n*u._x+r*l._x,n*u._y+r*l._y,!0),this._changed()},_transformCoordinates:function(t,e,i){var n=this._point,r=i&&this._handleIn.isZero()?null:this._handleIn,s=i&&this._handleOut.isZero()?null:this._handleOut,a=n._x,o=n._y,h=2;return e[0]=a,e[1]=o,r&&(e[h++]=r._x+a,e[h++]=r._y+o),s&&(e[h++]=s._x+a,e[h++]=s._y+o),t&&(t._transformCoordinates(e,e,h/2),a=e[0],o=e[1],i?(n._x=a,n._y=o,h=2,r&&(r._x=e[h++]-a,r._y=e[h++]-o),
s&&(s._x=e[h++]-a,s._y=e[h++]-o)):(r||(e[h++]=a,e[h++]=o),s||(e[h++]=a,e[h++]=o))),e}}),O=_.extend({initialize:function(t,i,n){var r,s,a;t?(r=t[0])!==e?s=t[1]:(r=t.x,s=t.y,a=t.selected):r=s=0,this._x=r,this._y=s,this._owner=i,i[n]=this,a&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,
this._owner._changed(this)},isZero:function(){var t=d.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),L=o.extend({_class:"Curve",beans:!0,initialize:function(t,e,i,n,r,s,a,o){var h,l,u,c,d,f,_=arguments.length;3===_?(this._path=t,h=e,
l=i):_?1===_?"segment1"in t?(h=new A(t.segment1),l=new A(t.segment2)):"point1"in t?(u=t.point1,d=t.handle1,f=t.handle2,c=t.point2):Array.isArray(t)&&(u=[t[0],t[1]],c=[t[6],t[7]],d=[t[2]-t[0],t[3]-t[1]],f=[t[4]-t[6],t[5]-t[7]]):2===_?(h=new A(t),l=new A(e)):4===_?(u=t,d=e,f=i,c=n):8===_&&(u=[t,e],c=[a,o],d=[i-t,n-e],f=[r-a,s-o]):(h=new A,l=new A),this._segment1=h||new A(u,null,d),this._segment2=l||new A(c,f,null)},_serialize:function(t,e){
return o.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=e},clone:function(){return new L(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),
t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return L.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,i=e._handleOut;(t=e.remove())&&this._segment1._handleOut.set(i)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(_.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(_.read(arguments))},
getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(_.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(_.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves
;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){
return this.getPoint1().isSelected()&&this.getHandle2().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return L.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],i=0;i<8;i+=2)e.push(new _(t[i],t[i+1]));return e}},{getLength:function(){
return null==this._length&&(this._length=L.getLength(this.getValues(),0,1)),this._length},getArea:function(){return L.getArea(this.getValues())},getLine:function(){return new b(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new L(L.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return L.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var i=1e-8,n=null
;if(t>=i&&t<=1-i){var r=L.subdivide(this.getValues(),t),s=r[0],a=r[1],o=e||this.hasHandles(),h=this._segment1,l=this._segment2,u=this._path;o&&(h._handleOut._set(s[2]-s[0],s[3]-s[1]),l._handleIn._set(a[4]-a[6],a[5]-a[7]));var c=s[6],d=s[7],f=new A(new _(c,d),o&&new _(s[4]-c,s[5]-d),o&&new _(a[2]-c,a[3]-d));u?(u.insert(h._index+1,f),n=this.getNext()):(this._segment2=f,this._changed(),n=new L(f,l))}return n},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){
return this.splitAt(this.getLocationAtTime(t))},divide:function(t,i){return this.divideAtTime(t===e?.5:i?t:this.getTimeAt(t))},split:function(t,i){return this.splitAtTime(t===e?.5:i?t:this.getTimeAt(t))},reversed:function(){return new L(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,i,n){
var r=t._point,s=t._handleOut,a=e._handleIn,o=e._point,h=r.x,l=r.y,u=o.x,c=o.y,d=n?[h,l,h,l,u,c,u,c]:[h,l,h+s._x,l+s._y,u+a._x,c+a._y,u,c];return i&&i._transformCoordinates(d,d,4),d},subdivide:function(t,i){var n=t[0],r=t[1],s=t[2],a=t[3],o=t[4],h=t[5],l=t[6],u=t[7];i===e&&(i=.5);var c=1-i,d=c*n+i*s,f=c*r+i*a,_=c*s+i*o,g=c*a+i*h,v=c*o+i*l,p=c*h+i*u,m=c*d+i*_,w=c*f+i*g,y=c*_+i*v,b=c*g+i*p,x=c*m+i*y,S=c*w+i*b;return[[n,r,d,f,m,w,x,S],[x,S,y,b,v,p,l,u]]},getMonoCurves:function(t,e){
var i=[],n=e?0:1,r=t[n+0],s=t[n+2],a=t[n+4],o=t[n+6];if(r>=s==s>=a&&s>=a==a>=o||L.isStraight(t))i.push(t);else{var h=3*(s-a)-r+o,l=2*(r+a)-4*s,u=s-r,c=1e-8,f=1-c,_=[],g=d.solveQuadratic(h,l,u,_,c,f);if(g){_.sort();var v=_[0],p=L.subdivide(t,v);i.push(p[0]),g>1&&(v=(_[1]-v)/(1-v),p=L.subdivide(p[1],v),i.push(p[0])),i.push(p[1])}else i.push(t)}return i},solveCubic:function(t,e,i,n,r,s){var a=t[e],o=t[e+2],h=t[e+4],l=t[e+6],u=0;if(!(a<i&&l<i&&o<i&&h<i||a>i&&l>i&&o>i&&h>i)){
var c=3*(o-a),f=3*(h-o)-c,_=l-a-c-f;u=d.solveCubic(_,f,c,a-i,n,r,s)}return u},getTimeOf:function(t,e){var i=new _(t[0],t[1]),n=new _(t[6],t[7]),r=1e-12,s=1e-7;if(e.x<Math.min(t[0],t[2],t[4],t[6])-s||e.x>Math.max(t[0],t[2],t[4],t[6])+s||e.y<Math.min(t[1],t[3],t[5],t[7])-s||e.y>Math.max(t[1],t[3],t[5],t[7])+s)return null;var a=e.isClose(i,r)?0:e.isClose(n,r)?1:null;if(null===a){for(var o=[e.x,e.y],h=[],l=s,u=0;u<2;u++)for(var c=L.solveCubic(t,u,o[u],h,0,1),d=0;d<c;d++){
var f=h[d],g=e.getDistance(L.getPoint(t,f));g<l&&(a=f,l=g)}if(null!==a)return a}return e.isClose(i,s)?0:e.isClose(n,s)?1:null},getNearestTime:function(t,e){function i(i){if(i>=0&&i<=1){var n=e.getDistance(L.getPoint(t,i),!0);if(n<u)return u=n,c=i,!0}}if(L.isStraight(t)){var n=t[0],r=t[1],s=t[6]-n,a=t[7]-r,o=s*s+a*a;if(0===o)return 0;var h=((e.x-n)*s+(e.y-r)*a)/o;return h<1e-12?0:h>.999999999999?1:L.getTimeOf(t,new _(n+h*s,r+h*a))}for(var l=100,u=Infinity,c=0,d=0;d<=l;d++)i(d/l)
;for(var f=1/(2*l);f>1e-8;)i(c-f)||i(c+f)||(f/=2);return c},getPart:function(t,e,i){var n=e>i;if(n){var r=e;e=i,i=r}return e>0&&(t=L.subdivide(t,e)[1]),i<1&&(t=L.subdivide(t,(i-e)/(1-e))[0]),n?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var i=t[0],n=t[1],r=t[2],s=t[3],a=t[4],o=t[5],h=t[6],l=t[7],u=3*r-2*i-h,c=3*s-2*n-l,d=3*a-2*h-i,f=3*o-2*l-n;return Math.max(u*u,d*d)+Math.max(c*c,f*f)<=16*e*e},getArea:function(t){
var e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=t[6],h=t[7];return 3*((h-i)*(n+s)-(o-e)*(r+a)+r*(e-s)-n*(i-a)+h*(s+e/3)-o*(a+i/3))/20},getBounds:function(t){for(var e=t.slice(0,2),i=e.slice(),n=[0,0],r=0;r<2;r++)L._addBounds(t[r],t[r+2],t[r+4],t[r+6],r,0,e,i,n);return new m(e[0],e[1],i[0]-e[0],i[1]-e[1])},_addBounds:function(t,e,i,n,r,s,a,o,h){function l(t,e){var i=t-e,n=t+e;i<a[r]&&(a[r]=i),n>o[r]&&(o[r]=n)}s/=2;var u=a[r]-s,c=o[r]+s
;if(t<u||e<u||i<u||n<u||t>c||e>c||i>c||n>c)if(e<t!=e<n&&i<t!=i<n)l(t,s),l(n,s);else{var f=3*(e-i)-t+n,_=2*(t+i)-4*e,g=e-t,v=d.solveQuadratic(f,_,g,h),p=1e-8,m=1-p;l(n,0);for(var w=0;w<v;w++){var y=h[w],b=1-y;p<y&&y<m&&l(b*b*b*t+3*b*b*y*e+3*b*y*y*i+y*y*y*n,s)}}}}},o.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=E[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}
},{}),o.each({isStraight:function(t,e,i){if(e.isZero()&&i.isZero())return!0;var n=t.getVector(),r=1e-7;if(n.isZero())return!1;if(b.getDistance(0,0,n.x,n.y,e.x,e.y,!0)<r&&b.getDistance(0,0,n.x,n.y,i.x,i.y,!0)<r){var s=n.dot(n),a=n.dot(e)/s,o=n.dot(i)/s;return a>=0&&a<=1&&o<=0&&o>=-1}return!1},isLinear:function(t,e,i){var n=t.getVector().divide(3);return e.equals(n)&&i.negate().equals(n)}},function(t,e){this[e]=function(){var e=this._segment1,i=this._segment2
;return t(new b(e._point,i._point),e._handleOut,i._handleIn)},this.statics[e]=function(e){var i=e[0],n=e[1],r=e[6],s=e[7];return t(new b(i,n,r,s),new _(e[2]-i,e[3]-n),new _(e[4]-r,e[5]-s))}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){
return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new N(this,t):null},getTimeAt:function(t,e){
return L.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(_.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return L.getTimeOf(this.getValues(),_.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){
var t=_.read(arguments),e=this.getValues(),i=L.getNearestTime(e,t),n=L.getPoint(e,i);return new N(this,i,n,null,t.getDistance(n))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return o.each(t,function(t){this[t+"At"]=function(e,i){var n=this.getValues();return L[t](n,i?e:L.getTimeAt(n,e))},this[t+"AtTime"]=function(e){
return L[t](this.getValues(),e)}},{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=t[6],h=t[7],l=9*(n-s)+3*(o-e),u=6*(e+s)-12*n,c=3*(n-e),d=9*(r-a)+3*(h-i),f=6*(i+a)-12*r,_=3*(r-i);return function(t){var e=(l*t+u)*t+c,i=(d*t+f)*t+_;return Math.sqrt(e*e+i*i)}}function i(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function n(t,e,i,n){if(null==e||e<0||e>1)return null
;var r=t[0],s=t[1],a=t[2],o=t[3],h=t[4],l=t[5],u=t[6],c=t[7],f=d.isZero;f(a-r)&&f(o-s)&&(a=r,o=s),f(h-u)&&f(l-c)&&(h=u,l=c);var g,v,p=3*(a-r),m=3*(h-a)-p,w=u-r-p-m,y=3*(o-s),b=3*(l-o)-y,x=c-s-y-b;if(0===i)g=0===e?r:1===e?u:((w*e+m)*e+p)*e+r,v=0===e?s:1===e?c:((x*e+b)*e+y)*e+s;else{var S=1e-8,C=1-S;if(e<S?(g=p,v=y):e>C?(g=3*(u-h),v=3*(c-l)):(g=(3*w*e+2*m)*e+p,v=(3*x*e+2*b)*e+y),n){0===g&&0===v&&(e<S||e>C)&&(g=h-a,v=l-o);var k=Math.sqrt(g*g+v*v);k&&(g/=k,v/=k)}if(3===i){h=6*w*e+2*m,l=6*x*e+2*b
;var z=Math.pow(g*g+v*v,1.5);g=0!==z?(g*l-v*h)/z:0,v=0}}return 2===i?new _(v,-g):new _(g,v)}return{statics:{classify:function(t){function i(t,i,n){var r=i!==e,s=r&&i>0&&i<1,a=r&&n>0&&n<1;return!r||(s||a)&&("loop"!==t||s&&a)||(t="arch",s=a=!1),{type:t,roots:s||a?s&&a?i<n?[i,n]:[n,i]:[s?i:n]:null}}
var n=t[0],r=t[1],s=t[2],a=t[3],o=t[4],h=t[5],l=t[6],u=t[7],c=s*(r-u)+a*(l-n)+n*u-r*l,f=3*(o*(a-r)+h*(n-s)+s*r-a*n),_=f-c,g=_-c+(n*(u-h)+r*(o-l)+l*h-u*o),v=Math.sqrt(g*g+_*_+f*f),p=0!==v?1/v:0,m=d.isZero,w="serpentine";if(_*=p,f*=p,m(g*=p))return m(_)?i(m(f)?"line":"quadratic"):i(w,f/(3*_));var y=3*_*_-4*g*f;if(m(y))return i("cusp",_/(2*g));var b=y>0?Math.sqrt(y/3):Math.sqrt(-y),x=2*g;return i(y>0?w:"loop",(_+b)/x,(_-b)/x)},getLength:function(n,r,s,a){if(r===e&&(r=0),s===e&&(s=1),
L.isStraight(n)){var o=n;s<1&&(o=L.subdivide(o,s)[0],r/=s),r>0&&(o=L.subdivide(o,r)[1]);var h=o[6]-o[0],l=o[7]-o[1];return Math.sqrt(h*h+l*l)}return d.integrate(a||t(n),r,s,i(r,s))},getTimeAt:function(n,r,s){function a(t){return p+=d.integrate(f,s,t,i(s,t)),s=t,p-r}if(s===e&&(s=r<0?1:0),0===r)return s;var o=Math.abs,h=1e-12,l=r>0,u=l?s:0,c=l?1:s,f=t(n),_=L.getLength(n,u,c,f),g=o(r)-_;if(o(g)<h)return l?c:u;if(g>h)return null;var v=r/_,p=0;return d.findRoot(a,f,s+v,u,c,32,1e-12)},
getPoint:function(t,e){return n(t,e,0,!1)},getTangent:function(t,e){return n(t,e,1,!0)},getWeightedTangent:function(t,e){return n(t,e,1,!1)},getNormal:function(t,e){return n(t,e,2,!0)},getWeightedNormal:function(t,e){return n(t,e,2,!1)},getCurvature:function(t,e){return n(t,e,3,!1).x},getPeaks:function(t){var e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=3*n-e-3*s+t[6],h=3*e-6*n+3*s,l=-3*e+3*n,u=3*r-i-3*a+t[7],c=3*i-6*r+3*a,f=-3*i+3*r,_=1e-8,g=1-_,v=[]
;return d.solveCubic(9*(o*o+u*u),9*(o*h+c*u),2*(h*h+c*c)+3*(l*o+f*u),l*h+c*f,v,_,g),v.sort()}}}},new function(){function t(t,e,i,n,r,s,a,o,h){var l=!h&&i.getPrevious()===s,u=!h&&i!==s&&i.getNext()===s,c=1e-8,d=1-c;if(null==n&&(n=i.getTimeOf(r)),null!==n&&n>=(l?c:0)&&n<=(u?d:1)&&(null==a&&(a=s.getTimeOf(o)),null!==a&&a>=(u?c:0)&&a<=(l?d:1))){var f=new N(i,n,r||i.getPointAtTime(n),h),_=new N(s,a,o||s.getPointAtTime(a),h),g=f.getPath()===_.getPath()&&f.getIndex()>_.getIndex()?_:f;f._intersection=_,
_._intersection=f,e&&!e(g)||N.insert(t,g,!0)}}function e(r,s,a,l,u,c,f,_,g,v,p,m,w){var y=++p>=48||++m>4096,x=y||L.isStraight(r),S=y||L.isStraight(s);if(x||S)return x&&S?h(w?s:r,w?r:s,w?l:a,w?a:l,g,v,p):o(w?s:r,w?r:s,w?l:a,w?a:l,g,v,p),m;1==p&&(r[0]===s[6]&&r[1]===s[7]?(u=d.CURVETIME_EPSILON,r=L.subdivide(r,u)[1]):r[6]===s[0]&&r[7]===s[1]&&(c=1-d.CURVETIME_EPSILON,r=L.subdivide(r,c)[0]));for(var C=0;C<2;C++){var k=Math.min(r[C],r[C+2],r[C+4],r[C+6])-d.EPSILON
;if(k>s[C]&&k>s[C+2]&&k>s[C+4]&&k>s[C+6])return m;var z=Math.max(r[C],r[C+2],r[C+4],r[C+6])+d.EPSILON;if(z<s[C]&&z<s[C+2]&&z<s[C+4]&&z<s[C+6])return m}var P,I,M=1e-9,T=s[0],A=s[1],O=s[6],N=s[7],B=b.getSignedDistance,E=B(T,A,O,N,s[2],s[3]),D=B(T,A,O,N,s[4],s[5]),R=E*D>0?.8:4/9,F=R*Math.min(0,E,D),j=R*Math.max(0,E,D),q=B(T,A,O,N,r[0],r[1]),V=B(T,A,O,N,r[2],r[3]),Z=B(T,A,O,N,r[4],r[5]),H=B(T,A,O,N,r[6],r[7]),U=i(q,V,Z,H),G=U[0],W=U[1]
;if(0===E&&0===D&&0===q&&0===V&&0===Z&&0===H||null==(P=n(G,W,F,j))||null==(I=n(G.reverse(),W.reverse(),F,j)))return m;var J=u+(c-u)*(P=Math.max(0,P)),K=c-(c-u)*(1-(I=Math.min(1,I)));if(Math.max(_-f,K-J)<M){var $=(J+K)/2,Y=(f+_)/2;t(g,v,w?l:a,w?Y:$,null,w?a:l,w?$:Y,null)}else if(r=L.getPart(r,P,I),I-P>.8)if(K-J>_-f){$=(J+K)/2;m=e(s,(X=L.subdivide(r,.5))[0],l,a,f,_,J,$,g,v,p,m,!w),m=e(s,X[1],l,a,f,_,$,K,g,v,p,m,!w)}else{var X;Y=(f+_)/2;m=e((X=L.subdivide(s,.5))[0],r,l,a,f,Y,J,K,g,v,p,m,!w),
m=e(X[1],r,l,a,Y,_,J,K,g,v,p,m,!w)}else m=_-f>=M?e(s,r,l,a,f,_,J,K,g,v,p,m,!w):e(r,s,a,l,J,K,f,_,g,v,p,m,w);return m}function i(t,e,i,n){var r,s=[0,t],a=[1/3,e],o=[2/3,i],h=[1,n],l=e-(2*t+n)/3,u=i-(t+2*n)/3;if(l*u<=0)r=[[s,a,h],[s,o,h]];else{var c=l/u;r=[c>=2?[s,a,h]:c<=.5?[s,o,h]:[s,a,o,h],[s,h]]}return(l||u)<0?r.reverse():r}function n(t,e,i,n){return t[0][1]<=i?s(t,!0,i):e[0][1]>=n?s(e,!1,n):t[0][0]}function s(t,e,i){for(var n=t[0][0],r=t[0][1],s=1,a=t.length;s<a;s++){var o=t[s][0],h=t[s][1]
;if(e?h>i:h<i)return h===i?o:n+(i-r)/(h-r)*(o-n);n=o,r=h}return null}function a(t,e,i,n,r){var s=d.isZero;if(s(n)&&s(r)){var a=L.getTimeOf(t,new _(e,i));return null===a?[]:[a]}for(var o=Math.atan2(-r,n),h=Math.sin(o),l=Math.cos(o),u=[],c=[],f=0;f<8;f+=2){var g=t[f]-e,v=t[f+1]-i;u.push(g*l-v*h,g*h+v*l)}return L.solveCubic(u,1,0,c,0,1),c}function o(e,i,n,r,s,o,h){for(var l=L.isStraight(e),u=l?i:e,c=l?e:i,d=c[0],f=c[1],_=a(u,d,f,c[6]-d,c[7]-f),g=0,v=_.length;g<v;g++){
var p=_[g],m=L.getPoint(u,p),w=L.getTimeOf(c,m);if(null!==w){var y=L.getPoint(c,w);t(s,o,n,h?null:l?w:p,l?y:m,r,h?null:l?p:w,l?m:y)}}}function h(e,i,n,r,s,a){var o=b.intersect(e[0],e[1],e[6],e[7],i[0],i[1],i[6],i[7]);o&&t(s,a,n,null,o,r,null,o)}function l(i,n,r,s,a,o){function h(t,e){return new _(t[e],t[e+1])}var l=1e-12,u=Math.min,c=Math.max
;if(c(i[0],i[2],i[4],i[6])+l>u(n[0],n[2],n[4],n[6])&&u(i[0],i[2],i[4],i[6])-l<c(n[0],n[2],n[4],n[6])&&c(i[1],i[3],i[5],i[7])+l>u(n[1],n[3],n[5],n[7])&&u(i[1],i[3],i[5],i[7])-l<c(n[1],n[3],n[5],n[7])){var d=f(i,n);if(d)for(var g=0;g<2;g++){var v=d[g];t(a,o,r,v[0],null,s,v[1],null,!0)}else{e(i,n,r,s,0,1,0,1,a,o,0,0,0);for(g=0;g<4;g++){var p=g>>1,m=1&g,w=h(i,6*p),y=h(n,6*m);w.isClose(y,l)&&t(a,o,r,p,w,s,m,y)}}}return a}function u(e,i,n,r){var s=L.classify(e);if("loop"===s.type){var a=s.roots
;t(n,r,i,a[0],null,i,a[1],null)}return n}function c(t,e,i,n,s,a){var o=!e,h=d.GEOMETRIC_EPSILON,c=Math.min,f=Math.max;o&&(e=t);for(var _,g=t.length,v=e.length,p=new Array(g),m=new Array(v),w=[],y=new Array(g),b=0;b<g;b++){var x=t[b].getValues(n);p[b]=x,y[b]=[c(x[0],x[2],x[4],x[6]),c(x[1],x[3],x[5],x[7]),f(x[0],x[2],x[4],x[6]),f(x[1],x[3],x[5],x[7])]}if(o)m=p;else{_=new Array(v);for(b=0;b<v;b++){x=e[b].getValues(s);m[b]=x,
_[b]=[c(x[0],x[2],x[4],x[6]),c(x[1],x[3],x[5],x[7]),f(x[0],x[2],x[4],x[6]),f(x[1],x[3],x[5],x[7])]}}var S=r(y,o?null:_,h);for(b=0;b<g;b++){var C=t[b],k=p[b];o&&u(k,C,w,i);var z=S[b];if(z)for(var P=0;P<z.length;P++){if(a&&w.length)return w;var I=z[P];if(!o||I<b){var M=e[I];l(k,m[I],C,M,w,i)}}}return w}function f(t,e){function i(t){var e=t[6]-t[0],i=t[7]-t[1];return e*e+i*i}
var n=Math.abs,r=b.getDistance,s=1e-8,a=1e-7,o=L.isStraight(t),h=L.isStraight(e),l=o&&h,u=i(t)<i(e),c=u?e:t,d=u?t:e,f=c[0],g=c[1],v=c[6]-f,p=c[7]-g;if(r(f,g,v,p,d[0],d[1],!0)<a&&r(f,g,v,p,d[6],d[7],!0)<a)!l&&r(f,g,v,p,c[2],c[3],!0)<a&&r(f,g,v,p,c[4],c[5],!0)<a&&r(f,g,v,p,d[2],d[3],!0)<a&&r(f,g,v,p,d[4],d[5],!0)<a&&(o=h=l=!0);else if(l)return null;if(o^h)return null;for(var m=[t,e],w=[],y=0;y<4&&w.length<2;y++){var x=1&y,S=1^x,C=y>>1,k=L.getTimeOf(m[x],new _(m[S][C?6:0],m[S][C?7:1]));if(null!=k){
var z=x?[C,k]:[k,C];(!w.length||n(z[0]-w[0][0])>s&&n(z[1]-w[0][1])>s)&&w.push(z)}if(y>2&&!w.length)break}if(2!==w.length)w=null;else if(!l){var P=L.getPart(t,w[0][0],w[1][0]),I=L.getPart(e,w[0][1],w[1][1]);L.getPoint(P,.5).isClose(L.getPoint(I,.5),a)&&L.getPoint(P,.25).isClose(L.getPoint(I,.25),a)&&L.getPoint(P,.75).isClose(L.getPoint(I,.75),a)||(w=null)}return w}return{getIntersections:function(t){var e=this.getValues(),i=t&&t!==this&&t.getValues();return i?l(e,i,this,t,[]):u(e,this,[])},
statics:{getOverlaps:f,getIntersections:c,getCurveLineIntersections:a}}}),N=o.extend({_class:"CurveLocation",initialize:function(t,e,i,n,r){if(e>=.99999999){var s=t.getNext();s&&(e=0,t=s)}this._setCurve(t),this._time=e,this._point=i||t.getPointAtTime(e),this._overlap=n,this._distance=r,this._intersection=this._next=this._previous=null},_setCurve:function(t){var e=t._path;this._path=e,this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,
this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),i=this.getTime();0===i?t=e._segment1:1===i?t=e._segment2:null!=i&&(t=e.getPartLength(0,i)<e.getPartLength(i,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){function t(t){var e=t&&t.getCurve()
;if(e&&null!=(i._time=e.getTimeOf(i._point)))return i._setCurve(e),e}var e=this._path,i=this;return e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||t(this._segment)||t(this._segment1)||t(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time
;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),i=this.getIndex();if(e&&null!=i)for(var n=e.getCurves(),r=0;r<i;r++)t+=n[r].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var e=this.getCurve(),i=this.getTime();this._curveOffset=t=null!=i&&e&&e.getPartLength(0,i)}return t},
getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,i=t&&t.splitAtTime(this.getTime());return i&&this._setSegment(e.getLastSegment()),i},equals:function(t,e){var i=this===t;if(!i&&t instanceof N){var n=this.getCurve(),r=t.getCurve(),s=n._path;if(s===r._path){
var a=Math.abs,o=1e-7,h=a(this.getOffset()-t.getOffset()),l=!e&&this._intersection,u=!e&&t._intersection;i=(h<o||s&&a(s.getLength()-h)<o)&&(!l&&!u||l&&u&&l.equals(u,!0))}}return i},toString:function(){var t=[],e=this.getPoint(),i=c.instance;e&&t.push("point: "+e);var n=this.getIndex();null!=n&&t.push("index: "+n);var r=this.getTime();return null!=r&&t.push("time: "+i.number(r)),null!=this._distance&&t.push("distance: "+i.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){
var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),i=t.getCurve();return!(e.isStraight()&&i.isStraight()&&e.getLine().intersect(i.getLine()))}return!1},isCrossing:function(){function t(t,e,i){return e<i?t>e&&t<i:t>e||t<i}var e=this._intersection;if(!e)return!1;var i=this.getTime(),n=e.getTime(),r=1e-8,s=1-r,a=i>r&&i<s,o=n>r&&n<s;if(a&&o)return!this.isTouching();var h=this.getCurve(),l=i<=r?h.getPrevious():h,u=e.getCurve(),c=n<=r?u.getPrevious():u
;if(i>=s&&(h=h.getNext()),n>=s&&(u=u.getNext()),!(l&&h&&c&&u))return!1
;var d=this.getPoint(),f=.5*Math.min(l.point1.getDistance(a?l.getPointAtTime(i):l.point2),h.point2.getDistance(a?h.getPointAtTime(i):h.point1),c.point1.getDistance(o?c.getPointAtTime(n):c.point2),u.point2.getDistance(o?u.getPointAtTime(n):u.point1)),_=Math.min(a?l.getPartLength(i,1)+f:Math.max(l.getPartLength(s,1),f),l.getLength()),g=Math.min(a?h.getPartLength(0,i)+f:Math.max(h.getPartLength(0,r),f),h.getLength()),v=Math.min(o?c.getPartLength(n,1)+f:Math.max(c.getPartLength(s,1),f),c.getLength()),p=Math.min(o?u.getPartLength(0,n)+f:Math.max(u.getPartLength(0,r),f),u.getLength()),m=h.getPointAt(g).subtract(d),w=l.getPointAt(-_).subtract(d),y=u.getPointAt(p).subtract(d),b=c.getPointAt(-v).subtract(d),x=w.getAngle(),S=m.getAngle(),C=b.getAngle(),k=y.getAngle()
;return!!(a?t(x,C,k)^t(S,C,k)&&t(x,k,C)^t(S,k,C):t(C,x,S)^t(k,x,S)&&t(C,S,x)^t(k,S,x))},hasOverlap:function(){return!!this._overlap}},o.each(L._evaluateMethods,function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),i=this.getTime();return null!=i&&t&&t[e](i,!0)}},{preserve:!0}),new function(){function t(t,e,i){function n(i,n){for(var s=i+n;s>=-1&&s<=r;s+=n){var a=t[(s%r+r)%r];if(!e.getPoint().isClose(a.getPoint(),1e-7))break;if(e.equals(a))return a}return null}
for(var r=t.length,s=0,a=r-1;s<=a;){var o,h=s+a>>>1,l=t[h];if(i&&(o=e.equals(l)?l:n(h,-1)||n(h,1)))return e._overlap&&(o._overlap=o._intersection._overlap=!0),o;var u=e.getPath(),c=l.getPath();(u!==c?u._id-c._id:e.getIndex()+e.getTime()-(l.getIndex()+l.getTime()))<0?a=h-1:s=h+1}return t.splice(s,0,e),e}return{statics:{insert:t,expand:function(e){for(var i=e.slice(),n=e.length-1;n>=0;n--)t(i,e[n]._intersection,!1);return i}}}}),B=S.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,
beans:!0,initialize:function(){},statics:{create:function(t){var e,i,n;if(o.isPlainObject(t)?(i=t.segments,e=t.pathData):Array.isArray(t)?i=t:"string"==typeof t&&(e=t),i){var r=i[0];n=r&&Array.isArray(r[0])}else e&&(n=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));return new(n?D:E)(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){function e(t,e){var i=+r[t]
;return h&&(i+=l[e]),i}function i(t){return new _(e(t,"x"),e(t+1,"y"))}function n(t,e){if(c.length){var i,n=t.children;if(n){var r=n[n.length-1];r&&r.isEmpty()?i=r:(i=new E(S.NO_INSERT),t.addChild(i))}else i=t;i.setSegments(c),e&&i.closePath(1e-12),c=[]}}var r,s,a,o=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),h=!1,l=new _,u=new _;this.clear();for(var c=[],d=0,f=o&&o.length;d<f;d++){var g=o[d],p=g[0],m=p.toLowerCase(),w=(r=g.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&r.length
;switch(h=p===m,"z"!==s||/[mz]/.test(m)||E.moveTo(c,l),m){case"m":case"l":for(var y="m"===m,b=0;b<w;b+=2)E[y?"moveTo":"lineTo"](c,l=i(b)),y&&(u=l,y=!1);a=l;break;case"h":case"v":var x="h"===m?"x":"y";l=l.clone();for(b=0;b<w;b++)l[x]=e(b,x),E.lineTo(c,l);a=l;break;case"c":for(b=0;b<w;b+=6)E.cubicCurveTo(c,i(b),a=i(b+2),l=i(b+4));break;case"s":for(b=0;b<w;b+=4)E.cubicCurveTo(c,/[cs]/.test(s)?l.multiply(2).subtract(a):l,a=i(b),l=i(b+2)),s=m;break;case"q":
for(b=0;b<w;b+=4)E.quadraticCurveTo(c,a=i(b),l=i(b+2));break;case"t":for(b=0;b<w;b+=2)E.quadraticCurveTo(c,a=/[qt]/.test(s)?l.multiply(2).subtract(a):l,l=i(b)),s=m;break;case"a":for(b=0;b<w;b+=7)E.arcTo(c,l=i(b+5),new v(+r[b],+r[b+1]),+r[b+2],!!r[b+4],!!r[b+3]);break;case"z":l=u,n(this,!0)}s=m}n(this,!1)},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t,0,!0):{}
;return e.onPath||!!("evenodd"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,i,n){var r=this===t||!t,s=this._matrix._orNullIfIdentity(),a=r?s:(i||t._matrix)._orNullIfIdentity();return r||this.getBounds(s).intersects(t.getBounds(a),1e-12)?L.getIntersections(this.getCurves(),!r&&t.getCurves(),e,s,a,n):[]},getCrossings:function(t){return this.getIntersections(t,function(t){return t.hasOverlap()||t.isCrossing()})},getNearestLocation:function(){
for(var t=_.read(arguments),e=this.getCurves(),i=Infinity,n=null,r=0,s=e.length;r<s;r++){var a=e[r].getNearestLocation(t);a._distance<i&&(i=a._distance,n=a)}return n},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,i){var n=!this._children,r=n?"_segments":"_children",s=t[r],a=e[r],o=this[r];if(!s||!a||s.length!==a.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var h=o.length,l=a.length
;if(h<l)for(var u=n?A:E,c=h;c<l;c++)this.add(new u);else h>l&&this[n?"removeSegments":"removeChildren"](l,h);for(c=0;c<l;c++)o[c].interpolate(s[c],a[c],i);n&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){if(this==t)return!0;var e=!1;if(t){var i=this._children||[this],r=t._children?t._children.slice():[t],s=i.length,a=r.length,o=[],h=0;e=!0;for(var l=n(i,r,d.GEOMETRIC_EPSILON),u=s-1;u>=0&&e;u--){var c=i[u];e=!1
;for(var f=l[u],_=f?f.length-1:-1;_>=0&&!e;_--)c.compare(r[f[_]])&&(o[f[_]]||(o[f[_]]=!0,h++),e=!0)}e=e&&h===a}return e}}),E=B.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var i=Array.isArray(t)?"object"==typeof t[0]?t:arguments:!t||t.size!==e||t.x===e&&t.point===e?null:arguments;i&&i.length>0?this.setSegments(i):(this._curves=e,this._segmentSelection=0,i||"string"!=typeof t||(this.setPathData(t),t=null)),
this._initialize(!i&&t)},_equals:function(t){return this._closed===t._closed&&o.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function mt(t){if(mt.base.call(this,t),8&t){if(this._length=this._area=e,16&t)this._version++;else if(this._curves)for(var i=0,n=this._curves.length;i<n;i++)this._curves[i]._changed()}else 32&t&&(this._bounds=e)},getStyle:function(){var t=this._parent;return(t instanceof D?t:this)._style},
getSegments:function(){return this._segments},setSegments:function(t){var i=this.isFullySelected(),n=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=e,n){var r=t[n-1];"boolean"==typeof r&&(this.setClosed(r),n--),this._add(A.readList(t,0,{},n))}i&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){
var i=this._countCurves();t=this._curves=new Array(i);for(var n=0;n<i;n++)t[n]=new L(this,e[n],e[n+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new L(this,this._segments[e-1],this._segments[0]))}this._changed(25)}}
},{beans:!0,getPathData:function(t,e){function i(e,i){if(e._transformCoordinates(t,g),n=g[0],r=g[1],v)p.push("M"+_.pair(n,r)),v=!1;else if(o=g[2],h=g[3],o===n&&h===r&&l===s&&u===a){if(!i){var c=n-s,d=r-a;p.push(0===c?"v"+_.number(d):0===d?"h"+_.number(c):"l"+_.pair(c,d))}}else p.push("c"+_.pair(l-s,u-a)+" "+_.pair(o-s,h-a)+" "+_.pair(n-s,r-a));s=n,a=r,l=g[4],u=g[5]}var n,r,s,a,o,h,l,u,d=this._segments,f=d.length,_=new c(e),g=new Array(6),v=!0,p=[];if(!f)return"";for(var m=0;m<f;m++)i(d[m])
;return this._closed&&f>0&&(i(d[0],!0),p.push("z")),p.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,i=new Array(6),n=0,r=e.length;n<r;n++)e[n]._transformCoordinates(t,i,!0);return!0},_add:function(t,e){for(var i=this._segments,n=this._curves,r=t.length,s=null==e,a=(e=s?i.length:e,0);a<r;a++){var o=t[a];o._path&&(o=t[a]=o.clone()),o._path=this,o._index=e+a,o._selection&&this._updateSelection(o,0,o._selection)}
if(s)i.push.apply(i,t);else{i.splice.apply(i,[e,0].concat(t));a=e+r;for(var h=i.length;a<h;a++)i[a]._index=a}if(n){var l=this._countCurves(),u=e>0&&e+r-1===l?e-1:e,c=u,d=Math.min(u+r,l);t._curves&&(n.splice.apply(n,[u,0].concat(t._curves)),c+=t._curves.length);for(a=c;a<d;a++)n.splice(a,0,new L(this,null,null));this._adjustCurves(u,d)}return this._changed(25),t},_adjustCurves:function(t,e){for(var i,n=this._segments,r=this._curves,s=t;s<e;s++)(i=r[s])._path=this,i._segment1=n[s],
i._segment2=n[s+1]||n[0],i._changed();(i=r[this._closed&&!t?n.length-1:t-1])&&(i._segment2=n[t]||n[0],i._changed()),(i=r[e])&&(i._segment1=n[e],i._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(A.readList(arguments)):this._add([A.read(arguments)])[0]},insert:function(t,e){
return arguments.length>2&&"number"!=typeof e?this._add(A.readList(arguments,1),t):this._add([A.read(arguments,1)],t)[0]},addSegment:function(){return this._add([A.read(arguments)])[0]},insertSegment:function(t){return this._add([A.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(A.readList(t))},insertSegments:function(t,e){return this._add(A.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,i){t=t||0,
e=o.pick(e,this._segments.length);var n=this._segments,r=this._curves,s=n.length,a=n.splice(t,e-t),h=a.length;if(!h)return a;for(var l=0;l<h;l++){var u=a[l];u._selection&&this._updateSelection(u,u._selection,0),u._index=u._path=null}l=t;for(var c=n.length;l<c;l++)n[l]._index=l;if(r){var d=t>0&&e===s+(this._closed?1:0)?t-1:t;for(l=(r=r.splice(d,h)).length-1;l>=0;l--)r[l]._path=null;i&&(a._curves=r.slice(1)),this._adjustCurves(d,d)}return this._changed(25),a},clear:"#removeSegments",
hasHandles:function(){for(var t=this._segments,e=0,i=t.length;e<i;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,i=t.length;e<i;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,i=0,n=t.length;i<n;i++)e+=t[i].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){var e=this._segments,i=this._closed;t=0;for(var n=0,r=e.length;n<r;n++){var s=n+1===r
;t+=L.getArea(L.getValues(e[n],e[s?0:n+1],null,s&&!i))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function wt(t){1&t||this._selectSegments(!1),wt.base.call(this,t)},_selectSegments:function(t){var e=this._segments,i=e.length,n=t?7:0;this._segmentSelection=n*i;for(var r=0;r<i;r++)e[r]._selection=n},
_updateSelection:function(t,e,i){t._selection=i,(this._segmentSelection+=i-e)>0&&this.setSelected(!0)},divideAt:function(t){var e,i=this.getLocationAt(t);return i&&(e=i.getCurve().divideAt(i.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),i=e&&e.index,n=e&&e.time,r=1e-8;n>1-r&&(i++,n=0);var s=this.getCurves();if(i>=0&&i<s.length){n>=r&&s[i++].divideAtTime(n);var a,o=this.removeSegments(i,this._segments.length,!0);return this._closed?(this.setClosed(!1),
a=this):((a=new E(S.NO_INSERT)).insertAbove(this),a.copyAttributes(this)),a._add(o,0),this.addSegment(o[0]),a}return null},split:function(t,i){var n,r=i===e?t:(n=this.getCurves()[t])&&n.getLocationAtTime(i);return null!=r?this.splitAt(r):null},join:function(t,e){var i=e||0;if(t&&t!==this){var n=t._segments,r=this.getLastSegment(),s=t.getLastSegment();if(!s)return this;r&&r._point.isClose(s._point,i)&&t.reverse();var a=t.getFirstSegment()
;if(r&&r._point.isClose(a._point,i))r.setHandleOut(a._handleOut),this._add(n.slice(1));else{var o=this.getFirstSegment();o&&o._point.isClose(a._point,i)&&t.reverse(),s=t.getLastSegment(),o&&o._point.isClose(s._point,i)?(o.setHandleIn(s._handleIn),this._add(n.slice(0,n.length-1),0)):this._add(n.slice())}t._closed&&this._add([n[0]]),t.remove()}var h=this.getFirstSegment(),l=this.getLastSegment();return h!==l&&h._point.isClose(l._point,i)&&(h.setHandleIn(l._handleIn),l.remove(),this.setClosed(!0)),
this},reduce:function(t){for(var e=this.getCurves(),i=t&&t.simplify,n=i?1e-7:0,r=e.length-1;r>=0;r--){var s=e[r];!s.hasHandles()&&(!s.hasLength(n)||i&&s.isCollinear(s.getNext()))&&s.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var i=this._segments[t],n=i._handleIn;i._handleIn=i._handleOut,i._handleOut=n,i._index=t}this._curves=null,this._changed(9)},flatten:function(t){
for(var e=new R(this,t||.25,256,!0).parts,i=e.length,n=[],r=0;r<i;r++)n.push(new A(e[r].curve.slice(0,2)));!this._closed&&i>0&&n.push(new A(e[i-1].curve.slice(6))),this.setSegments(n)},simplify:function(t){var e=new F(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){function i(t,e){var i=t&&t.index;if(null!=i){var r=t.path;if(r&&r!==n)throw new Error(t._class+" "+i+" of "+r+" is not part of "+n);e&&t instanceof L&&i++}else i="number"==typeof t?t:e
;return Math.min(i<0&&h?i%o:i<0?i+o:i,o-1)}var n=this,r=t||{},s=r.type||"asymmetric",a=this._segments,o=a.length,h=this._closed,l=h&&r.from===e&&r.to===e,u=i(r.from,0),c=i(r.to,o-1);if(u>c)if(h)u-=o;else{var d=u;u=c,c=d}if(/^(?:asymmetric|continuous)$/.test(s)){var f="asymmetric"===s,_=Math.min,g=c-u+1,v=g-1,p=l?_(g,4):1,m=p,w=p,y=[];if(h||(m=_(1,u),w=_(1,o-c-1)),(v+=m+w)<=1)return;for(var b=0,x=u-m;b<=v;b++,x++)y[b]=a[(x<0?x+o:x)%o]._point
;var S=y[0]._x+2*y[1]._x,C=y[0]._y+2*y[1]._y,k=2,z=v-1,P=[S],I=[C],M=[k],T=[],A=[];for(b=1;b<v;b++){var O=b<z,N=O?4:f?2:7,B=O?4:f?3:8,E=O?2:f?0:1,D=(O?1:f?1:2)/k;k=M[b]=N-D,S=P[b]=B*y[b]._x+E*y[b+1]._x-D*S,C=I[b]=B*y[b]._y+E*y[b+1]._y-D*C}T[z]=P[z]/M[z],A[z]=I[z]/M[z];for(b=v-2;b>=0;b--)T[b]=(P[b]-T[b+1])/M[b],A[b]=(I[b]-A[b+1])/M[b];T[v]=(3*y[v]._x-T[z])/2,A[v]=(3*y[v]._y-A[z])/2;b=m;var R=v-w;for(x=u;b<=R;b++,x++){var F=a[x<0?x+o:x],j=F._point,q=T[b]-j._x,V=A[b]-j._y
;(l||b<R)&&F.setHandleOut(q,V),(l||b>m)&&F.setHandleIn(-q,-V)}}else for(b=u;b<=c;b++)a[b<0?b+o:b].smooth(r,!l&&b===u,!l&&b===c)},toShape:function(t){function i(t,e){var i=u[t],n=i.getNext(),r=u[e],s=r.getNext();return i._handleOut.isZero()&&n._handleIn.isZero()&&r._handleOut.isZero()&&s._handleIn.isZero()&&n._point.subtract(i._point).isCollinear(s._point.subtract(r._point))}function n(t){var e=u[t],i=e.getPrevious(),n=e.getNext()
;return i._handleOut.isZero()&&e._handleIn.isZero()&&e._handleOut.isZero()&&n._handleIn.isZero()&&e._point.subtract(i._point).isOrthogonal(n._point.subtract(e._point))}function r(t){var e=u[t],i=e.getNext(),n=e._handleOut,r=i._handleIn,s=.5522847498307936;if(n.isOrthogonal(r)){var a=e._point,o=i._point,h=new b(a,n,!0).intersect(new b(o,r,!0),!0);return h&&d.isZero(n.getLength()/h.subtract(a).getLength()-s)&&d.isZero(r.getLength()/h.subtract(o).getLength()-s)}return!1}function s(t,e){
return u[t]._point.getDistance(u[e]._point)}if(!this._closed)return null;var a,o,h,l,u=this._segments;if(!this.hasHandles()&&4===u.length&&i(0,2)&&i(1,3)&&n(1)?(a=z.Rectangle,o=new v(s(0,3),s(0,1)),l=u[1]._point.add(u[2]._point).divide(2)):8===u.length&&r(0)&&r(2)&&r(4)&&r(6)&&i(1,5)&&i(3,7)?(a=z.Rectangle,h=(o=new v(s(1,6),s(0,3))).subtract(new v(s(0,7),s(1,2))).divide(2),l=u[3]._point.add(u[4]._point).divide(2)):4===u.length&&r(0)&&r(1)&&r(2)&&r(3)&&(d.isZero(s(0,2)-s(1,3))?(a=z.Circle,
h=s(0,2)/2):(a=z.Ellipse,h=new v(s(2,0)/2,s(3,1)/2)),l=u[1]._point),a){var c=this.getPosition(!0),f=new a({center:c,size:o,radius:h,insert:!1});return f.copyAttributes(this,!0),f._matrix.prepend(this._matrix),f.rotate(l.subtract(c).getAngle()+90),(t===e||t)&&f.insertAbove(this),f}return null},toPath:"#clone",compare:function yt(t){if(this==t)return!0;if(!t||t instanceof D)return yt.base.call(this,t);var e=this.getCurves(),i=t.getCurves(),n=e.length,r=i.length;if(!n||!r)return n==r
;for(var s,a,o=e[0].getValues(),h=[],l=0,u=0,c=0;c<r;c++){var d=i[c].getValues();if(h.push(d),v=L.getOverlaps(o,d)){s=!c&&v[0][0]>0?r-1:c,a=v[0][1];break}}var f,_=Math.abs,g=1e-8;for(d=h[s];o&&d;){var v;if(v=L.getOverlaps(o,d))if(_(v[0][0]-u)<g){1===(u=v[1][0])&&(o=++l<n?e[l].getValues():null,u=0);var p=v[0][1];if(_(p-a)<g){if(f||(f=[s,p]),1===(a=v[1][1])&&(++s>=r&&(s=0),d=h[s]||i[s].getValues(),a=0),!o)return f[0]===s&&f[1]===a;continue}}break}return!1},_hitTestSelf:function(t,e,i,n){
function r(e,i){return t.subtract(e).divide(i).length<=1}function s(t,i,n){if(!e.selected||i.isSelected()){var s=t._point;if(i!==s&&(i=i.add(s)),r(i,b))return new T(n,g,{segment:t,point:i})}}function a(t,i){return(i||e.segments)&&s(t,t._point,"segment")||!i&&e.handles&&(s(t,t._handleIn,"handle-in")||s(t,t._handleOut,"handle-out"))}function o(t){d.add(t)}function h(e){var i,s=w||e._index>0&&e._index<m-1;return"round"===(s?l:u)?r(e._point,b):(d=new E({internal:!0,closed:!0}),
s?e.isSmooth()||E._addBevelJoin(e,l,k,c,null,n,o,!0):"square"===u&&E._addSquareCap(e,u,k,null,n,o,!0),d.isEmpty()?void 0:d.contains(t)||(i=d.getNearestLocation(t))&&r(i.getPoint(),y))}var l,u,c,d,f,_,g=this,v=this.getStyle(),p=this._segments,m=p.length,w=this._closed,y=e._tolerancePadding,b=y,x=e.stroke&&v.hasStroke(),S=e.fill&&v.hasFill(),C=e.curves,k=x?v.getStrokeWidth()/2:S&&e.tolerance>0||C?0:null;if(null!==k&&(k>0?(l=v.getStrokeJoin(),u=v.getStrokeCap(),c=v.getMiterLimit(),
b=b.add(E._getStrokePadding(k,n))):l=u="round"),!e.ends||e.segments||w){if(e.segments||e.handles)for(var z=0;z<m;z++)if(_=a(p[z]))return _}else if(_=a(p[0],!0)||a(p[m-1],!0))return _;if(null!==k){if(f=this.getNearestLocation(t)){var P=f.getTime();0===P||1===P&&m>1?h(f.getSegment())||(f=null):r(f.getPoint(),b)||(f=null)}if(!f&&"miter"===l&&m>1)for(z=0;z<m;z++){var I=p[z];if(t.getDistance(I._point)<=c*k&&h(I)){f=I.getLocation();break}}}
return!f&&S&&this._contains(t)||f&&!x&&!C?new T("fill",this):f?new T(x?"stroke":"curve",this,{location:f,point:f.getPoint()}):null}},o.each(L._evaluateMethods,function(t){this[t+"At"]=function(e){var i=this.getLocationAt(e);return i&&i[t]()}},{beans:!1,getLocationOf:function(){for(var t=_.read(arguments),e=this.getCurves(),i=0,n=e.length;i<n;i++){var r=e[i].getLocationOf(t);if(r)return r}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments)
;return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var e=this.getCurves(),i=0,n=0,r=e.length;n<r;n++){var s=i,a=e[n];if((i+=a.getLength())>t)return a.getLocationAt(t-s)}if(e.length>0&&t<=this.getLength())return new N(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null}}),new function(){function t(t,e,i,n){function r(e){var i=h[e],n=h[e+1];s==i&&a==n||(t.beginPath(),t.moveTo(s,a),t.lineTo(i,n),t.stroke(),t.beginPath(),
t.arc(i,n,o,0,2*Math.PI,!0),t.fill())}for(var s,a,o=n/2,h=new Array(6),l=0,u=e.length;l<u;l++){var c=e[l],d=c._selection;if(c._transformCoordinates(i,h),s=h[0],a=h[1],2&d&&r(2),4&d&&r(4),t.fillRect(s-o,a-o,n,n),!(1&d)){var f=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(s-o+1,a-o+1,n-2,n-2),t.fillStyle=f}}}function e(t,e,i){function n(e){if(i)e._transformCoordinates(i,_),r=_[0],s=_[1];else{var n=e._point;r=n._x,s=n._y}if(g)t.moveTo(r,s),g=!1;else{if(i)h=_[2],l=_[3];else{var d=e._handleIn
;h=r+d._x,l=s+d._y}h===r&&l===s&&u===a&&c===o?t.lineTo(r,s):t.bezierCurveTo(u,c,h,l,r,s)}if(a=r,o=s,i)u=_[4],c=_[5];else{d=e._handleOut;u=a+d._x,c=o+d._y}}for(var r,s,a,o,h,l,u,c,d=e._segments,f=d.length,_=new Array(6),g=!0,v=0;v<f;v++)n(d[v]);e._closed&&f>0&&n(d[0])}return{_draw:function(t,i,n,r){function s(t){return c[(t%d+d)%d]}var a=i.dontStart,o=i.dontFinish||i.clip,h=this.getStyle(),l=h.hasFill(),u=h.hasStroke(),c=h.getDashArray(),d=!paper.support.nativeDash&&u&&c&&c.length
;if(a||t.beginPath(),(l||u&&!d||o)&&(e(t,this,r),this._closed&&t.closePath()),!o&&(l||u)&&(this._setStyles(t,i,n),l&&(t.fill(h.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),u)){if(d){a||t.beginPath();var f,_=new R(this,.25,32,!1,r),g=_.length,v=-h.getDashOffset(),p=0;for(v%=g;v>0;)v-=s(p--)+s(p--);for(;v<g;)f=v+s(p++),(v>0||f>0)&&_.drawPart(t,Math.max(v,0),Math.max(f,0)),v=f+s(p++)}t.stroke()}},_drawSelected:function(i,n){i.beginPath(),e(i,this,n),i.stroke(),
t(i,this._segments,n,paper.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new A(_.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new A(_.read(arguments))])},cubicCurveTo:function(){
var e=_.read(arguments),i=_.read(arguments),n=_.read(arguments),r=t(this);r.setHandleOut(e.subtract(r._point)),this._add([new A(n,i.subtract(n))])},quadraticCurveTo:function(){var e=_.read(arguments),i=_.read(arguments),n=t(this)._point;this.cubicCurveTo(e.add(n.subtract(e).multiply(1/3)),e.add(i.subtract(e).multiply(1/3)),i)},curveTo:function(){
var e=_.read(arguments),i=_.read(arguments),n=o.pick(o.read(arguments),.5),r=1-n,s=t(this)._point,a=e.subtract(s.multiply(r*r)).subtract(i.multiply(n*n)).divide(2*n*r);if(a.isNaN())throw new Error("Cannot put a curve through points with parameter = "+n);this.quadraticCurveTo(a,i)},arcTo:function(){var e,i,n,r,s=Math.abs,a=Math.sqrt,h=t(this),l=h._point,u=_.read(arguments),c=o.peek(arguments)
;if("boolean"==typeof(w=o.pick(c,!0)))var f=(S=l.add(u).divide(2)).add(S.subtract(l).rotate(w?-90:90));else if(o.remain(arguments)<=2)f=u,u=_.read(arguments);else{var g=v.read(arguments),p=d.isZero;if(p(g.width)||p(g.height))return this.lineTo(u);var m=o.read(arguments),w=!!o.read(arguments),x=!!o.read(arguments),S=l.add(u).divide(2),C=(W=l.subtract(S).rotate(-m)).x,k=W.y,z=s(g.width),P=s(g.height),I=z*z,M=P*P,T=C*C,O=k*k,L=a(T/I+O/M);if(L>1&&(I=(z*=L)*z,M=(P*=L)*P),
s(L=(I*M-I*O-M*T)/(I*O+M*T))<1e-12&&(L=0),L<0)throw new Error("Cannot create an arc with the given arguments");e=new _(z*k/P,-P*C/z).multiply((x===w?-1:1)*a(L)).rotate(m).add(S),i=(n=(r=(new y).translate(e).rotate(m).scale(z,P))._inverseTransform(l)).getDirectedAngle(r._inverseTransform(u)),!w&&i>0?i-=360:w&&i<0&&(i+=360)}if(f){var N=new b(l.add(f).divide(2),f.subtract(l).rotate(90),!0),B=new b(f.add(u).divide(2),u.subtract(f).rotate(90),!0),E=new b(l,u),D=E.getSide(f)
;if(!(e=N.intersect(B,!0))){if(!D)return this.lineTo(u);throw new Error("Cannot create an arc with the given arguments")}i=(n=l.subtract(e)).getDirectedAngle(u.subtract(e));var R=E.getSide(e);0===R?i=D*s(i):D===R&&(i+=i<0?360:-360)}for(var F=1e-7,j=s(i),q=j>=360?4:Math.ceil((j-F)/90),V=i/q,Z=V*Math.PI/360,H=4/3*Math.sin(Z)/(1+Math.cos(Z)),U=[],G=0;G<=q;G++){var W=u,J=null;if(G<q&&(J=n.rotate(90).multiply(H),r?(W=r._transformPoint(n),J=r._transformPoint(n.add(J)).subtract(W)):W=e.add(n)),G){
var K=n.rotate(-90).multiply(H);r&&(K=r._transformPoint(n.add(K)).subtract(W)),U.push(new A(W,K,J))}else h.setHandleOut(J);n=n.rotate(V)}this._add(U)},lineBy:function(){var e=_.read(arguments),i=t(this)._point;this.lineTo(i.add(e))},curveBy:function(){var e=_.read(arguments),i=_.read(arguments),n=o.read(arguments),r=t(this)._point;this.curveTo(r.add(e),r.add(i),n)},cubicCurveBy:function(){var e=_.read(arguments),i=_.read(arguments),n=_.read(arguments),r=t(this)._point
;this.cubicCurveTo(r.add(e),r.add(i),r.add(n))},quadraticCurveBy:function(){var e=_.read(arguments),i=_.read(arguments),n=t(this)._point;this.quadraticCurveTo(n.add(e),n.add(i))},arcBy:function(){var e=t(this)._point,i=e.add(_.read(arguments)),n=o.pick(o.peek(arguments),!0);"boolean"==typeof n?this.arcTo(i,n):this.arcTo(i,e.add(_.read(arguments)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){
var i=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return E[i](this._segments,this._closed,this,t,e)},statics:{moveTo:function(t,e){1===t.length&&t.splice(0,1),t.splice(t.length,0,new A(e))},lineTo:function(t,e){t.splice(t.length,0,new A(e))},cubicCurveTo:function(t,e,i,n){var r=t[t.length-1];r.setHandleOut(e.subtract(r._point)),t.splice(t.length,0,new A(n,i.subtract(n)))},quadraticCurveTo:function(t,e,i){var n=t[t.length-1]
;E.cubicCurveTo(t,e.add(n.subtract(e).divide(3)),e.add(i.subtract(e).divide(3)),i)},arcTo:function(t,e,i,n,r,s){var a,o,h,l,u=Math.abs,c=Math.sqrt,f=t[t.length-1],g=f._point,v=(e=new _(e),d.isZero);(v(i.width)||v(i.height))&&E.lineTo(t,e),r=!!r,s=!!s;var p=g.add(e).divide(2),m=(D=g.subtract(p).rotate(-n)).x,w=D.y,b=u(i.width),x=u(i.height),S=b*b,C=x*x,k=m*m,z=w*w,P=c(k/S+z/C);if(P>1&&(S=(b*=P)*b,C=(x*=P)*x),u(P=(S*C-S*z-C*k)/(S*z+C*k))<1e-12&&(P=0),
P<0)throw new Error("Cannot create an arc with the given arguments");a=new _(b*w/x,-x*m/b).multiply((s===r?-1:1)*c(P)).rotate(n).add(p),o=(h=(l=(new y).translate(a).rotate(n).scale(b,x))._inverseTransform(g)).getDirectedAngle(l._inverseTransform(e)),!r&&o>0?o-=360:r&&o<0&&(o+=360);for(var I=1e-7,M=u(o),T=M>=360?4:Math.ceil((M-I)/90),O=o/T,L=O*Math.PI/360,N=4/3*Math.sin(L)/(1+Math.cos(L)),B=0;B<=T;B++){var D=e,R=null;if(B<T&&(R=h.rotate(90).multiply(N),l?(D=l._transformPoint(h),
R=l._transformPoint(h.add(R)).subtract(D)):D=a.add(h)),B){var F=h.rotate(-90).multiply(N);l&&(F=l._transformPoint(h.add(F)).subtract(D)),t.splice(t.length,0,new A(D,F,R))}else f.setHandleOut(R);h=h.rotate(O)}},getBounds:function(t,e,i,n,r,s){function a(t){t._transformCoordinates(n,h);for(var e=0;e<2;e++)L._addBounds(l[e],l[e+4],h[e+2],h[e],e,s?s[e]:0,u,c,d);var i=l;l=h,h=i}var o=t[0];if(!o)return new m
;for(var h=new Array(6),l=o._transformCoordinates(n,new Array(6)),u=l.slice(0,2),c=u.slice(),d=new Array(2),f=1,_=t.length;f<_;f++)a(t[f]);return e&&a(o),new m(u[0],u[1],c[0]-u[0],c[1]-u[1])},getStrokeBounds:function(t,e,i,n,r){function s(t){_=_.include(t)}function a(t){_=_.unite(b.setCenter(t._point.transform(n)))}function o(t,e){"round"===e||t.isSmooth()?a(t):E._addBevelJoin(t,e,g,y,n,d,s)}function h(t,e){"round"===e?a(t):E._addSquareCap(t,e,g,n,d,s)}
var l=i.getStyle(),u=l.hasStroke(),c=l.getStrokeWidth(),d=u&&i._getStrokeMatrix(n,r),f=u&&E._getStrokePadding(c,d),_=E.getBounds(t,e,i,n,r,f);if(!u)return _;for(var g=c/2,p=l.getStrokeJoin(),w=l.getStrokeCap(),y=l.getMiterLimit(),b=new m(new v(f)),x=t.length-(e?0:1),S=1;S<x;S++)o(t[S],p);return e?o(t[0],p):x>0&&(h(t[0],w),h(t[t.length-1],w)),_},_getStrokePadding:function(t,e){if(!e)return[t,t]
;var i=new _(t,0).transform(e),n=new _(0,t).transform(e),r=i.getAngleInRadians(),s=i.getLength(),a=n.getLength(),o=Math.sin(r),h=Math.cos(r),l=Math.tan(r),u=Math.atan2(a*l,s),c=Math.atan2(a,l*s);return[Math.abs(s*Math.cos(u)*h+a*Math.sin(u)*o),Math.abs(a*Math.sin(c)*h+s*Math.cos(c)*o)]},_addBevelJoin:function(t,e,i,n,r,s,a,o){var h=t.getCurve(),l=h.getPrevious(),u=h.getPoint1().transform(r),c=l.getNormalAtTime(1).multiply(i).transform(s),d=h.getNormalAtTime(0).multiply(i).transform(s)
;if(c.getDirectedAngle(d)<0&&(c=c.negate(),d=d.negate()),o&&a(u),a(u.add(c)),"miter"===e){var f=new b(u.add(c),new _(-c.y,c.x),!0).intersect(new b(u.add(d),new _(-d.y,d.x),!0),!0);f&&u.getDistance(f)<=n*i&&a(f)}a(u.add(d))},_addSquareCap:function(t,e,i,n,r,s,a){var o=t._point.transform(n),h=t.getLocation(),l=h.getNormal().multiply(0===h.getTime()?i:-i).transform(r);"square"===e&&(a&&(s(o.subtract(l)),s(o.add(l))),o=o.add(l.rotate(-90))),s(o.add(l)),s(o.subtract(l))},
getHandleBounds:function(t,e,i,n,r){var s,a,o=i.getStyle();if(r.stroke&&o.hasStroke()){var h=i._getStrokeMatrix(n,r),l=o.getStrokeWidth()/2,u=l;"miter"===o.getStrokeJoin()&&(u=l*o.getMiterLimit()),"square"===o.getStrokeCap()&&(u=Math.max(u,l*Math.SQRT2)),s=E._getStrokePadding(l,h),a=E._getStrokePadding(u,h)}for(var c=new Array(6),d=Infinity,f=-d,_=d,g=f,v=0,p=t.length;v<p;v++){t[v]._transformCoordinates(n,c);for(var w=0;w<6;w+=2){
var y=w?s:a,b=y?y[0]:0,x=y?y[1]:0,S=c[w],C=c[w+1],k=S-b,z=S+b,P=C-x,I=C+x;k<d&&(d=k),z>f&&(f=z),P<_&&(_=P),I>g&&(g=I)}}return new m(d,_,f-d,g-_)}}});E.inject({statics:new function(){function t(t,e,i){var n=o.getNamed(i),r=new E(n&&0==n.insert&&S.NO_INSERT);return r._add(t),r._closed=e,r.set(n,{insert:!0})}function e(e,i,r){for(var s=new Array(4),a=0;a<4;a++){var o=n[a];s[a]=new A(o._point.multiply(i).add(e),o._handleIn.multiply(i),o._handleOut.multiply(i))}return t(s,!0,r)}
var i=.5522847498307936,n=[new A([-1,0],[0,i],[0,-i]),new A([0,-1],[-i,0],[i,0]),new A([1,0],[0,-i],[0,i]),new A([0,1],[i,0],[-i,0])];return{Line:function(){return t([new A(_.readNamed(arguments,"from")),new A(_.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var t=_.readNamed(arguments,"center"),i=o.readNamed(arguments,"radius");return e(t,new v(i),arguments)},Rectangle:function(){var e,n=m.readNamed(arguments,"rectangle"),r=v.readNamed(arguments,"radius",0,{readNull:!0
}),s=n.getBottomLeft(!0),a=n.getTopLeft(!0),o=n.getTopRight(!0),h=n.getBottomRight(!0);if(!r||r.isZero())e=[new A(s),new A(a),new A(o),new A(h)];else{var l=(r=v.min(r,n.getSize(!0).divide(2))).width,u=r.height,c=l*i,d=u*i;e=[new A(s.add(l,0),null,[-c,0]),new A(s.subtract(0,u),[0,d]),new A(a.add(0,u),null,[0,-d]),new A(a.add(l,0),[-c,0],null),new A(o.subtract(l,0),null,[c,0]),new A(o.add(0,u),[0,-d],null),new A(h.subtract(0,u),null,[0,d]),new A(h.subtract(l,0),[c,0])]}return t(e,!0,arguments)},
RoundRectangle:"#Rectangle",Ellipse:function(){var t=z._readEllipse(arguments);return e(t.center,t.radius,arguments)},Oval:"#Ellipse",Arc:function(){var t=_.readNamed(arguments,"from"),e=_.readNamed(arguments,"through"),i=_.readNamed(arguments,"to"),n=o.getNamed(arguments),r=new E(n&&0==n.insert&&S.NO_INSERT);return r.moveTo(t),r.arcTo(e,i),r.set(n)},RegularPolygon:function(){
for(var e=_.readNamed(arguments,"center"),i=o.readNamed(arguments,"sides"),n=o.readNamed(arguments,"radius"),r=360/i,s=i%3==0,a=new _(0,s?-n:n),h=s?-1:.5,l=new Array(i),u=0;u<i;u++)l[u]=new A(e.add(a.rotate((u+h)*r)));return t(l,!0,arguments)},Star:function(){
for(var e=_.readNamed(arguments,"center"),i=2*o.readNamed(arguments,"points"),n=o.readNamed(arguments,"radius1"),r=o.readNamed(arguments,"radius2"),s=360/i,a=new _(0,-1),h=new Array(i),l=0;l<i;l++)h[l]=new A(e.add(a.rotate(s*l).multiply(l%2?r:n)));return t(h,!0,arguments)}}}});var D=B.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},
this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function bt(t,e){var i=e,n=i[0];n&&"number"==typeof n[0]&&(i=[i]);for(var r=e.length-1;r>=0;r--){var s=i[r];i!==e||s instanceof E||(i=o.slice(i)),Array.isArray(s)?i[r]=new E({segments:s,insert:!1}):s instanceof D&&(i.splice.apply(i,[r,1].concat(s.removeChildren())),s.remove())}return bt.base.call(this,t,i)},reduce:function xt(t){
for(var e=this._children,i=e.length-1;i>=0;i--){var n;(n=e[i].reduce(t)).isEmpty()&&n.remove()}return e.length?xt.base.call(this):((n=new E(S.NO_INSERT)).copyAttributes(this),n.insertAbove(this),this.remove(),n)},isClosed:function(){for(var t=this._children,e=0,i=t.length;e<i;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,i=0,n=e.length;i<n;i++)e[i].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},
getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],i=0,n=t.length;i<n;i++)e.push.apply(e,t[i].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,i=0,n=t.length;i<n;i++)e+=t[i].getArea();return e},getLength:function(){
for(var t=this._children,e=0,i=0,n=t.length;i<n;i++)e+=t[i].getLength();return e},getPathData:function(t,e){for(var i=this._children,n=[],r=0,s=i.length;r<s;r++){var a=i[r],o=a._matrix;n.push(a.getPathData(t&&!o.isIdentity()?t.appended(o):t,e))}return n.join("")},_hitTestChildren:function St(t,e,i){return St.base.call(this,t,e["class"]===E||"path"===e.type?e:o.set({},e,{fill:!1}),i)},_draw:function(t,e,i,n){var r=this._children;if(r.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath()
;for(var s=0,a=r.length;s<a;s++)r[s].draw(t,e,n);if(!e.clip){this._setStyles(t,e,i);var o=this._style;o.hasFill()&&(t.fill(o.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,i){for(var n=this._children,r=0,s=n.length;r<s;r++){var a=n[r],o=a._matrix;i[a._id]||a._drawSelected(t,o.isIdentity()?e:e.appended(o))}}},new function(){function t(t,e){var i=t._children;if(e&&!i.length)throw new Error("Use a moveTo() command first");return i[i.length-1]}
return o.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(e){this[e]=function(){var i=t(this,!0);i[e].apply(i,arguments)}},{moveTo:function(){var e=t(this),i=e&&e.isEmpty()?e:new E(S.NO_INSERT);i!==e&&this.addChild(i),i.moveTo.apply(i,arguments)},moveBy:function(){var e=t(this,!0),i=e&&e.getLastSegment(),n=_.read(arguments);this.moveTo(i?n.add(i._point):n)},closePath:function(e){t(this,!0).closePath(e)}})
},o.each(["reverse","flatten","simplify","smooth"],function(t){this[t]=function(e){for(var i,n=this._children,r=0,s=n.length;r<s;r++)i=n[r][t](e)||i;return i}},{}));B.inject(new function(){function t(t,e){var i=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return e&&!t._resolved?(i=i.resolveCrossings().reorient("nonzero"===i.getFillRule(),!0))._resolved=!0:i._resolved=t._resolved,i}function e(t,e,i,n,r,s){var a=new t(S.NO_INSERT);return a.addChildren(e,!0),i&&(a=a.reduce({simplify:!0
})),s&&!1===s.insert||a.insertAbove(r&&n.isSibling(r)&&n.getIndex()<r.getIndex()?r:n),a.copyAttributes(n,!0),a}function i(i,n,s,a){function o(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];S.push.apply(S,n._segments),C.push.apply(C,n.getCurves()),n._overlapsOnly=!0}}if(i&&n&&i.compare(n)){if("unite"===s||"intersect"===s){var u=i.clone(!1);return u._resolved=i._resolved,u}if("subtract"===s||"exclude"===s)return null}var d=!1,_="";if(d&&(_+=PaperDebugUtils.pathToCode(i,"p1")+"\n",
_+=PaperDebugUtils.pathToCode(n,"p2")+"\n"),a&&a.stroke&&/^(subtract|intersect)$/.test(s))return r(i,n,"subtract"===s);var g=t(i,!0),v=n&&i!==n&&t(n,!0),m=p[s];m[s]=!0,v&&(m.subtract||m.exclude)^v.isClockwise()^g.isClockwise()&&v.reverse();var w,y=l(N.expand(g.getIntersections(v))),b=g._children||[g],x=v&&(v._children||[v]),S=[],C=[];if(!y.length){var k=m.unite?[1,2]:m.subtract?[1]:m.intersect?[2]:m.exclude?[-1,1]:[];if(x&&m.exclude)for(var z=0;z<x.length;z++);
var P=h(x?b.concat(x):b,function(t){return k.indexOf(t)>=0},m.subtract||m.exclude?g.isClockwise():null);w=[new D({children:P,insert:!1})]}if(!w){o(b),x&&o(x);z=0;for(var I=y.length;z<I;z++)c(y[z]._segment,g,v,C,m);for(z=0,I=S.length;z<I;z++){var M=S[z],T=M._intersection;M._winding||c(M,g,v,C,m),T&&T._overlap||(M._path._overlapsOnly=!1)}w=f(S,m)}var A=e(D,w,!0,i,n,a);return d&&(_+=PaperDebugUtils.pathToCode(A,"res")+"\n",_+='p1.strokeColor = "green";\n',_+='p2.strokeColor = "red";\n',
_+='res.fillColor = "rgba(255, 255, 0, 0.3)"\n',_+="\n",console.log(_)),A._resolved=!0,A}function r(i,n,r){function s(t){if(o.contains(t.getPointAt(t.getLength()/2))^r)return l.unshift(t),!0}for(var a=t(i),o=t(n),h=a.getCrossings(o),l=[],u=h.length-1;u>=0;u--){var c=h[u].split();c&&(s(c)&&c.getFirstSegment().setHandleIn(0,0),a.getLastSegment().setHandleOut(0,0))}return s(a),e(C,l,!1,i,n)}function s(t,e){for(var i=t;i;){if(i===e)return;i=i._previous}for(;t._next&&t._next!==e;)t=t._next
;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function a(t){for(var e=t.length-1;e>=0;e--)t[e].clearHandles()}function h(t,e,i){var r=t&&t.length;if(r)for(var s=o.each(t,function(t,e){this[t._id]={winding:t.isClockwise()?1:-1,index:e}},{}),a=t.slice().sort(function(t,e){return v(e.getArea())-v(t.getArea())}),h=a[0],l=n(a,null,d.GEOMETRIC_EPSILON),u=0;u<r;u++){var c=a[u],f=l[u];if(f)for(var _=s[c._id],g=0,p=null,m=f.length-1;m>=0;m--)if(f[m]<u){p=p||c.getInteriorPoint()
;var w=a[f[m]];if(w.contains(p)){var y=s[w._id];_.newContainer=y.exclude?y.newContainer:w,g=y.winding,_.winding+=g;break}}e(_.winding)==e(g)?_.exclude=!0:c.setClockwise(_.newContainer?!_.newContainer.isClockwise():null==i?h.isClockwise():i)}for(u=r-1;u>=0;u--)s[t[u]._id].exclude&&t.splice(u,1);return t}function l(t,e,i){function n(t){return t._path._id+"."+t._segment1._index}for(var r,o,h,l=e&&[],u=1e-8,c=1-u,d=!1,f=i||[],_=i&&{},g=(i&&i.length)-1;g>=0;g--){(v=i[g])._path&&(_[n(v)]=!0)}
for(g=t.length-1;g>=0;g--){var v,p,m=t[g],w=m._time,y=w,b=e&&!e(m);if((v=m._curve)&&(v!==o?(d=!v.hasHandles()||_&&_[n(v)],r=[],h=null,o=v):h>=u&&(w/=h)),b)r&&r.push(m);else{if(e&&l.unshift(m),h=y,w<u)p=v._segment1;else if(w>c)p=v._segment2;else{var x=v.divideAtTime(w,!0);d&&f.push(v,x),p=x._segment1;for(var S=r.length-1;S>=0;S--){var C=r[S];C._time=(C._time-w)/(1-w)}}m._setSegment(p);var k=p._intersection,z=m._intersection;if(k){s(k,z);for(var P=k;P;)s(P._intersection,k),P=P._next
}else p._intersection=z}}return i||a(f),l||t}function u(t,e,i,n,r){function s(s){var a=s[d+0],h=s[d+6];if(!(m<_(a,h)||m>g(a,h))){var f=s[c+0],v=s[c+2],z=s[c+4],P=s[c+6];if(a!==h){var I=m===a?0:m===h?1:w>g(f,v,z,P)||y<_(f,v,z,P)?1:L.solveCubic(s,d,m,k,0,1)>0?k[0]:1,M=0===I?f:1===I?P:L.getPoint(s,I)[i?"y":"x"],T=a>h?1:-1,A=o[d]>o[d+6]?1:-1,O=o[c+6];return M>=w&&M<=y&&(S=!0),m!==a?M<w?b+=T:M>y&&(x+=T):T!==A?(f<w?b+=T:f>y&&(x+=T),C=0):f!=O&&(O<y&&M>y?(x+=T,S=!0):O>w&&M<w&&(b+=T,S=!0),C=0),
m!==a?M>p-100*l&&M<p+100*l&&(C/=2):C=0,o=s,!r&&M>w&&M<y&&0===L.getTangent(s,I)[i?"x":"y"]&&u(t,e,i?0:1,n,!0)}(f<y&&P>w||P<y&&f>w)&&(S=!0)}}function a(t){var e=t[d+0],n=t[d+2],r=t[d+4],a=t[d+6];if(m<=g(e,n,r,a)&&m>=_(e,n,r,a))for(var o,h=t[c+0],l=t[c+2],u=t[c+4],f=t[c+6],v=w>g(h,l,u,f)||y<_(h,l,u,f)?[t]:L.getMonoCurves(t,i),p=0,b=v.length;p<b;p++)if(o=s(v[p]))return o}for(var o,h,l=1e-12,c=i?1:0,d=i?0:1,f=[t.x,t.y],p=f[c],m=f[d],w=p-l,y=p+l,b=0,x=0,S=!1,C=1,k=[],z=0,P=e.length;z<P;z++){
var I,M=e[z],T=M._path,A=M.getValues();if(!(z&&e[z-1]._path===T||(o=null,T._closed||(h=L.getValues(T.getLastCurve().getSegment2(),M.getSegment1(),null,!n))[d]!==h[d+6]&&(o=h),o))){o=A;for(var O=T.getLastCurve();O&&O!==M;){var N=O.getValues();if(N[d]!==N[d+6]){o=N;break}O=O.getPrevious()}}if(I=a(A))return I;if(z+1===P||e[z+1]._path!==T){if(h&&(I=a(h)))return I;h=null}}return b=b&&2-v(b)%2,x=x&&2-v(x)%2,{winding:g(b,x),windingL:b,windingR:x,onContour:!b!=!x,onPath:S,quality:C}}
function c(t,e,i,n,r){var s,a=[],o=t,h=0;do{var l=(m=t.getCurve()).getLength();a.push({segment:t,curve:m,length:l}),h+=l,t=t.getNext()}while(t&&!t._intersection&&t!==o);for(var c=[.48,.1,.9],d=0;(!s||s.quality<.5)&&d<c.length;d++){l=h*c[d];for(var f=0,_=a.length;f<_;f++){var g=a[f],p=g.length;if(l<=p){var m,w=(m=g.curve)._path,y=w._parent,b=m.getTimeAt(l),x=m.getPointAtTime(b),S=v(m.getTangentAtTime(b).normalize().y)<Math.SQRT1_2?1:0;y instanceof D&&(w=y)
;var C=r.subtract&&i&&(w===e&&i._getWinding(x,S,!0).winding||w===i&&!e._getWinding(x,S,!0).winding)?{winding:0}:u(x,n,S,!0);0!=C.winding&&(!s||s.quality<C.quality)&&(s=C);break}l-=p}}for(f=a.length-1;f>=0;f--)a[f].segment._winding=s}function f(t,e){function i(t){var i;return!(!t||t._visited||!(!e||e[(i=t._winding||{}).winding]||e.unite&&i.onContour))}function n(t){if(t)for(var e=0,i=l.length;e<i;e++)if(t===l[e])return!0;return!1}function r(t){
for(var e=t._segments,i=0,n=e.length;i<n;i++)e[i]._visited=!0}function s(t,e){function r(r,s){for(;r&&r!==s;){var a=r._segment,h=a&&a._path,u=a&&a.getNext()||h&&h.getFirstSegment(),c=u&&u._intersection;a!==t&&(n(a)||n(u)||u&&i(a)&&(i(u)||c&&i(c._segment)))&&o.push(a),e&&l.push(a),r=r._next}}var s=t._intersection,a=s,o=[];if(e&&(l=[t]),s){for(r(s);s&&s._prev;)s=s._prev;r(s,a)}return o}var a=!1;if(a&&console.log("\n*** trace paths ***"),a&&console.log(PaperDebugUtils.pathToCode(new E({segments:t
}))),a){console.log("* segments info *");for(var o="",h=0;h<t.length;h++){o+=(d=t[h]).getPath().getId()+"."+d._index+(d._intersection?": inter: "+d._intersection._segment.getPath().getId()+"."+d._intersection._segment._index:""),o+=" "+t[h].getPoint().x+", "+t[h].getPoint().y,t[h].winding&&(o+=t[h]._winding.winding+", "+t[h]._winding.windingL+", "+t[h]._winding.windingR),o+="\n"}console.log(o)}var l,u=[];t.sort(function(t,e){
var i=t._intersection,n=e._intersection,r=!(!i||!i._overlap),s=!(!n||!n._overlap),a=t._path,o=e._path;return r^s?r?1:-1:!i^!n?i?1:-1:a!==o?a._id-o._id:t._index-e._index}),a&&console.log("* iterate through segments *");h=0;for(var c=t.length;h<c;h++){var d,f,_,g,v=i(d=t[h]),p=null,m=!1,w=!0,y=[];if(v&&d._path._overlapsOnly){var b=d._path,x=d._intersection._segment._path;a&&console.log(d._intersection),b.compare(x)&&(b.getArea()&&u.push(b.clone(!1)),r(b),r(x),v=!1)}for(;v&&d;){
a&&console.log(d.getPath().getId()+"."+d._index);var C=!p,k=s(d,C),z=k.shift(),P=!(m=!C&&(n(d)||n(z)))&&z;if(C&&(p=new E(S.NO_INSERT),f=null),m){(d.isFirst()||d.isLast())&&(w=d._path._closed),a&&console.log("setVisited0 "+d.getPath()._id+"-"+d.getIndex()),d._visited=!0;break}if(P&&f&&(y.push(f),f=null),f||(P&&k.push(d),f={start:p._segments.length,crossings:k,visited:_=[],handleIn:g}),a&&console.log("cross "+P),P&&(d=z),!i(d)){p.removeSegments(f.start)
;for(var I=0,M=_.length;I<M;I++)a&&console.log("setUnVisited "+_[I].getPath()._id+"-"+_[I].getIndex()),_[I]._visited=!1;_.length=0;do{(d=f&&f.crossings.shift())||(f=y.pop())&&(_=f.visited,g=f.handleIn)}while(f&&!i(d));if(!d)break}var T=d.getNext();p.add(new A(d._point,g,T&&d._handleOut)),a&&console.log("setVisited1 "+d.getPath()._id+"-"+d.getIndex()),d._visited=!0,_.push(d),d=T||d._path&&d._path.getFirstSegment(),g=T&&T._handleIn}a&&console.log("finished "+m),
a&&console.log(PaperDebugUtils.pathToCode(p,null,"fullySelected: true")),m&&(w&&(p.getFirstSegment().setHandleIn(g),p.setClosed(w)),Math.abs(p.getArea())>1&&u.push(p))}return u}var _=Math.min,g=Math.max,v=Math.abs,p={unite:{1:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0}};return{_getWinding:function(t,e,i){return u(t,this.getCurves(),e,i)},unite:function(t,e){return i(this,t,"unite",e)},intersect:function(t,e){return i(this,t,"intersect",e)},subtract:function(t){return i(this,t,"subtract")
},exclude:function(t,e){return i(this,t,"exclude",e)},divide:function(t,i){return e(C,[this.subtract(t,i),this.intersect(t,i)],!0,this,t,i)},resolveCrossings:function(){function t(t,e){var i=t&&t._intersection;return i&&i._overlap&&i._path._id==e._id}if(this._resolved)return this.clone(!1);var e=this._children,i=e||[this],n=!1,r=!1,s=this.getIntersections(null,function(t){return t.hasOverlap()&&(n=!0)||t.isCrossing()&&(r=!0)}),h=n&&r&&[];if(s=N.expand(s),n)for(var u=l(s,function(t){
return t.hasOverlap()},h),c=u.length-1;c>=0;c--){var d=u[c]._segment,_=d.getPrevious(),g=d.getNext(),v=u[c]._intersection._path;t(_,v)&&t(g,v)&&(d.remove(),_._handleOut._set(0,0),g._handleIn._set(0,0),_===d||_.getCurve().hasLength()||(g._handleIn.set(_._handleIn),_.remove()))}r&&(l(s,n&&function(t){var e=t.getCurve(),i=t.getSegment(),n=t._intersection,r=n._curve,s=n._segment;if(e&&r&&e._path&&r._path)return!0;i&&(i._intersection=null),s&&(s._intersection=null)},h),h&&a(h),
i=f(o.each(i,function(t){this.push.apply(this,t._segments)},[])));var p,m=i.length;return m>1&&e?(i!==e&&this.setChildren(i),p=this):1!==m||e||(i[0]!==this&&this.setSegments(i[0].removeSegments()),p=this),p||((p=new D(S.NO_INSERT)).addChildren(i),(p=p.reduce()).copyAttributes(this),this.replaceWith(p)),p},reorient:function(t,e){var i=this._children;return i&&i.length?(h(i=this.removeChildren(),t?function(t){return!t}:function(t){return!(t%2)},e),
this.setChildren(i)):null!=e&&this.setClockwise(e),this},getInteriorPoint:function(){var t=this.getBounds().getCenter(!0);if(!this.contains(t)){for(var e=this.getCurves(),i=t.y,n=[],r=[],s=0,a=e.length;s<a;s++){var o=e[s].getValues(),h=o[1],l=o[3],u=o[5],c=o[7];if(i>=_(h,l,u,c)&&i<=g(h,l,u,c))for(var d=L.getMonoCurves(o),f=0,v=d.length;f<v;f++){var p=d[f],m=p[1],w=p[7];if(m!==w&&(i>=m&&i<=w||i>=w&&i<=m)){var y=i===m?p[0]:i===w?p[6]:1===L.solveCubic(p,1,i,r,0,1)?L.getPoint(p,r[0]).x:(p[0]+p[6])/2
;n.push(y)}}}n.length>1&&(n.sort(function(t,e){return t-e}),t.x=(n[0]+n[1])/2)}return t}}});var R=o.extend({_class:"PathFlattener",initialize:function(t,e,i,n,r){function s(t,e){var i=L.getValues(t,e,r);h.push(i),a(i,t._index,0,1)}function a(t,i,r,s){if(!(s-r>c)||n&&L.isStraight(t)||L.isFlatEnough(t,e||.25)){var o=t[6]-t[0],h=t[7]-t[1],d=Math.sqrt(o*o+h*h);d>0&&(u+=d,l.push({offset:u,curve:t,index:i,time:s}))}else{var f=L.subdivide(t,.5),_=(r+s)/2;a(f[0],i,r,_),a(f[1],i,_,s)}}
for(var o,h=[],l=[],u=0,c=1/(i||32),d=t._segments,f=d[0],_=1,g=d.length;_<g;_++)s(f,o=d[_]),f=o;t._closed&&s(o,d[0]),this.curves=h,this.parts=l,this.length=u,this.index=0},_get:function(t){for(var e,i=this.parts,n=i.length,r=this.index;e=r,r&&!(i[--r].offset<t););for(;e<n;e++){var s=i[e];if(s.offset>=t){this.index=e;var a=i[e-1],o=a&&a.index===s.index?a.time:0,h=a?a.offset:0;return{index:s.index,time:o+(s.time-o)*(t-h)/(s.offset-h)}}}return{index:i[n-1].index,time:1}},drawPart:function(t,e,i){
for(var n=this._get(e),r=this._get(i),s=n.index,a=r.index;s<=a;s++){var o=L.getPart(this.curves[s],s===n.index?n.time:0,s===r.index?r.time:1);s===n.index&&t.moveTo(o[0],o[1]),t.bezierCurveTo.apply(t,o.slice(2))}}},o.each(L._evaluateMethods,function(t){this[t+"At"]=function(e){var i=this._get(e);return L[t](this.curves[i.index],i.time)}},{})),F=o.extend({initialize:function(t){for(var e,i=this.points=[],n=t._segments,r=t._closed,s=0,a=n.length;s<a;s++){var o=n[s].point
;e&&e.equals(o)||i.push(e=o.clone())}r&&(i.unshift(i[i.length-1]),i.push(i[1])),this.closed=r},fit:function(t){var e=this.points,i=e.length,n=null;return i>0&&(n=[new A(e[0])],i>1&&(this.fitCubic(n,t,0,i-1,e[1].subtract(e[0]),e[i-2].subtract(e[i-1])),this.closed&&(n.shift(),n.pop()))),n},fitCubic:function(t,e,i,n,r,s){var a=this.points;if(n-i!=1){for(var o,h=this.chordLengthParameterize(i,n),l=Math.max(e,e*e),u=!0,c=0;c<=4;c++){var d=this.generateBezier(i,n,h,r,s),f=this.findMaxError(i,n,d,h)
;if(f.error<e&&u)return void this.addCurve(t,d);if(o=f.index,f.error>=l)break;u=this.reparameterize(i,n,h,d),l=f.error}var _=a[o-1].subtract(a[o+1]);this.fitCubic(t,e,i,o,r,_),this.fitCubic(t,e,o,n,_.negate(),s)}else{var g=a[i],v=a[n],p=g.getDistance(v)/3;this.addCurve(t,[g,g.add(r.normalize(p)),v.add(s.normalize(p)),v])}},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new A(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,i,n,r){
for(var s=1e-12,a=Math.abs,o=this.points,h=o[t],l=o[e],u=[[0,0],[0,0]],c=[0,0],d=0,f=e-t+1;d<f;d++){var _=i[d],g=1-_,v=3*_*g,p=g*g*g,m=v*g,w=v*_,y=_*_*_,b=n.normalize(m),x=r.normalize(w),S=o[t+d].subtract(h.multiply(p+m)).subtract(l.multiply(w+y));u[0][0]+=b.dot(b),u[0][1]+=b.dot(x),u[1][0]=u[0][1],u[1][1]+=x.dot(x),c[0]+=b.dot(S),c[1]+=x.dot(S)}var C,k,z=u[0][0]*u[1][1]-u[1][0]*u[0][1];if(a(z)>s){var P=u[0][0]*c[1]-u[1][0]*c[0];C=(c[0]*u[1][1]-c[1]*u[0][1])/z,k=P/z}else{
var I=u[0][0]+u[0][1],M=u[1][0]+u[1][1];C=k=a(I)>s?c[0]/I:a(M)>s?c[1]/M:0}var T,A,O=l.getDistance(h),L=s*O;if(C<L||k<L)C=k=O/3;else{var N=l.subtract(h);T=n.normalize(C),A=r.normalize(k),T.dot(N)-A.dot(N)>O*O&&(C=k=O/3,T=A=null)}return[h,h.add(T||n.normalize(C)),l.add(A||r.normalize(k)),l]},reparameterize:function(t,e,i,n){for(var r=t;r<=e;r++)i[r-t]=this.findRoot(n,this.points[r],i[r-t]);r=1;for(var s=i.length;r<s;r++)if(i[r]<=i[r-1])return!1;return!0},findRoot:function(t,e,i){
for(var n=[],r=[],s=0;s<=2;s++)n[s]=t[s+1].subtract(t[s]).multiply(3);for(s=0;s<=1;s++)r[s]=n[s+1].subtract(n[s]).multiply(2);var a=this.evaluate(3,t,i),o=this.evaluate(2,n,i),h=this.evaluate(1,r,i),l=a.subtract(e),u=o.dot(o)+l.dot(h);return d.isZero(u)?i:i-l.dot(o)/u},evaluate:function(t,e,i){for(var n=e.slice(),r=1;r<=t;r++)for(var s=0;s<=t-r;s++)n[s]=n[s].multiply(1-i).add(n[s+1].multiply(i));return n[0]},chordLengthParameterize:function(t,e){
for(var i=[0],n=t+1;n<=e;n++)i[n-t]=i[n-t-1]+this.points[n].getDistance(this.points[n-1]);n=1;for(var r=e-t;n<=r;n++)i[n]/=i[r];return i},findMaxError:function(t,e,i,n){for(var r=Math.floor((e-t+1)/2),s=0,a=t+1;a<e;a++){var o=this.evaluate(3,i,n[a-t]).subtract(this.points[a]),h=o.x*o.x+o.y*o.y;h>=s&&(s=h,r=a)}return{error:s,index:r}}}),j=S.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){
this._content="",this._lines=[];var i=t&&o.isPlainObject(t)&&t.x===e&&t.y===e;this._initialize(i&&t,!i&&_.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(265)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",
getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),q=j.extend({_class:"PointText",initialize:function(){j.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new g(t.x,t.y,this,"setPoint")},setPoint:function(){var t=_.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,i){if(this._content){this._setStyles(t,e,i);var n=this._lines,r=this._style,s=r.hasFill(),a=r.hasStroke(),o=r.getLeading(),h=t.shadowColor
;t.font=r.getFontStyle(),t.textAlign=r.getJustification();for(var l=0,u=n.length;l<u;l++){t.shadowColor=h;var c=n[l];s&&(t.fillText(c,0,0),t.shadowColor="rgba(0,0,0,0)"),a&&t.strokeText(c,0,0),t.translate(0,o)}}},_getBounds:function(t){var e=this._style,i=this._lines,n=i.length,r=e.getJustification(),s=e.getLeading(),a=this.getView().getTextWidth(e.getFontStyle(),i),o=0;"left"!==r&&(o-=a/("center"===r?2:1));var h=new m(o,n?-.75*s:0,a,n*s);return t?t._transformBounds(h,h):h}
}),V=o.extend(new function(){function t(t){var i,n=t.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);if(n){i=[0,0,0];for(var a=0;a<3;a++){var o=n[a+1];i[a]=parseInt(1==o.length?o+o:o,16)/255}}else if(n=t.match(/^rgba?\((.*)\)$/)){a=0;for(var h=(i=n[1].split(",")).length;a<h;a++){o=+i[a];i[a]=a<3?o/255:o}}else if(s){var l=r[t];if(!l){e||((e=it.getContext(1,1)).globalCompositeOperation="copy"),e.fillStyle="rgba(0,0,0,0)",e.fillStyle=t,e.fillRect(0,0,1,1);var u=e.getImageData(0,0,1,1).data
;l=r[t]=[u[0]/255,u[1]/255,u[2]/255]}i=l.slice()}else i=[0,0,0];return i}var e,i={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},r={},a=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],h={"rgb-hsb":function(t,e,i){var n=Math.max(t,e,i),r=n-Math.min(t,e,i);return[0===r?0:60*(n==t?(e-i)/r+(e<i?6:0):n==e?(i-t)/r+2:(t-e)/r+4),0===n?0:r/n,n]},"hsb-rgb":function(t,e,i){
var n,r=(t=(t/60%6+6)%6)-(n=Math.floor(t)),s=[i,i*(1-e),i*(1-e*r),i*(1-e*(1-r))];return[s[(n=a[n])[0]],s[n[1]],s[n[2]]]},"rgb-hsl":function(t,e,i){var n=Math.max(t,e,i),r=Math.min(t,e,i),s=n-r,a=0===s,o=(n+r)/2;return[a?0:60*(n==t?(e-i)/s+(e<i?6:0):n==e?(i-t)/s+2:(t-e)/s+4),a?0:o<.5?s/(n+r):s/(2-n-r),o]},"hsl-rgb":function(t,e,i){if(0===e)return[i,i,i];for(var n=[(t=(t/360%1+1)%1)+1/3,t,t-1/3],r=i<.5?i*(1+e):i+e-i*e,s=2*i-r,a=[],o=0;o<3;o++){var h=n[o];h<0&&(h+=1),h>1&&(h-=1),
a[o]=6*h<1?s+6*(r-s)*h:2*h<1?r:3*h<2?s+(r-s)*(2/3-h)*6:s}return a},"rgb-gray":function(t,e,i){return[.2989*t+.587*e+.114*i]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return o.each(i,function(t,e){n[e]=[],o.each(t,function(t,r){var s=o.capitalize(t),a=/^(hue|saturation)$/.test(t),h=n[e][r]="gradient"===t?function(t){var e=this._components[0]
;return e!==(t=Z.read(Array.isArray(t)?t:arguments,0,{readNull:!0}))&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:"gradient"===e?function(){return _.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:t};this["get"+s]=function(){return this._type===e||a&&/^hs[bl]$/.test(this._type)?this._components[r]:this._convert(e)[r]},this["set"+s]=function(t){this._type===e||a&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(e),
this._properties=i[e],this._type=e),this._components[r]=h.call(this,t),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function l(e){var r,s,a,h,u=arguments,c=this.__read,d=0;Array.isArray(e)&&(e=(u=e)[0]);var f=null!=e&&typeof e;if("string"===f&&e in i&&(r=e,e=u[1],Array.isArray(e)?(s=e,a=u[2]):(c&&(d=1),u=o.slice(u,1),f=typeof e)),!s){if(h="number"===f?u:"object"===f&&null!=e.length?e:null){r||(r=h.length>=3?"rgb":"gray");var _=i[r].length;a=h[_],
c&&(d+=h===arguments?_+(null!=a?1:0):1),h.length>_&&(h=o.slice(h,0,_))}else if("string"===f)r="rgb",4===(s=t(e)).length&&(a=s[3],s.length--);else if("object"===f)if(e.constructor===l){if(r=e._type,s=e._components.slice(),a=e._alpha,"gradient"===r)for(var g=1,v=s.length;g<v;g++){var p=s[g];p&&(s[g]=p.clone())}}else if(e.constructor===Z)r="gradient",h=u;else{var m=i[r="hue"in e?"lightness"in e?"hsl":"hsb":"gradient"in e||"stops"in e||"radial"in e?"gradient":"gray"in e?"gray":"rgb"],w=n[r]
;this._components=s=[];for(g=0,v=m.length;g<v;g++){null==(y=e[m[g]])&&!g&&"gradient"===r&&"stops"in e&&(y={stops:e.stops,radial:e.radial}),null!=(y=w[g].call(this,y))&&(s[g]=y)}a=e.alpha}c&&r&&(d=1)}if(this._type=r||"rgb",!s){this._components=s=[];for(g=0,v=(w=n[this._type]).length;g<v;g++){var y;null!=(y=w[g].call(this,h&&h[g]))&&(s[g]=y)}}return this._components=s,this._properties=i[this._type],this._alpha=a,c&&(this.__read=d),this},set:"#initialize",_serialize:function(t,e){
var i=this.getComponents();return o.serialize(/^(gray|rgb)$/.test(this._type)?i:[this._type].concat(i),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65)},_convert:function(t){var e;return this._type===t?this._components.slice():(e=h[this._type+"-"+t])?e.apply(this,this._components):h["rgb-"+t].apply(this,h[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new V(t,this._convert(t),this._alpha)},getType:function(){return this._type
},setType:function(t){this._components=this._convert(t),this._properties=i[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=o.isPlainValue(t,!0)?V.read(arguments):t
;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&o.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],i="gradient"===this._type,n=c.instance,r=0,s=t.length;r<s;r++){var a=this._components[r];null!=a&&e.push(t[r]+": "+(i?a:n.number(a)))}return null!=this._alpha&&e.push("alpha: "+n.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){function e(t){return Math.round(255*(t<0?0:t>1?1:t))}
var i=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha;return i=[e(i[0]),e(i[1]),e(i[2])],n<1&&i.push(n<0?0:n),t?"#"+((1<<24)+(i[0]<<16)+(i[1]<<8)+i[2]).toString(16).slice(1):(4==i.length?"rgba(":"rgb(")+i.join(",")+")"},toCanvasStyle:function(t,e){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var i,n=this._components,r=n[0],s=r._stops,a=n[1],o=n[2],h=n[3],l=e&&e.inverted();if(l&&(a=l._transformPoint(a),
o=l._transformPoint(o),h&&(h=l._transformPoint(h))),r._radial){var u=o.getDistance(a);if(h){var c=h.subtract(a);c.getLength()>u&&(h=a.add(c.normalize(u-.1)))}var d=h||a;i=t.createRadialGradient(d.x,d.y,0,a.x,a.y,u)}else i=t.createLinearGradient(a.x,a.y,o.x,o.y);for(var f=0,_=s.length;f<_;f++){var g=s[f],v=g._offset;i.addColorStop(null==v?f/(_-1):v,g._color.toCanvasStyle())}return this._canvasStyle=i},transform:function(t){if("gradient"===this._type){
for(var e=this._components,i=1,n=e.length;i<n;i++){var r=e[i];t._transformPoint(r,r,!0)}this._changed()}},statics:{_types:i,random:function(){var t=Math.random;return new V(t(),t(),t())}}})},new function(){var t={add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}};return o.each(t,function(t,e){this[e]=function(e){e=V.read(arguments)
;for(var i=this._type,n=this._components,r=e._convert(i),s=0,a=n.length;s<a;s++)r[s]=t(n[s],r[s]);return new V(i,r,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}},{})}),Z=o.extend({_class:"Gradient",initialize:function(t,e){this._id=f.get(),t&&o.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,function(){
return o.serialize([this._stops,this._radial],t,!0,e)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var i=this._owners?this._owners.indexOf(t):-1;-1!=i&&(this._owners.splice(i,1),this._owners.length||(this._owners=e))},clone:function(){for(var t=[],e=0,i=this._stops.length;e<i;e++)t[e]=this._stops[e].clone();return new Z(t,this._radial)
},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var i=this._stops;if(i)for(var n=0,r=i.length;n<r;n++)i[n]._owner=e;for(n=0,r=(i=this._stops=H.readList(t,0,{clone:!0})).length;n<r;n++)i[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){
var e=this._stops,i=t._stops,n=e.length;if(n===i.length){for(var r=0;r<n;r++)if(!e[r].equals(i[r]))return!1;return!0}}return!1}}),H=o.extend({_class:"GradientStop",initialize:function(t,i){var n=t,r=i;"object"==typeof t&&i===e&&(Array.isArray(t)&&"number"!=typeof t[0]?(n=t[0],r=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(n=t.color,r=t.offset||t.rampPoint||0)),this.setColor(n),this.setOffset(r)},clone:function(){return new H(this._color.clone(),this._offset)},_serialize:function(t,e){
var i=this._color,n=this._offset;return o.serialize(null==n?[i]:[i,n],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(65)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){var t=V.read(arguments,0,{clone:!0});t&&(t._owner=this),this._color=t,this._changed()},equals:function(t){
return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),U=o.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new _,selectedColor:null},i=o.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=o.set({},i,{fillColor:new V
}),r={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},s={beans:!0},a={_class:"Style",beans:!0,initialize:function(e,r,s){this._values={},this._owner=r,this._project=r&&r._project||s||paper.project,this._defaults=!r||r instanceof C?i:r instanceof j?n:t,e&&this.set(e)}};return o.each(i,function(t,i){var n=/Color$/.test(i),h="shadowOffset"===i,l=o.capitalize(i),u=r[i],c="set"+l,d="get"+l
;a[c]=function(t){var r=this._owner,s=r&&r._children;if(s&&s.length>0&&!(r instanceof D))for(var a=0,o=s.length;a<o;a++)s[a]._style[c](t);else if(i in this._defaults){var h=this._values[i];h!==t&&(n&&(h&&h._owner!==e&&(h._owner=e),t&&t.constructor===V&&(t._owner&&(t=t.clone()),t._owner=r)),this._values[i]=t,r&&r._changed(u||65))}},a[d]=function(t){var r,s=this._owner,a=s&&s._children
;if(i in this._defaults&&(!a||!a.length||t||s instanceof D))if((r=this._values[i])===e)(r=this._defaults[i])&&r.clone&&(r=r.clone());else{var l=n?V:h?_:null;!l||r&&r.constructor===l||(this._values[i]=r=l.read([r],0,{readNull:!0,clone:!0}),r&&n&&(r._owner=s))}else if(a)for(var u=0,c=a.length;u<c;u++){var f=a[u]._style[d]();if(u){if(!o.equals(r,f))return e}else r=f}return r},s[d]=function(t){return this._style[d](t)},s[c]=function(t){this._style[c](t)}}),o.each({Font:"FontFamily",
WindingRule:"FillRule"},function(t,e){var i="get"+e,n="set"+e;a[i]=s[i]="#get"+t,a[n]=s[n]="#set"+t}),S.inject(s),a},{set:function(t){var e=t instanceof U,i=e?t._values:t;if(i)for(var n in i)if(n in this._defaults){var r=i[n];this[n]=r&&e&&r.clone?r.clone():r}},equals:function(t){function i(t,i,n){var r=t._values,s=i._values,a=i._defaults;for(var h in r){var l=r[h],u=s[h];if(!(n&&h in s||o.equals(l,u===e?a[h]:u)))return!1}return!0}
return t===this||t&&this._class===t._class&&i(this,t)&&i(t,this,!0)||!1},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize()
;return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function Ct(){var t=Ct.base.call(this),e=this.getFontSize();return/pt|em|%|px/.test(e)&&(e=this.getView().getPixelSize(e)),null!=t?t:1.2*e}}),G=new function(){function t(t,e,i,n){for(var r=["","webkit","moz","Moz","ms","o"],s=e[0].toUpperCase()+e.substring(1),a=0;a<6;a++){var o=r[a],h=o?o+s:e;if(h in t){if(!i)return t[h];t[h]=n;break}}}return{
getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,i=e&&e.defaultView;return i&&i.getComputedStyle(t,"")},getBounds:function(t,e){var i,n=t.ownerDocument,r=n.body,s=n.documentElement;try{i=t.getBoundingClientRect()}catch(l){i={left:0,top:0,width:0,height:0}}var a=i.left-(s.clientLeft||r.clientLeft||0),o=i.top-(s.clientTop||r.clientTop||0);if(!e){var h=n.defaultView;a+=h.pageXOffset||s.scrollLeft||r.scrollLeft,o+=h.pageYOffset||s.scrollTop||r.scrollTop}
return new m(a,o,i.width,i.height)},getViewportBounds:function(t){var e=t.ownerDocument,i=e.defaultView,n=e.documentElement;return new m(0,0,i.innerWidth||n.clientWidth,i.innerHeight||n.clientHeight)},getOffset:function(t,e){return G.getBounds(t,e).getPoint()},getSize:function(t){return G.getBounds(t,!0).getSize()},isInvisible:function(t){return G.getSize(t).equals(new v(0,0))},isInView:function(t){return!G.isInvisible(t)&&G.getViewportBounds(t).intersects(G.getBounds(t,!0))},
isInserted:function(t){return a.body.contains(t)},getPrefixed:function(e,i){return e&&t(e,i)},setPrefixed:function(e,i,n){if("object"==typeof i)for(var r in i)t(e,r,!0,i[r]);else t(e,i,!0,n)}}},W={add:function(t,e){if(t)for(var i in e)for(var n=e[i],r=i.split(/[\s,]+/g),s=0,a=r.length;s<a;s++)t.addEventListener(r[s],n,!1)},remove:function(t,e){if(t)for(var i in e)for(var n=e[i],r=i.split(/[\s,]+/g),s=0,a=r.length;s<a;s++)t.removeEventListener(r[s],n,!1)},getPoint:function(t){
var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new _(e.pageX||e.clientX+a.documentElement.scrollLeft,e.pageY||e.clientY+a.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return W.getPoint(t).subtract(G.getOffset(e||W.getTarget(t)))}};W.requestAnimationFrame=new function(){function t(){var e=r;r=[]
;for(var s=0,a=e.length;s<a;s++)e[s]();(n=i&&r.length)&&i(t)}var e,i=G.getPrefixed(s,"requestAnimationFrame"),n=!1,r=[];return function(s){r.push(s),i?n||(i(t),n=!0):e||(e=setInterval(t,1e3/60))}};var J=o.extend(h,{_class:"View",initialize:function kt(t,e){function i(t){return e[t]||parseInt(e.getAttribute(t),10)}function n(){var t=G.getSize(e);return t.isNaN()||t.isZero()?new v(i("width"),i("height")):t}var r;if(s&&e){this._id=e.getAttribute("id"),
null==this._id&&e.setAttribute("id",this._id="view-"+kt._id++),W.add(e,this._viewEvents);var o="none";if(G.setPrefixed(e.style,{userDrag:o,userSelect:o,touchCallout:o,contentZooming:o,tapHighlightColor:"rgba(0,0,0,0)"}),l.hasAttribute(e,"resize")){var h=this;W.add(s,this._windowEvents={resize:function(){h.setViewSize(n())}})}if(r=n(),l.hasAttribute(e,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var u=this._stats.domElement,c=u.style,d=G.getOffset(e);c.position="absolute",
c.left=d.x+"px",c.top=d.y+"px",a.body.appendChild(u)}}else r=new v(e),e=null;this._project=t,this._scope=t._scope,this._element=e,this._pixelRatio||(this._pixelRatio=s&&s.devicePixelRatio||1),this._setElementSize(r.width,r.height),this._viewSize=r,kt._views.push(this),kt._viewsById[this._id]=this,(this._matrix=new y)._owner=this,this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!paper.agent.node,this._needsUpdate=!1},remove:function(){
if(!this._project)return!1;J._focused===this&&(J._focused=null),J._views.splice(J._views.indexOf(this),1),delete J._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),W.remove(this._element,this._viewEvents),W.remove(s,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:o.each(S._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},
uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;W.requestAnimationFrame(function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;G.getPrefixed(a,"hidden")&&"true"!==l.getAttribute(e,"keepalive")||!G.isInView(e)||t._handleFrame()}
t._autoUpdate&&t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){paper=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new o({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var i=this._frameItems;e?(i[t._id]={item:t,time:0,count:0},
1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete i[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var i=this._frameItems[e];i.item.emit("frame",new o(t,{time:i.time+=t.delta,count:i.count++}))}},_changed:function(){this._project._changed(2049),this._bounds=this._decomposed=e},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},
getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new p(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=v.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var i=this._element;i&&(i.width!==t&&(i.width=t),i.height!==e&&(i.height=e))},
getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new m(new _,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return G.isInView(this._element)},isInserted:function(){return G.isInserted(this._element)},getPixelSize:function(t){var e,i=this._element;if(i){var n=i.parentNode,r=a.createElement("div");r.style.fontSize=t,n.appendChild(r),e=parseFloat(G.getStyles(r).fontSize),n.removeChild(r)
}else e=parseFloat(e);return e},getTextWidth:function(){return 0}},o.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var i=(e?o:_).read(arguments),n=_.read(arguments,0,{readNull:!0});return this.transform((new y)[t](i,n||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new y;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){
return this.getBounds().getCenter()},setCenter:function(){var t=_.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose(),e=t&&t.scaling;return e?(e.x+e.y)/2:0},setZoom:function(t){this.transform((new y).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){var t=this._decompose();return t&&t.rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){
var t=this._decompose(),i=t&&t.scaling;return i?new g(i.x,i.y,this,"setScaling"):e},setScaling:function(){var t=this.getScaling(),e=_.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(_.read(arguments).negate())}}),{projectToView:function(){
return this._matrix._transformPoint(_.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(_.read(arguments))},getEventPoint:function(t){return this.viewToProject(W.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return a&&"string"==typeof e&&(e=a.getElementById(e)),new(s?K:J)(t,e)}}},new function(){function t(t){var e=W.getTarget(t);return e.getAttribute&&J._viewsById[e.getAttribute("id")]}function e(){var t=J._focused
;if(!t||!t.isVisible()){J._focused=null;for(var e=0,i=J._views.length;e<i;e++)if((t=J._views[e]).isVisible()){J._focused=h=t;break}}}function i(t,e,i){t._handleMouseEvent("mousemove",e,i)}function n(t,e,i,n,r,s,a){function o(t,i){if(t.responds(i)){if(h||(h=new Q(i,n,r,e||t,s?r.subtract(s):null)),t.emit(i,h)&&(k=!0,h.prevented&&(z=!0),h.stopped))return l=!0}else{var a=P[i];if(a)return o(t,a)}}for(var h,l=!1;t&&t!==a&&!o(t,i);)t=t._parent;return l}function r(t,e,i,r,s,a){
return t._project.removeOn(i),z=k=!1,b&&n(b,null,i,r,s,a)||e&&e!==b&&!e.isDescendant(b)&&n(e,null,P[i]||i,r,s,a,b)||n(t,b||e||t,i,r,s,a)}if(s){var o,h,l,u,c,d=!1,f=!1,_=s.navigator;_.pointerEnabled||_.msPointerEnabled?(l="pointerdown MSPointerDown",u="pointermove MSPointerMove",c="pointerup pointercancel MSPointerUp MSPointerCancel"):(l="touchstart",u="touchmove",c="touchend touchcancel","ontouchstart"in s&&_.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(l+=" mousedown",
u+=" mousemove",c+=" mouseup"));var g={},v={mouseout:function(t){var e=J._focused,n=W.getRelatedTarget(t);if(e&&(!n||"HTML"===n.nodeName)){var r=W.getOffset(t,e._element),s=r.x,a=Math.abs,o=a(s),h=o-(1<<25);r.x=a(h)<o?h*(s<0?-1:1):s,i(e,t,e.viewToProject(r))}},scroll:e};g[l]=function(e){var i=J._focused=t(e);d||(d=!0,i._handleMouseEvent("mousedown",e))},v[u]=function(n){var r=J._focused;if(!f){var s=t(n);s?r!==s&&(r&&i(r,n),o||(o=r),r=J._focused=h=s):h&&h===r&&(o&&!o.isInserted()&&(o=null),
r=J._focused=o,o=null,e())}r&&i(r,n)},v[l]=function(){f=!0},v[c]=function(t){var e=J._focused;e&&d&&e._handleMouseEvent("mouseup",t),f=d=!1},W.add(a,v),W.add(s,{load:e});var p,m,w,y,b,x,S,C,k=!1,z=!1,P={doubleclick:"click",mousedrag:"mousemove"},I=!1,M={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:g,_handleMouseEvent:function(t,e,i){function s(t){
return a.virtual[t]||u.responds(t)||l&&l.responds(t)}var a=this._itemEvents,o=a.native[t],h="mousemove"===t,l=this._scope.tool,u=this;h&&d&&s("mousedrag")&&(t="mousedrag"),i||(i=this.getEventPoint(e));var c=this.getBounds().contains(i),f=o&&c&&u._project.hitTest(i,{tolerance:0,fill:!0,stroke:!0}),_=f&&f.item||null,g=!1,v={};v[t.substr(5)]=!0,o&&_!==y&&(y&&n(y,null,"mouseleave",e,i),_&&n(_,null,"mouseenter",e,i),y=_),I^c&&(n(this,null,c?"mouseenter":"mouseleave",e,i),c?this:null,g=!0),
!c&&!v.drag||i.equals(m)||(r(this,_,h?t:"mousemove",e,i,m),g=!0),I=c,(v.down&&c||v.up&&p)&&(r(this,_,t,e,i,p),v.down?(C=_===x&&Date.now()-S<300,w=x=_,b=!z&&_,p=i):v.up&&(z||_!==w||(S=Date.now(),r(this,_,C?"doubleclick":"click",e,i,p),C=!1),w=b=null),I=!1,g=!0),m=i,g&&l&&(k=l._handleMouseEvent(t,e,i,v)||k),(k&&!v.move||v.down&&s("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,i,n){function r(r){r.responds(t)&&(paper=a,r.emit(t,s=s||new Y(t,e,i,n)))}var s,a=this._scope,o=a.tool
;this.isVisible()&&(r(this),o&&o.responds(t)&&r(o))},_countItemEvent:function(t,e){var i=this._itemEvents,n=i.native,r=i.virtual;for(var s in M)n[s]=(n[s]||0)+(M[s][t]||0)*e;r[t]=(r[t]||0)+e},statics:{updateFocus:e}}}}),K=J.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof s.HTMLCanvasElement)){var i=v.read(arguments,1);if(i.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+o.slice(arguments,1));e=it.getCanvas(i)}
var n=this._context=e.getContext("2d");if(n.save(),this._pixelRatio=1,!/^off|false$/.test(l.getAttribute(e,"hidpi"))){var r=s.devicePixelRatio||1,a=G.getPrefixed(n,"backingStorePixelRatio")||1;this._pixelRatio=r/a}J.call(this,t,e),this._needsUpdate=!0},remove:function zt(){return this._context.restore(),zt.base.call(this)},_setElementSize:function Pt(t,e){var i=this._pixelRatio;if(Pt.base.call(this,t*i,e*i),1!==i){var n=this._element,r=this._context;if(!l.hasAttribute(n,"resize")){var s=n.style
;s.width=t+"px",s.height=e+"px"}r.restore(),r.save(),r.scale(i,i)}},getPixelSize:function It(t){var e,i=paper.agent;if(i&&i.firefox)e=It.base.call(this,t);else{var n=this._context,r=n.font;n.font=t+" serif",e=parseFloat(n.font),n.font=r}return e},getTextWidth:function(t,e){var i=this._context,n=i.font,r=0;i.font=t;for(var s=0,a=e.length;s<a;s++)r=Math.max(r,i.measureText(e[s]).width);return i.font=n,r},update:function(){if(!this._needsUpdate)return!1
;var t=this._project,e=this._context,i=this._viewSize;return e.clearRect(0,0,i.width+1,i.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),$=o.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},
getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return X.modifiers}}),Y=$.extend({_class:"KeyEvent",initialize:function(t,e,i,n){this.type=t,this.event=e,this.key=i,this.character=n},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),X=new function(){},Q=$.extend({_class:"MouseEvent",initialize:function(t,e,i,n,r){this.type=t,this.event=e,this.point=i,this.target=n,
this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),tt=$.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,i){this.tool=t,this.type=e,this.event=i},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){
return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){
return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,i=e._parent;/^(Group|CompoundPath)$/.test(i._class);)e=i,
i=i._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),et=(u.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){u.call(this),this._moveCount=-1,this._downCount=-1,
this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){
this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,i,n){function r(t,e){var r=i,s=a?c._point:c._downPoint||r;if(a){if(c._moveCount&&r.equals(s))return!1;if(s&&(null!=t||null!=e)){var o=r.subtract(s),h=o.getLength();if(h<(t||0))return!1;e&&(r=s.add(o.normalize(Math.min(h,e))))}c._moveCount++}return c._point=r,c._lastPoint=s||r,n.down&&(c._moveCount=-1,c._downPoint=r,c._downCount++),!0}function s(){o&&(u=c.emit(t,new tt(c,t,e))||u)}paper=this._scope,
n.drag&&!this.responds(t)&&(t="mousemove");var a=n.move||n.drag,o=this.responds(t),h=this.minDistance,l=this.maxDistance,u=!1,c=this;if(n.down)r(),s();else if(n.up)r(null,l),s();else if(o)for(;r(h,l);)s();return u}}),{request:function(e){var i=new t.XMLHttpRequest;return i.open((e.method||"get").toUpperCase(),e.url,o.pick(e.async,!0)),e.mimeType&&i.overrideMimeType(e.mimeType),i.onload=function(){var t=i.status;0===t||200===t?e.onLoad&&e.onLoad.call(i,i.responseText):i.onerror()},
i.onerror=function(){var t=i.status,n='Could not load "'+e.url+'" (Status: '+t+")";if(!e.onError)throw new Error(n);e.onError(n,t)},i.send(null)}}),it={canvases:[],getCanvas:function(t,e){if(!s)return null;var i,n=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?i=this.canvases.pop():(i=a.createElement("canvas"),n=!1);var r=i.getContext("2d");if(!r)throw new Error("Canvas "+i+" is unable to provide a 2D context.")
;return i.width===t&&i.height===e?n&&r.clearRect(0,0,t+1,e+1):(i.width=t,i.height=e),r.save(),i},getContext:function(t,e){var i=this.getCanvas(t,e);return i?i.getContext("2d"):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},nt=new function(){function t(t,e,i){return.2989*t+.587*e+.114*i}function e(e,i,n,r){var s=r-t(e,i,n),a=(r=t(f=e+s,_=i+s,g=n+s),v(f,_,g)),o=p(f,_,g);if(a<0){var h=r-a;f=r+(f-r)*r/h,_=r+(_-r)*r/h,
g=r+(g-r)*r/h}if(o>255){var l=255-r,u=o-r;f=r+(f-r)*l/u,_=r+(_-r)*l/u,g=r+(g-r)*l/u}}function i(t,e,i){return p(t,e,i)-v(t,e,i)}function n(t,e,i,n){var r,s=[t,e,i],a=p(t,e,i),o=v(t,e,i);r=0===v(o=o===t?0:o===e?1:2,a=a===t?0:a===e?1:2)?1===p(o,a)?2:1:0,s[a]>s[o]?(s[r]=(s[r]-s[o])*n/(s[a]-s[o]),s[a]=n):s[r]=s[a]=0,s[o]=0,f=s[0],_=s[1],g=s[2]}var r,s,a,h,l,u,c,d,f,_,g,v=Math.min,p=Math.max,m=Math.abs,w={multiply:function(){f=l*r/255,_=u*s/255,g=c*a/255},screen:function(){f=l+r-l*r/255,
_=u+s-u*s/255,g=c+a-c*a/255},overlay:function(){f=l<128?2*l*r/255:255-2*(255-l)*(255-r)/255,_=u<128?2*u*s/255:255-2*(255-u)*(255-s)/255,g=c<128?2*c*a/255:255-2*(255-c)*(255-a)/255},"soft-light":function(){var t=r*l/255;f=t+l*(255-(255-l)*(255-r)/255-t)/255,_=(t=s*u/255)+u*(255-(255-u)*(255-s)/255-t)/255,g=(t=a*c/255)+c*(255-(255-c)*(255-a)/255-t)/255},"hard-light":function(){f=r<128?2*r*l/255:255-2*(255-r)*(255-l)/255,_=s<128?2*s*u/255:255-2*(255-s)*(255-u)/255,
g=a<128?2*a*c/255:255-2*(255-a)*(255-c)/255},"color-dodge":function(){f=0===l?0:255===r?255:v(255,255*l/(255-r)),_=0===u?0:255===s?255:v(255,255*u/(255-s)),g=0===c?0:255===a?255:v(255,255*c/(255-a))},"color-burn":function(){f=255===l?255:0===r?0:p(0,255-255*(255-l)/r),_=255===u?255:0===s?0:p(0,255-255*(255-u)/s),g=255===c?255:0===a?0:p(0,255-255*(255-c)/a)},darken:function(){f=l<r?l:r,_=u<s?u:s,g=c<a?c:a},lighten:function(){f=l>r?l:r,_=u>s?u:s,g=c>a?c:a},difference:function(){(f=l-r)<0&&(f=-f),
(_=u-s)<0&&(_=-_),(g=c-a)<0&&(g=-g)},exclusion:function(){f=l+r*(255-l-l)/255,_=u+s*(255-u-u)/255,g=c+a*(255-c-c)/255},hue:function(){n(r,s,a,i(l,u,c)),e(f,_,g,t(l,u,c))},saturation:function(){n(l,u,c,i(r,s,a)),e(f,_,g,t(l,u,c))},luminosity:function(){e(l,u,c,t(r,s,a))},color:function(){e(r,s,a,t(l,u,c))},add:function(){f=v(l+r,255),_=v(u+s,255),g=v(c+a,255)},subtract:function(){f=p(l-r,0),_=p(u-s,0),g=p(c-a,0)},average:function(){f=(l+r)/2,_=(u+s)/2,g=(c+a)/2},negation:function(){
f=255-m(255-r-l),_=255-m(255-s-u),g=255-m(255-a-c)}},y=this.nativeModes=o.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(t){this[t]=!0},{}),b=it.getContext(1,1);b&&(o.each(w,function(t,e){var i="darken"===e,n=!1;b.save();try{b.fillStyle=i?"#300":"#a00",b.fillRect(0,0,1,1),b.globalCompositeOperation=e,b.globalCompositeOperation===e&&(b.fillStyle=i?"#a00":"#300",
b.fillRect(0,0,1,1),n=b.getImageData(0,0,1,1).data[0]!==i?170:51)}catch(r){}b.restore(),y[e]=n}),it.release(b)),this.process=function(t,e,i,n,o){var v=e.canvas,p="normal"===t;if(p||y[t])i.save(),i.setTransform(1,0,0,1,0,0),i.globalAlpha=n,p||(i.globalCompositeOperation=t),i.drawImage(v,o.x,o.y),i.restore();else{var m=w[t];if(!m)return;for(var b=i.getImageData(o.x,o.y,v.width,v.height),x=b.data,S=e.getImageData(0,0,v.width,v.height).data,C=0,k=x.length;C<k;C+=4){r=S[C],l=x[C],s=S[C+1],u=x[C+1],
a=S[C+2],c=x[C+2],h=S[C+3],d=x[C+3],m();var z=h*n/255,P=1-z;x[C]=z*f+P*l,x[C+1]=z*_+P*u,x[C+2]=z*g+P*c,x[C+3]=h*n+P*d}i.putImageData(b,o.x,o.y)}}},rt=new function(){function t(t,e,r){return i(a.createElementNS(n,t),e,r)}function e(t,e){var i=o[e],n=i?t.getAttributeNS(i,e):t.getAttribute(e);return"null"===n?null:n}function i(t,e,i){for(var n in e){var r=e[n],s=o[n];"number"==typeof r&&i&&(r=i.number(r)),s?t.setAttributeNS(s,n,r):t.setAttribute(n,r)}return t}
var n="http://www.w3.org/2000/svg",r="http://www.w3.org/2000/xmlns",s="http://www.w3.org/1999/xlink",o={href:s,xlink:r,xmlns:r+"/","xmlns:xlink":r+"/"};return{svg:n,xmlns:r,xlink:s,create:t,get:e,set:i}},st=o.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{"true":"none",
"false":"non-scaling-stroke"},function(t,e){return!e&&(t instanceof B||t instanceof z||t instanceof j)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,e){
var i=o.capitalize(e),n=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:n,fromSVG:n&&o.each(n,function(t,e){this[t]=e},{}),exportFilter:t[3],get:"get"+i,set:"set"+i}},{});return new function(){function e(t,e,i){var n=new o,r=t.getTranslation();if(e){var s=(t=t._shiftless())._inverseTransform(r);n[i?"cx":"x"]=s.x,n[i?"cy":"y"]=s.y,r=null}if(!t.isIdentity()){var a=t.decompose();if(a){var h=[],l=a.rotation,u=a.scaling,c=a.skewing;r&&!r.isZero()&&h.push("translate("+C.point(r)+")"),
l&&h.push("rotate("+C.number(l)+")"),d.isZero(u.x-1)&&d.isZero(u.y-1)||h.push("scale("+C.point(u)+")"),c.x&&h.push("skewX("+C.number(c.x)+")"),c.y&&h.push("skewY("+C.number(c.y)+")"),n.transform=h.join(" ")}else n.transform="matrix("+t.getValues().join(",")+")"}return n}function n(t,i){for(var n=e(t._matrix),r=t._children,s=rt.create("g",n,C),a=0,o=r.length;a<o;a++){var h=r[a],l=w(h,i);if(l)if(h.isClipMask()){var u=rt.create("clipPath");u.appendChild(l),v(h,u,"clip"),rt.set(s,{
"clip-path":"url(#"+u.id+")"})}else s.appendChild(l)}return s}function r(t,i){var n=e(t._matrix,!0),r=t.getSize(),s=t.getImage();return n.x-=r.width/2,n.y-=r.height/2,n.width=r.width,n.height=r.height,n.href=0==i.embedImages&&s&&s.src||t.toDataURL(),rt.create("image",n,C)}function s(t,i){var n=i.matchShapes;if(n){var r=t.toShape(!1);if(r)return a(r,i)}var s,o=t._segments,h=o.length,l=e(t._matrix);if(n&&h>=2&&!t.hasHandles())if(h>2){s=t._closed?"polygon":"polyline"
;for(var u=[],c=0;c<h;c++)u.push(C.point(o[c]._point));l.points=u.join(" ")}else{s="line";var d=o[0]._point,f=o[1]._point;l.set({x1:d.x,y1:d.y,x2:f.x,y2:f.y})}else s="path",l.d=t.getPathData(null,i.precision);return rt.create(s,l,C)}function a(t){var i=t._type,n=t._radius,r=e(t._matrix,!0,"rectangle"!==i);if("rectangle"===i){i="rect";var s=t._size,a=s.width,o=s.height;r.x-=a/2,r.y-=o/2,r.width=a,r.height=o,n.isZero()&&(n=null)}return n&&("circle"===i?r.r=n:(r.rx=n.width,r.ry=n.height)),
rt.create(i,r,C)}function h(t,i){var n=e(t._matrix),r=t.getPathData(null,i.precision);return r&&(n.d=r),rt.create("path",n,C)}function l(t,i){var n=e(t._matrix,!0),r=t._definition,s=g(r,"symbol"),a=r._item,o=a.getBounds();return s||((s=rt.create("symbol",{viewBox:C.rectangle(o)})).appendChild(w(a,i)),v(r,s,"symbol")),n.href="#"+s.id,n.x+=o.x,n.y+=o.y,n.width=o.width,n.height=o.height,n.overflow="visible",rt.create("use",n,C)}function u(t){var e=g(t,"color");if(!e){
var i,n=t.getGradient(),r=n._radial,s=t.getOrigin(),a=t.getDestination();if(r){i={cx:s.x,cy:s.y,r:s.getDistance(a)};var o=t.getHighlight();o&&(i.fx=o.x,i.fy=o.y)}else i={x1:s.x,y1:s.y,x2:a.x,y2:a.y};i.gradientUnits="userSpaceOnUse",e=rt.create((r?"radial":"linear")+"Gradient",i,C);for(var h=n._stops,l=0,u=h.length;l<u;l++){var c=h[l],d=c._color,f=d.getAlpha(),_=c._offset;i={offset:null==_?l/(u-1):_},d&&(i["stop-color"]=d.toCSS(!0)),f<1&&(i["stop-opacity"]=f),e.appendChild(rt.create("stop",i,C))}
v(t,e,"color")}return"url(#"+e.id+")"}function f(t){var i=rt.create("text",e(t._matrix,!0),C);return i.textContent=t._content,i}function _(t,e,i){var n={},r=!i&&t.getParent(),s=[];return null!=t._name&&(n.id=t._name),o.each(st,function(e){var i=e.get,a=e.type,h=t[i]();if(e.exportFilter?e.exportFilter(t,h):!r||!o.equals(r[i](),h)){if("color"===a&&null!=h){var l=h.getAlpha();l<1&&(n[e.attribute+"-opacity"]=l)}
"style"===a?s.push(e.attribute+": "+h):n[e.attribute]=null==h?"none":"color"===a?h.gradient?u(h,t):h.toCSS(!0):"array"===a?h.join(","):"lookup"===a?e.toSVG[h]:h}}),s.length&&(n.style=s.join(";")),1===n.opacity&&delete n.opacity,t._visible||(n.visibility="hidden"),rt.set(e,n,C)}function g(t,e){return k||(k={ids:{},svgs:{}}),t&&k.svgs[e+"-"+t._uuid||(t._uuid=i())]}function v(t,e,n){k||g();var r=t._uuid||(t._uuid=i());e.id=n+"-"+r,k.svgs[n+"-"+t._uuid]=e}function p(e,i){var n=e,r=null;if(k){
for(var s in n="svg"===e.nodeName.toLowerCase()&&e,k.svgs)r||(n||(n=rt.create("svg")).appendChild(e),r=n.insertBefore(rt.create("defs"),n.firstChild)),r.appendChild(k.svgs[s]);k=null}return i.asString?(new t.XMLSerializer).serializeToString(n):n}function w(t,e,i){var n=z[t._class],r=n&&n(t,e);if(r){var s=e.onExport;s&&(r=s(t,r,e)||r);var a=JSON.stringify(t._data);a&&"{}"!==a&&"null"!==a&&r.setAttribute("data-paper-data",a)}return r&&_(t,r,i)}function b(t){return t||(t={}),C=new c(t.precision),t}
var C,k,z={Group:n,Layer:n,Raster:r,Path:s,Shape:a,CompoundPath:h,SymbolItem:l,PointText:f};S.inject({exportSVG:function(t){return p(w(this,t=b(t),!0),t)}}),x.inject({exportSVG:function(t){t=b(t);var i=this._children,n=this.getView(),r=o.pick(t.bounds,"view"),s=t.matrix||"view"===r&&n._matrix,a=s&&y.read([s]),h="view"===r?new m([0,0],n.getViewSize()):"content"===r?S._getBounds(i,a,{stroke:!0}).rect:m.read([r],0,{readNull:!0}),l={version:"1.1",xmlns:rt.svg,"xmlns:xlink":rt.xlink}
;h&&(l.width=h.width,l.height=h.height,(h.x||h.y)&&(l.viewBox=C.rectangle(h)));var u=rt.create("svg",l,C),c=u;a&&!a.isIdentity()&&(c=u.appendChild(rt.create("g",e(a),C)));for(var d=0,f=i.length;d<f;d++)c.appendChild(w(i[d],t,!0));return p(u,t)}})},new function(){function i(t,e,i,n,r){var s=rt.get(t,e),a=null==s?n?null:i?"":0:i?s:parseFloat(s);return/%\s*$/.test(s)?a/100*(r?1:T[/x|^width/.test(e)?"width":"height"]):a}function n(t,e,n,r,s){return e=i(t,e||"x",!1,r,s),n=i(t,n||"y",!1,r,s),
!r||null!=e&&null!=n?new _(e,n):null}function r(t,e,n,r,s){return e=i(t,e||"width",!1,r,s),n=i(t,n||"height",!1,r,s),!r||null!=e&&null!=n?new v(e,n):null}function h(t,e,i){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?b(t)||t:"lookup"===e?i[t]:t}function l(t,e,i,n){var r=t.childNodes,s="clippath"===e,a="defs"===e,o=new C,h=o._project,l=h._currentStyle,u=[];if(s||a||(o=w(o,t,n),h._currentStyle=o._style.clone()),
n)for(var c=t.querySelectorAll("defs"),d=0,f=c.length;d<f;d++)k(c[d],i,!1);for(d=0,f=r.length;d<f;d++){var _,g=r[d];1!==g.nodeType||/^defs$/i.test(g.nodeName)||!(_=k(g,i,!1))||_ instanceof M||u.push(_)}return o.addChildren(u),s&&(o=w(o.reduce(),t,n)),h._currentStyle=l,(s||a)&&(o.remove(),o=null),o}function u(t,e){for(var i=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),n=[],r=0,s=i.length;r<s;r+=2)n.push(new _(parseFloat(i[r]),parseFloat(i[r+1])));var a=new E(n)
;return"polygon"===e&&a.closePath(),a}function c(t){return B.create(t.getAttribute("d"))}function d(t,e){var r,s=(i(t,"href",!0)||"").substring(1),a="radialgradient"===e;if(s)(r=A[s].getGradient())._radial^a&&((r=r.clone())._radial=a);else{for(var o=t.childNodes,h=[],l=0,u=o.length;l<u;l++){var c=o[l];1===c.nodeType&&h.push(w(new H,c))}r=new Z(h,a)}var d,f,_,g="userSpaceOnUse"!==i(t,"gradientUnits",!0);return a?(f=(d=n(t,"cx","cy",!1,g)).add(i(t,"r",!1,!1,g),0),
_=n(t,"fx","fy",!0,g)):(d=n(t,"x1","y1",!1,g),f=n(t,"x2","y2",!1,g)),w(new V(r,d,f,_),t)._scaleToBounds=g,null}function f(t,e,i,n){if(t.transform){for(var r=(n.getAttribute(i)||"").split(/\)\s*/g),s=new y,a=0,o=r.length;a<o;a++){var h=r[a];if(!h)break;for(var l=h.split(/\(\s*/),u=l[0],c=l[1].split(/[\s,]+/g),d=0,f=c.length;d<f;d++)c[d]=parseFloat(c[d]);switch(u){case"matrix":s.append(new y(c[0],c[1],c[2],c[3],c[4],c[5]));break;case"rotate":s.rotate(c[0],c[1],c[2]);break;case"translate":
s.translate(c[0],c[1]);break;case"scale":s.scale(c);break;case"skewX":s.skew(c[0],0);break;case"skewY":s.skew(0,c[0])}}t.transform(s)}}function g(t,e,i){var n="fill-opacity"===i?"getFillColor":"getStrokeColor",r=t[n]&&t[n]();r&&r.setAlpha(parseFloat(e))}function p(t,i,n){var r=t.attributes[i],s=r&&r.value;if(!s){var a=o.camelize(i);(s=t.style[a])||n.node[a]===n.parent[a]||(s=n.node[a])}return s?"none"===s?null:s:e}function w(t,i,n){if(i.style){var r=i.parentNode,s={node:G.getStyles(i)||{},
parent:!n&&!/^defs$/i.test(r.tagName)&&G.getStyles(r)||{}};o.each(L,function(n,r){var a=p(i,r,s);t=a!==e&&n(t,a,r,i,s)||t})}return t}function b(t){var e=t&&t.match(/\((?:["'#]*)([^"')]+)/),i=e&&e[1],n=i&&A[s?i.replace(s.location.href.split("#")[0]+"#",""):i];return n&&n._scaleToBounds&&((n=n.clone())._scaleToBounds=!0),n}function k(t,e,i){var n,s,h,l=t.nodeName.toLowerCase(),u="#document"!==l,c=a.body;i&&u&&(T=r(t,null,null,!0)||paper.getView().getSize(),n=rt.create("svg",{
style:"stroke-width: 1px; stroke-miterlimit: 10"}),s=t.parentNode,h=t.nextSibling,n.appendChild(t),c.appendChild(n));var d=paper.settings,f=d.applyMatrix,_=d.insertItems;d.applyMatrix=!1,d.insertItems=!1;var g=O[l],v=g&&g(t,l,e,i)||null;if(d.insertItems=_,d.applyMatrix=f,v){!u||v instanceof C||(v=w(v,t,i));var p=e.onImport,m=u&&t.getAttribute("data-paper-data");p&&(v=p(t,v,e)||v),e.expandShapes&&v instanceof z&&(v.remove(),v=v.toPath()),m&&(v._data=JSON.parse(m))}return n&&(c.removeChild(n),
s&&(h?s.insertBefore(t,h):s.appendChild(t))),i&&(A={},v&&o.pick(e.applyMatrix,f)&&v.matrix.apply(!0,!0)),v}function I(i,n,r){function s(s){try{var a="object"==typeof s?s:(new t.DOMParser).parseFromString(s,"image/svg+xml");if(!a.nodeName)throw a=null,new Error("Unsupported SVG source: "+i);paper=h,l=k(a,n,!0),n&&!1===n.insert||r._insertItem(e,l);var u=n.onLoad;u&&u(l,s)}catch(c){o(c)}}function o(t,e){var i=n.onError;if(!i)throw new Error(t);i(t,e)}if(!i)return null;n="function"==typeof n?{
onLoad:n}:n||{};var h=paper,l=null;if("string"!=typeof i||/^.*</.test(i)){if("undefined"!=typeof File&&i instanceof File){var u=new FileReader;return u.onload=function(){s(u.result)},u.onerror=function(){o(u.error)},u.readAsText(i)}s(i)}else{var c=a.getElementById(i);c?s(c):et.request({url:i,async:!0,onLoad:s,onError:o})}return l}var T,A={},O={"#document":function(t,e,i,n){for(var r=t.childNodes,s=0,a=r.length;s<a;s++){var o=r[s];if(1===o.nodeType)return k(o,i,n)}},g:l,svg:l,clippath:l,
polygon:u,polyline:u,path:c,lineargradient:d,radialgradient:d,image:function(t){var e=new P(i(t,"href",!0));return e.on("load",function(){var e=r(t);this.setSize(e);var i=this._matrix._transformPoint(n(t).add(e.divide(2)));this.translate(i)}),e},symbol:function(t,e,i,n){return new M(l(t,e,i,n),!0)},defs:l,use:function(t){var e=(i(t,"href",!0)||"").substring(1),r=A[e],s=n(t);return r?r instanceof M?r.place(s):r.clone().translate(s):null},circle:function(t){
return new z.Circle(n(t,"cx","cy"),i(t,"r"))},ellipse:function(t){return new z.Ellipse({center:n(t,"cx","cy"),radius:r(t,"rx","ry")})},rect:function(t){return new z.Rectangle(new m(n(t),r(t)),r(t,"rx","ry"))},line:function(t){return new E.Line(n(t,"x1","y1"),n(t,"x2","y2"))},text:function(t){var e=new q(n(t).add(n(t,"dx","dy")));return e.setContent(t.textContent.trim()||""),e}},L=o.set(o.each(st,function(t){this[t.attribute]=function(e,i){if(e[t.set]&&(e[t.set](h(i,t.type,t.fromSVG)),
"color"===t.type)){var n=e[t.get]();if(n&&n._scaleToBounds){var r=e.getBounds();n.transform((new y).translate(r.getPoint()).scale(r.getSize()))}}}},{}),{id:function(t,e){A[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var i=b(e);if(i){if((i=i.clone()).setClipMask(!0),!(t instanceof C))return new C(i,t);t.insertChild(0,i)}},gradientTransform:f,transform:f,"fill-opacity":g,"stroke-opacity":g,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){
t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var i=e.match(/(.*)%$/);t.setOffset(i?i[1]/100:parseFloat(e))}},viewBox:function(t,e,i,n,s){var a,o=new m(h(e,"array")),l=r(n,null,null,!0);if(t instanceof C){var u=l?l.divide(o.getSize()):1,c=(new y).scale(u).translate(o.getPoint().negate());a=t}else t instanceof M&&(l&&o.setSize(l),a=t._item)
;if(a){if("visible"!==p(n,"overflow",s)){var d=new z.Rectangle(o);d.setClipMask(!0),a.addChild(d)}c&&a.transform(c)}}});S.inject({importSVG:function(t,e){return I(t,e,this)}}),x.inject({importSVG:function(t,e){return this.activate(),I(t,e,this)}})},(paper=new(l.inject(o.exports,{enumerable:!0,Base:o,Numerical:d,Formatter:c,Key:X,DomEvent:W,DomElement:G,document:a,window:s,Symbol:M,PlacedSymbol:I,sweepAndPrune:n,generateUUID:i}))).agent.node&&require("./node/extend.js")(paper),
"function"==typeof define&&define.amd?define("paper",paper):"object"==typeof module&&module&&(module.exports=paper),paper}.call(this,"object"==typeof self?self:null);!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pako=t()}}(function(){return function t(e,i,n){function r(a,o){if(!i[a]){
if(!e[a]){var h="function"==typeof require&&require;if(!o&&h)return h(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){var i=e[a][1][t];return r(i||t)},u,u.exports,t,e,i,n)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t,e,i){"use strict";function n(t){if(!(this instanceof n))return new n(t)
;this.options=h.assign({level:m,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:w,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var i=o.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==g)throw new Error(u[i]);if(e.header&&o.deflateSetHeader(this.strm,e.header),
e.dictionary){var r;if(r="string"==typeof e.dictionary?l.string2buf(e.dictionary):"[object ArrayBuffer]"===d.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(i=o.deflateSetDictionary(this.strm,r))!==g)throw new Error(u[i]);this._dict_set=!0}}function r(t,e){var i=new n(e);if(i.push(t,!0),i.err)throw i.msg||u[i.err];return i.result}function s(t,e){return(e=e||{}).raw=!0,r(t,e)}function a(t,e){return(e=e||{}).gzip=!0,r(t,e)}
var o=t("./zlib/deflate"),h=t("./utils/common"),l=t("./utils/strings"),u=t("./zlib/messages"),c=t("./zlib/zstream"),d=Object.prototype.toString,f=0,_=4,g=0,v=1,p=2,m=-1,w=0,y=8;n.prototype.push=function(t,e){var i,n,r=this.strm,s=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:!0===e?_:f,"string"==typeof t?r.input=l.string2buf(t):"[object ArrayBuffer]"===d.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new h.Buf8(s),
r.next_out=0,r.avail_out=s),(i=o.deflate(r,n))!==v&&i!==g)return this.onEnd(i),this.ended=!0,!1;0!==r.avail_out&&(0!==r.avail_in||n!==_&&n!==p)||("string"===this.options.to?this.onData(l.buf2binstring(h.shrinkBuf(r.output,r.next_out))):this.onData(h.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||0===r.avail_out)&&i!==v);return n===_?(i=o.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===g):n!==p||(this.onEnd(g),r.avail_out=0,!0)},n.prototype.onData=function(t){this.chunks.push(t)},
n.prototype.onEnd=function(t){t===g&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Deflate=n,i.deflate=r,i.deflateRaw=s,i.gzip=a},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(t,e,i){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},t||{})
;var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var i=a.inflateInit2(this.strm,e.windowBits);if(i!==l.Z_OK)throw new Error(u[i]);this.header=new d,
a.inflateGetHeader(this.strm,this.header)}function r(t,e){var i=new n(e);if(i.push(t,!0),i.err)throw i.msg||u[i.err];return i.result}function s(t,e){return(e=e||{}).raw=!0,r(t,e)}var a=t("./zlib/inflate"),o=t("./utils/common"),h=t("./utils/strings"),l=t("./zlib/constants"),u=t("./zlib/messages"),c=t("./zlib/zstream"),d=t("./zlib/gzheader"),f=Object.prototype.toString;n.prototype.push=function(t,e){var i,n,r,s,u,c,d=this.strm,_=this.options.chunkSize,g=this.options.dictionary,v=!1
;if(this.ended)return!1;n=e===~~e?e:!0===e?l.Z_FINISH:l.Z_NO_FLUSH,"string"==typeof t?d.input=h.binstring2buf(t):"[object ArrayBuffer]"===f.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new o.Buf8(_),d.next_out=0,d.avail_out=_),(i=a.inflate(d,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&g&&(c="string"==typeof g?h.string2buf(g):"[object ArrayBuffer]"===f.call(g)?new Uint8Array(g):g,i=a.inflateSetDictionary(this.strm,c)),
i===l.Z_BUF_ERROR&&!0===v&&(i=l.Z_OK,v=!1),i!==l.Z_STREAM_END&&i!==l.Z_OK)return this.onEnd(i),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&i!==l.Z_STREAM_END&&(0!==d.avail_in||n!==l.Z_FINISH&&n!==l.Z_SYNC_FLUSH)||("string"===this.options.to?(r=h.utf8border(d.output,d.next_out),s=d.next_out-r,u=h.buf2string(d.output,r),d.next_out=s,d.avail_out=_-s,s&&o.arraySet(d.output,d.output,r,s,0),this.onData(u)):this.onData(o.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(v=!0)
}while((d.avail_in>0||0===d.avail_out)&&i!==l.Z_STREAM_END);return i===l.Z_STREAM_END&&(n=l.Z_FINISH),n===l.Z_FINISH?(i=a.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===l.Z_OK):n!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),d.avail_out=0,!0)},n.prototype.onData=function(t){this.chunks.push(t)},n.prototype.onEnd=function(t){t===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},
i.Inflate=n,i.inflate=r,i.inflateRaw=s,i.ungzip=r},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object")
;for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])}}return t},i.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,i,n,r){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+n),r);else for(var s=0;s<n;s++)t[r+s]=e[i+s]},flattenChunks:function(t){var e,i,n,r,s,a;for(n=0,e=0,i=t.length;e<i;e++)n+=t[e].length;for(a=new Uint8Array(n),r=0,e=0,i=t.length;e<i;e++)s=t[e],a.set(s,r),r+=s.length;return a}},s={arraySet:function(t,e,i,n,r){
for(var s=0;s<n;s++)t[r+s]=e[i+s]},flattenChunks:function(t){return[].concat.apply([],t)}};i.setTyped=function(t){t?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,r)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,s))},i.setTyped(n)},{}],4:[function(t,e,i){"use strict";function n(t,e){if(e<65537&&(t.subarray&&a||!t.subarray&&s))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var i="",n=0;n<e;n++)i+=String.fromCharCode(t[n]);return i}
var r=t("./common"),s=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(t){s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){a=!1}for(var o=new r.Buf8(256),h=0;h<256;h++)o[h]=h>=252?6:h>=248?5:h>=240?4:h>=224?3:h>=192?2:1;o[254]=o[254]=1,i.string2buf=function(t){var e,i,n,s,a,o=t.length,h=0;for(s=0;s<o;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<o&&(56320==(64512&(n=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(n-56320),s++)),h+=i<128?1:i<2048?2:i<65536?3:4
;for(e=new r.Buf8(h),a=0,s=0;a<h;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<o&&(56320==(64512&(n=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(n-56320),s++)),i<128?e[a++]=i:i<2048?(e[a++]=192|i>>>6,e[a++]=128|63&i):i<65536?(e[a++]=224|i>>>12,e[a++]=128|i>>>6&63,e[a++]=128|63&i):(e[a++]=240|i>>>18,e[a++]=128|i>>>12&63,e[a++]=128|i>>>6&63,e[a++]=128|63&i);return e},i.buf2binstring=function(t){return n(t,t.length)},i.binstring2buf=function(t){
for(var e=new r.Buf8(t.length),i=0,n=e.length;i<n;i++)e[i]=t.charCodeAt(i);return e},i.buf2string=function(t,e){var i,r,s,a,h=e||t.length,l=new Array(2*h);for(r=0,i=0;i<h;)if((s=t[i++])<128)l[r++]=s;else if((a=o[s])>4)l[r++]=65533,i+=a-1;else{for(s&=2===a?31:3===a?15:7;a>1&&i<h;)s=s<<6|63&t[i++],a--;a>1?l[r++]=65533:s<65536?l[r++]=s:(s-=65536,l[r++]=55296|s>>10&1023,l[r++]=56320|1023&s)}return n(l,r)},i.utf8border=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),
i=e-1;i>=0&&128==(192&t[i]);)i--;return i<0?e:0===i?e:i+o[t[i]]>e?i:e}},{"./common":3}],5:[function(t,e){"use strict";function i(t,e,i,n){for(var r=65535&t|0,s=t>>>16&65535|0,a=0;0!==i;){i-=a=i>2e3?2e3:i;do{s=s+(r=r+e[n++]|0)|0}while(--a);r%=65521,s%=65521}return r|s<<16|0}e.exports=i},{}],6:[function(t,e){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,
Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(t,e){"use strict";function i(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}function n(t,e,i,n){var s=r,a=n+i;t^=-1;for(var o=n;o<a;o++)t=t>>>8^s[255&(t^e[o])];return-1^t}var r=i();e.exports=n},{}],
8:[function(t,e,i){"use strict";function n(t,e){return t.msg=N[e],e}function r(t){return(t<<1)-(t>4?9:0)}function s(t){for(var e=t.length;--e>=0;)t[e]=0}function a(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(T.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function o(t,e){A._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),
t.block_start=t.strstart,a(t.strm)}function h(t,e){t.pending_buf[t.pending++]=e}function l(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function u(t,e,i,n){var r=t.avail_in;return r>n&&(r=n),0===r?0:(t.avail_in-=r,T.arraySet(e,t.input,t.next_in,r,i),1===t.state.wrap?t.adler=O(t.adler,e,r,i):2===t.state.wrap&&(t.adler=L(t.adler,e,r,i)),t.next_in+=r,t.total_in+=r,r)}function c(t,e){
var i,n,r=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-lt?t.strstart-(t.w_size-lt):0,l=t.window,u=t.w_mask,c=t.prev,d=t.strstart+ht,f=l[s+a-1],_=l[s+a];t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do{if(l[(i=e)+a]===_&&l[i+a-1]===f&&l[i]===l[s]&&l[++i]===l[s+1]){s+=2,i++;do{}while(l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&s<d);if(n=ht-(d-s),
s=d-ht,n>a){if(t.match_start=e,a=n,n>=o)break;f=l[s+a-1],_=l[s+a]}}}while((e=c[e&u])>h&&0!=--r);return a<=t.lookahead?a:t.lookahead}function d(t){var e,i,n,r,s,a=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=a+(a-lt)){T.arraySet(t.window,t.window,a,a,0),t.match_start-=a,t.strstart-=a,t.block_start-=a,e=i=t.hash_size;do{n=t.head[--e],t.head[e]=n>=a?n-a:0}while(--i);e=i=a;do{n=t.prev[--e],t.prev[e]=n>=a?n-a:0}while(--i);r+=a}if(0===t.strm.avail_in)break
;if(i=u(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=i,t.lookahead+t.insert>=ot)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+ot-1])&t.hash_mask,t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<ot)););}while(t.lookahead<lt&&0!==t.strm.avail_in)}function f(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){
if(t.lookahead<=1){if(d(t),0===t.lookahead&&e===B)return mt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,o(t,!1),0===t.strm.avail_out))return mt;if(t.strstart-t.block_start>=t.w_size-lt&&(o(t,!1),0===t.strm.avail_out))return mt}return t.insert=0,e===R?(o(t,!0),0===t.strm.avail_out?yt:bt):(t.strstart>t.block_start&&(o(t,!1),t.strm.avail_out),mt)}function _(t,e){for(var i,n;;){
if(t.lookahead<lt){if(d(t),t.lookahead<lt&&e===B)return mt;if(0===t.lookahead)break}if(i=0,t.lookahead>=ot&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ot-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-lt&&(t.match_length=c(t,i)),t.match_length>=ot)if(n=A._tr_tally(t,t.strstart-t.match_start,t.match_length-ot),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=ot){t.match_length--;do{
t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ot-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=A._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(o(t,!1),0===t.strm.avail_out))return mt}
return t.insert=t.strstart<ot-1?t.strstart:ot-1,e===R?(o(t,!0),0===t.strm.avail_out?yt:bt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?mt:wt}function g(t,e){for(var i,n,r;;){if(t.lookahead<lt){if(d(t),t.lookahead<lt&&e===B)return mt;if(0===t.lookahead)break}if(i=0,t.lookahead>=ot&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ot-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,
t.match_length=ot-1,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-lt&&(t.match_length=c(t,i),t.match_length<=5&&(t.strategy===G||t.match_length===ot&&t.strstart-t.match_start>4096)&&(t.match_length=ot-1)),t.prev_length>=ot&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-ot,n=A._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-ot),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ot-1])&t.hash_mask,
i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=ot-1,t.strstart++,n&&(o(t,!1),0===t.strm.avail_out))return mt}else if(t.match_available){if((n=A._tr_tally(t,0,t.window[t.strstart-1]))&&o(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return mt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=A._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),
t.insert=t.strstart<ot-1?t.strstart:ot-1,e===R?(o(t,!0),0===t.strm.avail_out?yt:bt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?mt:wt}function v(t,e){for(var i,n,r,s,a=t.window;;){if(t.lookahead<=ht){if(d(t),t.lookahead<=ht&&e===B)return mt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=ot&&t.strstart>0&&((n=a[r=t.strstart-1])===a[++r]&&n===a[++r]&&n===a[++r])){s=t.strstart+ht;do{}while(n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&r<s)
;t.match_length=ht-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=ot?(i=A._tr_tally(t,1,t.match_length-ot),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=A._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(o(t,!1),0===t.strm.avail_out))return mt}return t.insert=0,e===R?(o(t,!0),0===t.strm.avail_out?yt:bt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?mt:wt}function p(t,e){for(var i;;){if(0===t.lookahead&&(d(t),
0===t.lookahead)){if(e===B)return mt;break}if(t.match_length=0,i=A._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(o(t,!1),0===t.strm.avail_out))return mt}return t.insert=0,e===R?(o(t,!0),0===t.strm.avail_out?yt:bt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?mt:wt}function m(t,e,i,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=r}function w(t){t.window_size=2*t.w_size,s(t.head),t.max_lazy_match=M[t.level].max_lazy,
t.good_match=M[t.level].good_length,t.nice_match=M[t.level].nice_length,t.max_chain_length=M[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=ot-1,t.match_available=0,t.ins_h=0}function y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=X,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,
this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new T.Buf16(2*st),this.dyn_dtree=new T.Buf16(2*(2*nt+1)),
this.bl_tree=new T.Buf16(2*(2*rt+1)),s(this.dyn_ltree),s(this.dyn_dtree),s(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new T.Buf16(at+1),this.heap=new T.Buf16(2*it+1),s(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new T.Buf16(2*it+1),s(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function b(t){var e
;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=Y,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?ct:vt,t.adler=2===e.wrap?0:1,e.last_flush=B,A._tr_init(e),j):n(t,V)}function x(t){var e=b(t);return e===j&&w(t.state),e}function S(t,e){return t&&t.state?2!==t.state.wrap?V:(t.state.gzhead=e,j):V}function C(t,e,i,r,s,a){if(!t)return V;var o=1;if(e===U&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),s<1||s>Q||i!==X||r<8||r>15||e<0||e>9||a<0||a>K)return n(t,V)
;8===r&&(r=9);var h=new y;return t.state=h,h.strm=t,h.wrap=o,h.gzhead=null,h.w_bits=r,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=s+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+ot-1)/ot),h.window=new T.Buf8(2*h.w_size),h.head=new T.Buf16(h.hash_size),h.prev=new T.Buf16(h.w_size),h.lit_bufsize=1<<s+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new T.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=a,
h.method=i,x(t)}function k(t,e){return C(t,e,X,tt,et,$)}function z(t,e){var i,o,u,c;if(!t||!t.state||e>F||e<0)return t?n(t,V):V;if(o=t.state,!t.output||!t.input&&0!==t.avail_in||o.status===pt&&e!==R)return n(t,0===t.avail_out?H:V);if(o.strm=t,i=o.last_flush,o.last_flush=e,o.status===ct)if(2===o.wrap)t.adler=0,h(o,31),h(o,139),h(o,8),o.gzhead?(h(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),h(o,255&o.gzhead.time),
h(o,o.gzhead.time>>8&255),h(o,o.gzhead.time>>16&255),h(o,o.gzhead.time>>24&255),h(o,9===o.level?2:o.strategy>=W||o.level<2?4:0),h(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(h(o,255&o.gzhead.extra.length),h(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=L(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=dt):(h(o,0),h(o,0),h(o,0),h(o,0),h(o,0),h(o,9===o.level?2:o.strategy>=W||o.level<2?4:0),h(o,xt),o.status=vt);else{var d=X+(o.w_bits-8<<4)<<8
;d|=(o.strategy>=W||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(d|=ut),d+=31-d%31,o.status=vt,l(o,d),0!==o.strstart&&(l(o,t.adler>>>16),l(o,65535&t.adler)),t.adler=1}if(o.status===dt)if(o.gzhead.extra){for(u=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>u&&(t.adler=L(t.adler,o.pending_buf,o.pending-u,u)),a(t),u=o.pending,o.pending!==o.pending_buf_size));)h(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++
;o.gzhead.hcrc&&o.pending>u&&(t.adler=L(t.adler,o.pending_buf,o.pending-u,u)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=ft)}else o.status=ft;if(o.status===ft)if(o.gzhead.name){u=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>u&&(t.adler=L(t.adler,o.pending_buf,o.pending-u,u)),a(t),u=o.pending,o.pending===o.pending_buf_size)){c=1;break}c=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,h(o,c)}while(0!==c)
;o.gzhead.hcrc&&o.pending>u&&(t.adler=L(t.adler,o.pending_buf,o.pending-u,u)),0===c&&(o.gzindex=0,o.status=_t)}else o.status=_t;if(o.status===_t)if(o.gzhead.comment){u=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>u&&(t.adler=L(t.adler,o.pending_buf,o.pending-u,u)),a(t),u=o.pending,o.pending===o.pending_buf_size)){c=1;break}c=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,h(o,c)}while(0!==c)
;o.gzhead.hcrc&&o.pending>u&&(t.adler=L(t.adler,o.pending_buf,o.pending-u,u)),0===c&&(o.status=gt)}else o.status=gt;if(o.status===gt&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&a(t),o.pending+2<=o.pending_buf_size&&(h(o,255&t.adler),h(o,t.adler>>8&255),t.adler=0,o.status=vt)):o.status=vt),0!==o.pending){if(a(t),0===t.avail_out)return o.last_flush=-1,j}else if(0===t.avail_in&&r(e)<=r(i)&&e!==R)return n(t,H);if(o.status===pt&&0!==t.avail_in)return n(t,H)
;if(0!==t.avail_in||0!==o.lookahead||e!==B&&o.status!==pt){var f=o.strategy===W?p(o,e):o.strategy===J?v(o,e):M[o.level].func(o,e);if(f!==yt&&f!==bt||(o.status=pt),f===mt||f===yt)return 0===t.avail_out&&(o.last_flush=-1),j;if(f===wt&&(e===E?A._tr_align(o):e!==F&&(A._tr_stored_block(o,0,0,!1),e===D&&(s(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),a(t),0===t.avail_out))return o.last_flush=-1,j}return e!==R?j:o.wrap<=0?q:(2===o.wrap?(h(o,255&t.adler),h(o,t.adler>>8&255),
h(o,t.adler>>16&255),h(o,t.adler>>24&255),h(o,255&t.total_in),h(o,t.total_in>>8&255),h(o,t.total_in>>16&255),h(o,t.total_in>>24&255)):(l(o,t.adler>>>16),l(o,65535&t.adler)),a(t),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?j:q)}function P(t){var e;return t&&t.state?(e=t.state.status)!==ct&&e!==dt&&e!==ft&&e!==_t&&e!==gt&&e!==vt&&e!==pt?n(t,V):(t.state=null,e===vt?n(t,Z):j):V}function I(t,e){var i,n,r,a,o,h,l,u,c=e.length;if(!t||!t.state)return V
;if(2===(a=(i=t.state).wrap)||1===a&&i.status!==ct||i.lookahead)return V;for(1===a&&(t.adler=O(t.adler,e,c,0)),i.wrap=0,c>=i.w_size&&(0===a&&(s(i.head),i.strstart=0,i.block_start=0,i.insert=0),u=new T.Buf8(i.w_size),T.arraySet(u,e,c-i.w_size,i.w_size,0),e=u,c=i.w_size),o=t.avail_in,h=t.next_in,l=t.input,t.avail_in=c,t.next_in=0,t.input=e,d(i);i.lookahead>=ot;){n=i.strstart,r=i.lookahead-(ot-1);do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+ot-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],
i.head[i.ins_h]=n,n++}while(--r);i.strstart=n,i.lookahead=ot-1,d(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=ot-1,i.match_available=0,t.next_in=h,t.input=l,t.avail_in=o,i.wrap=a,j}
var M,T=t("../utils/common"),A=t("./trees"),O=t("./adler32"),L=t("./crc32"),N=t("./messages"),B=0,E=1,D=3,R=4,F=5,j=0,q=1,V=-2,Z=-3,H=-5,U=-1,G=1,W=2,J=3,K=4,$=0,Y=2,X=8,Q=9,tt=15,et=8,it=256+1+29,nt=30,rt=19,st=2*it+1,at=15,ot=3,ht=258,lt=ht+ot+1,ut=32,ct=42,dt=69,ft=73,_t=91,gt=103,vt=113,pt=666,mt=1,wt=2,yt=3,bt=4,xt=3
;M=[new m(0,0,0,0,f),new m(4,4,8,4,_),new m(4,5,16,8,_),new m(4,6,32,32,_),new m(4,4,16,16,g),new m(8,16,32,32,g),new m(8,16,128,128,g),new m(8,32,128,256,g),new m(32,128,258,1024,g),new m(32,258,258,4096,g)],i.deflateInit=k,i.deflateInit2=C,i.deflateReset=x,i.deflateResetKeep=b,i.deflateSetHeader=S,i.deflate=z,i.deflateEnd=P,i.deflateSetDictionary=I,i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(t,e){
"use strict";function i(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=i},{}],10:[function(t,e){"use strict";var i=30,n=12;e.exports=function(t,e){var r,s,a,o,h,l,u,c,d,f,_,g,v,p,m,w,y,b,x,S,C,k,z,P,I;r=t.state,s=t.next_in,P=t.input,a=s+(t.avail_in-5),o=t.next_out,I=t.output,h=o-(e-t.avail_out),l=o+(t.avail_out-257),u=r.dmax,c=r.wsize,d=r.whave,f=r.wnext,_=r.window,g=r.hold,v=r.bits,p=r.lencode,
m=r.distcode,w=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;t:do{v<15&&(g+=P[s++]<<v,v+=8,g+=P[s++]<<v,v+=8),b=p[g&w];e:for(;;){if(g>>>=x=b>>>24,v-=x,0===(x=b>>>16&255))I[o++]=65535&b;else{if(!(16&x)){if(0==(64&x)){b=p[(65535&b)+(g&(1<<x)-1)];continue e}if(32&x){r.mode=n;break t}t.msg="invalid literal/length code",r.mode=i;break t}S=65535&b,(x&=15)&&(v<x&&(g+=P[s++]<<v,v+=8),S+=g&(1<<x)-1,g>>>=x,v-=x),v<15&&(g+=P[s++]<<v,v+=8,g+=P[s++]<<v,v+=8),b=m[g&y];i:for(;;){if(g>>>=x=b>>>24,v-=x,
!(16&(x=b>>>16&255))){if(0==(64&x)){b=m[(65535&b)+(g&(1<<x)-1)];continue i}t.msg="invalid distance code",r.mode=i;break t}if(C=65535&b,v<(x&=15)&&(g+=P[s++]<<v,(v+=8)<x&&(g+=P[s++]<<v,v+=8)),(C+=g&(1<<x)-1)>u){t.msg="invalid distance too far back",r.mode=i;break t}if(g>>>=x,v-=x,C>(x=o-h)){if((x=C-x)>d&&r.sane){t.msg="invalid distance too far back",r.mode=i;break t}if(k=0,z=_,0===f){if(k+=c-x,x<S){S-=x;do{I[o++]=_[k++]}while(--x);k=o-C,z=I}}else if(f<x){if(k+=c+f-x,(x-=f)<S){S-=x;do{
I[o++]=_[k++]}while(--x);if(k=0,f<S){S-=x=f;do{I[o++]=_[k++]}while(--x);k=o-C,z=I}}}else if(k+=f-x,x<S){S-=x;do{I[o++]=_[k++]}while(--x);k=o-C,z=I}for(;S>2;)I[o++]=z[k++],I[o++]=z[k++],I[o++]=z[k++],S-=3;S&&(I[o++]=z[k++],S>1&&(I[o++]=z[k++]))}else{k=o-C;do{I[o++]=I[k++],I[o++]=I[k++],I[o++]=I[k++],S-=3}while(S>2);S&&(I[o++]=I[k++],S>1&&(I[o++]=I[k++]))}break}}break}}while(s<a&&o<l);s-=S=v>>3,g&=(1<<(v-=S<<3))-1,t.next_in=s,t.next_out=o,t.avail_in=s<a?a-s+5:5-(s-a),
t.avail_out=o<l?l-o+257:257-(o-l),r.hold=g,r.bits=v}},{}],11:[function(t,e,i){"use strict";function n(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,
this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new m.Buf16(320),this.work=new m.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function s(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=D,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new m.Buf32(gt),e.distcode=e.distdyn=new m.Buf32(vt),e.sane=1,e.back=-1,M):O}
function a(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,s(t)):O}function o(t,e){var i,n;return t&&t.state?(n=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?O:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,a(t))):O}function h(t,e){var i,n;return t?(n=new r,t.state=n,n.window=null,(i=o(t,e))!==M&&(t.state=null),i):O}function l(t){return h(t,pt)}function u(t){if(mt){var e;for(v=new m.Buf32(512),p=new m.Buf32(32),e=0;e<144;)t.lens[e++]=8
;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(x(C,t.lens,0,288,v,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;x(k,t.lens,0,32,p,0,t.work,{bits:5}),mt=!1}t.lencode=v,t.lenbits=9,t.distcode=p,t.distbits=5}function c(t,e,i,n){var r,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new m.Buf8(s.wsize)),n>=s.wsize?(m.arraySet(s.window,e,i-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((r=s.wsize-s.wnext)>n&&(r=n),
m.arraySet(s.window,e,i-n,r,s.wnext),(n-=r)?(m.arraySet(s.window,e,i-n,n,0),s.wnext=n,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0}function d(t,e){var i,r,s,a,o,h,l,d,f,_,g,v,p,gt,vt,pt,mt,wt,yt,bt,xt,St,Ct,kt,zt=0,Pt=new m.Buf8(4),It=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return O;(i=t.state).mode===J&&(i.mode=K),o=t.next_out,s=t.output,l=t.avail_out,a=t.next_in,r=t.input,
h=t.avail_in,d=i.hold,f=i.bits,_=h,g=l,St=M;t:for(;;)switch(i.mode){case D:if(0===i.wrap){i.mode=K;break}for(;f<16;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}if(2&i.wrap&&35615===d){i.check=0,Pt[0]=255&d,Pt[1]=d>>>8&255,i.check=y(i.check,Pt,2,0),d=0,f=0,i.mode=R;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&d)<<8)+(d>>8))%31){t.msg="incorrect header check",i.mode=dt;break}if((15&d)!==E){t.msg="unknown compression method",i.mode=dt;break}if(f-=4,xt=8+(15&(d>>>=4)),
0===i.wbits)i.wbits=xt;else if(xt>i.wbits){t.msg="invalid window size",i.mode=dt;break}i.dmax=1<<xt,t.adler=i.check=1,i.mode=512&d?G:J,d=0,f=0;break;case R:for(;f<16;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}if(i.flags=d,(255&i.flags)!==E){t.msg="unknown compression method",i.mode=dt;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=dt;break}i.head&&(i.head.text=d>>8&1),512&i.flags&&(Pt[0]=255&d,Pt[1]=d>>>8&255,i.check=y(i.check,Pt,2,0)),d=0,f=0,i.mode=F;case F:for(;f<32;){
if(0===h)break t;h--,d+=r[a++]<<f,f+=8}i.head&&(i.head.time=d),512&i.flags&&(Pt[0]=255&d,Pt[1]=d>>>8&255,Pt[2]=d>>>16&255,Pt[3]=d>>>24&255,i.check=y(i.check,Pt,4,0)),d=0,f=0,i.mode=j;case j:for(;f<16;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}i.head&&(i.head.xflags=255&d,i.head.os=d>>8),512&i.flags&&(Pt[0]=255&d,Pt[1]=d>>>8&255,i.check=y(i.check,Pt,2,0)),d=0,f=0,i.mode=q;case q:if(1024&i.flags){for(;f<16;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}i.length=d,i.head&&(i.head.extra_len=d),
512&i.flags&&(Pt[0]=255&d,Pt[1]=d>>>8&255,i.check=y(i.check,Pt,2,0)),d=0,f=0}else i.head&&(i.head.extra=null);i.mode=V;case V:if(1024&i.flags&&((v=i.length)>h&&(v=h),v&&(i.head&&(xt=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),m.arraySet(i.head.extra,r,a,v,xt)),512&i.flags&&(i.check=y(i.check,r,v,a)),h-=v,a+=v,i.length-=v),i.length))break t;i.length=0,i.mode=Z;case Z:if(2048&i.flags){if(0===h)break t;v=0;do{xt=r[a+v++],
i.head&&xt&&i.length<65536&&(i.head.name+=String.fromCharCode(xt))}while(xt&&v<h);if(512&i.flags&&(i.check=y(i.check,r,v,a)),h-=v,a+=v,xt)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=H;case H:if(4096&i.flags){if(0===h)break t;v=0;do{xt=r[a+v++],i.head&&xt&&i.length<65536&&(i.head.comment+=String.fromCharCode(xt))}while(xt&&v<h);if(512&i.flags&&(i.check=y(i.check,r,v,a)),h-=v,a+=v,xt)break t}else i.head&&(i.head.comment=null);i.mode=U;case U:if(512&i.flags){for(;f<16;){
if(0===h)break t;h--,d+=r[a++]<<f,f+=8}if(d!==(65535&i.check)){t.msg="header crc mismatch",i.mode=dt;break}d=0,f=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=J;break;case G:for(;f<32;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}t.adler=i.check=n(d),d=0,f=0,i.mode=W;case W:if(0===i.havedict)return t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=h,i.hold=d,i.bits=f,A;t.adler=i.check=1,i.mode=J;case J:if(e===P||e===I)break t;case K:if(i.last){d>>>=7&f,f-=7&f,i.mode=lt
;break}for(;f<3;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}switch(i.last=1&d,f-=1,3&(d>>>=1)){case 0:i.mode=$;break;case 1:if(u(i),i.mode=it,e===I){d>>>=2,f-=2;break t}break;case 2:i.mode=Q;break;case 3:t.msg="invalid block type",i.mode=dt}d>>>=2,f-=2;break;case $:for(d>>>=7&f,f-=7&f;f<32;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}if((65535&d)!=(d>>>16^65535)){t.msg="invalid stored block lengths",i.mode=dt;break}if(i.length=65535&d,d=0,f=0,i.mode=Y,e===I)break t;case Y:i.mode=X;case X:
if(v=i.length){if(v>h&&(v=h),v>l&&(v=l),0===v)break t;m.arraySet(s,r,a,v,o),h-=v,a+=v,l-=v,o+=v,i.length-=v;break}i.mode=J;break;case Q:for(;f<14;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}if(i.nlen=257+(31&d),d>>>=5,f-=5,i.ndist=1+(31&d),d>>>=5,f-=5,i.ncode=4+(15&d),d>>>=4,f-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=dt;break}i.have=0,i.mode=tt;case tt:for(;i.have<i.ncode;){for(;f<3;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}i.lens[It[i.have++]]=7&d,d>>>=3,f-=3}
for(;i.have<19;)i.lens[It[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,Ct={bits:i.lenbits},St=x(S,i.lens,0,19,i.lencode,0,i.work,Ct),i.lenbits=Ct.bits,St){t.msg="invalid code lengths set",i.mode=dt;break}i.have=0,i.mode=et;case et:for(;i.have<i.nlen+i.ndist;){for(;pt=(zt=i.lencode[d&(1<<i.lenbits)-1])>>>16&255,mt=65535&zt,!((vt=zt>>>24)<=f);){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}if(mt<16)d>>>=vt,f-=vt,i.lens[i.have++]=mt;else{if(16===mt){for(kt=vt+2;f<kt;){if(0===h)break t;h--,d+=r[a++]<<f,
f+=8}if(d>>>=vt,f-=vt,0===i.have){t.msg="invalid bit length repeat",i.mode=dt;break}xt=i.lens[i.have-1],v=3+(3&d),d>>>=2,f-=2}else if(17===mt){for(kt=vt+3;f<kt;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}f-=vt,xt=0,v=3+(7&(d>>>=vt)),d>>>=3,f-=3}else{for(kt=vt+7;f<kt;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}f-=vt,xt=0,v=11+(127&(d>>>=vt)),d>>>=7,f-=7}if(i.have+v>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=dt;break}for(;v--;)i.lens[i.have++]=xt}}if(i.mode===dt)break;if(0===i.lens[256]){
t.msg="invalid code -- missing end-of-block",i.mode=dt;break}if(i.lenbits=9,Ct={bits:i.lenbits},St=x(C,i.lens,0,i.nlen,i.lencode,0,i.work,Ct),i.lenbits=Ct.bits,St){t.msg="invalid literal/lengths set",i.mode=dt;break}if(i.distbits=6,i.distcode=i.distdyn,Ct={bits:i.distbits},St=x(k,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,Ct),i.distbits=Ct.bits,St){t.msg="invalid distances set",i.mode=dt;break}if(i.mode=it,e===I)break t;case it:i.mode=nt;case nt:if(h>=6&&l>=258){t.next_out=o,t.avail_out=l,
t.next_in=a,t.avail_in=h,i.hold=d,i.bits=f,b(t,g),o=t.next_out,s=t.output,l=t.avail_out,a=t.next_in,r=t.input,h=t.avail_in,d=i.hold,f=i.bits,i.mode===J&&(i.back=-1);break}for(i.back=0;pt=(zt=i.lencode[d&(1<<i.lenbits)-1])>>>16&255,mt=65535&zt,!((vt=zt>>>24)<=f);){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}if(pt&&0==(240&pt)){for(wt=vt,yt=pt,bt=mt;pt=(zt=i.lencode[bt+((d&(1<<wt+yt)-1)>>wt)])>>>16&255,mt=65535&zt,!(wt+(vt=zt>>>24)<=f);){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}d>>>=wt,f-=wt,i.back+=wt}
if(d>>>=vt,f-=vt,i.back+=vt,i.length=mt,0===pt){i.mode=ht;break}if(32&pt){i.back=-1,i.mode=J;break}if(64&pt){t.msg="invalid literal/length code",i.mode=dt;break}i.extra=15&pt,i.mode=rt;case rt:if(i.extra){for(kt=i.extra;f<kt;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}i.length+=d&(1<<i.extra)-1,d>>>=i.extra,f-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=st;case st:for(;pt=(zt=i.distcode[d&(1<<i.distbits)-1])>>>16&255,mt=65535&zt,!((vt=zt>>>24)<=f);){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}
if(0==(240&pt)){for(wt=vt,yt=pt,bt=mt;pt=(zt=i.distcode[bt+((d&(1<<wt+yt)-1)>>wt)])>>>16&255,mt=65535&zt,!(wt+(vt=zt>>>24)<=f);){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}d>>>=wt,f-=wt,i.back+=wt}if(d>>>=vt,f-=vt,i.back+=vt,64&pt){t.msg="invalid distance code",i.mode=dt;break}i.offset=mt,i.extra=15&pt,i.mode=at;case at:if(i.extra){for(kt=i.extra;f<kt;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}i.offset+=d&(1<<i.extra)-1,d>>>=i.extra,f-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){
t.msg="invalid distance too far back",i.mode=dt;break}i.mode=ot;case ot:if(0===l)break t;if(v=g-l,i.offset>v){if((v=i.offset-v)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=dt;break}v>i.wnext?(v-=i.wnext,p=i.wsize-v):p=i.wnext-v,v>i.length&&(v=i.length),gt=i.window}else gt=s,p=o-i.offset,v=i.length;v>l&&(v=l),l-=v,i.length-=v;do{s[o++]=gt[p++]}while(--v);0===i.length&&(i.mode=nt);break;case ht:if(0===l)break t;s[o++]=i.length,l--,i.mode=nt;break;case lt:if(i.wrap){for(;f<32;){
if(0===h)break t;h--,d|=r[a++]<<f,f+=8}if(g-=l,t.total_out+=g,i.total+=g,g&&(t.adler=i.check=i.flags?y(i.check,s,g,o-g):w(i.check,s,g,o-g)),g=l,(i.flags?d:n(d))!==i.check){t.msg="incorrect data check",i.mode=dt;break}d=0,f=0}i.mode=ut;case ut:if(i.wrap&&i.flags){for(;f<32;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}if(d!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=dt;break}d=0,f=0}i.mode=ct;case ct:St=T;break t;case dt:St=L;break t;case ft:return N;case _t:default:return O}
return t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=h,i.hold=d,i.bits=f,(i.wsize||g!==t.avail_out&&i.mode<dt&&(i.mode<lt||e!==z))&&c(t,t.output,t.next_out,g-t.avail_out)?(i.mode=ft,N):(_-=t.avail_in,g-=t.avail_out,t.total_in+=_,t.total_out+=g,i.total+=g,i.wrap&&g&&(t.adler=i.check=i.flags?y(i.check,s,g,t.next_out-g):w(i.check,s,g,t.next_out-g)),t.data_type=i.bits+(i.last?64:0)+(i.mode===J?128:0)+(i.mode===it||i.mode===Y?256:0),(0===_&&0===g||e===z)&&St===M&&(St=B),St)}function f(t){
if(!t||!t.state)return O;var e=t.state;return e.window&&(e.window=null),t.state=null,M}function _(t,e){var i;return t&&t.state?0==(2&(i=t.state).wrap)?O:(i.head=e,e.done=!1,M):O}function g(t,e){var i,n=e.length;return t&&t.state?0!==(i=t.state).wrap&&i.mode!==W?O:i.mode===W&&w(1,e,n,0)!==i.check?L:c(t,e,n,n)?(i.mode=ft,N):(i.havedict=1,M):O}
var v,p,m=t("../utils/common"),w=t("./adler32"),y=t("./crc32"),b=t("./inffast"),x=t("./inftrees"),S=0,C=1,k=2,z=4,P=5,I=6,M=0,T=1,A=2,O=-2,L=-3,N=-4,B=-5,E=8,D=1,R=2,F=3,j=4,q=5,V=6,Z=7,H=8,U=9,G=10,W=11,J=12,K=13,$=14,Y=15,X=16,Q=17,tt=18,et=19,it=20,nt=21,rt=22,st=23,at=24,ot=25,ht=26,lt=27,ut=28,ct=29,dt=30,ft=31,_t=32,gt=852,vt=592,pt=15,mt=!0;i.inflateReset=a,i.inflateReset2=o,i.inflateResetKeep=s,i.inflateInit=l,i.inflateInit2=h,i.inflate=d,i.inflateEnd=f,i.inflateGetHeader=_,
i.inflateSetDictionary=g,i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(t,e){"use strict"
;var i=t("../utils/common"),n=15,r=852,s=592,a=0,o=1,h=2,l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]
;e.exports=function(t,e,f,_,g,v,p,m){var w,y,b,x,S,C,k,z,P,I=m.bits,M=0,T=0,A=0,O=0,L=0,N=0,B=0,E=0,D=0,R=0,F=null,j=0,q=new i.Buf16(n+1),V=new i.Buf16(n+1),Z=null,H=0;for(M=0;M<=n;M++)q[M]=0;for(T=0;T<_;T++)q[e[f+T]]++;for(L=I,O=n;O>=1&&0===q[O];O--);if(L>O&&(L=O),0===O)return g[v++]=20971520,g[v++]=20971520,m.bits=1,0;for(A=1;A<O&&0===q[A];A++);for(L<A&&(L=A),E=1,M=1;M<=n;M++)if(E<<=1,(E-=q[M])<0)return-1;if(E>0&&(t===a||1!==O))return-1;for(V[1]=0,M=1;M<n;M++)V[M+1]=V[M]+q[M]
;for(T=0;T<_;T++)0!==e[f+T]&&(p[V[e[f+T]]++]=T);if(t===a?(F=Z=p,C=19):t===o?(F=l,j-=257,Z=u,H-=257,C=256):(F=c,Z=d,C=-1),R=0,T=0,M=A,S=v,N=L,B=0,b=-1,x=(D=1<<L)-1,t===o&&D>r||t===h&&D>s)return 1;for(;;){k=M-B,p[T]<C?(z=0,P=p[T]):p[T]>C?(z=Z[H+p[T]],P=F[j+p[T]]):(z=96,P=0),w=1<<M-B,A=y=1<<N;do{g[S+(R>>B)+(y-=w)]=k<<24|z<<16|P|0}while(0!==y);for(w=1<<M-1;R&w;)w>>=1;if(0!==w?(R&=w-1,R+=w):R=0,T++,0==--q[M]){if(M===O)break;M=e[f+p[T]]}if(M>L&&(R&x)!==b){for(0===B&&(B=L),S+=A,
E=1<<(N=M-B);N+B<O&&!((E-=q[N+B])<=0);)N++,E<<=1;if(D+=1<<N,t===o&&D>r||t===h&&D>s)return 1;g[b=R&x]=L<<24|N<<16|S-v|0}}return 0!==R&&(g[S+R]=M-B<<24|64<<16|0),m.bits=L,0}},{"../utils/common":3}],13:[function(t,e){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(t,e,i){"use strict";function n(t){for(var e=t.length;--e>=0;)t[e]=0}
function r(t,e,i,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function s(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function a(t){return t<256?ht[t]:ht[256+(t>>>7)]}function o(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function h(t,e,i){t.bi_valid>K-i?(t.bi_buf|=e<<t.bi_valid&65535,o(t,t.bi_buf),t.bi_buf=e>>K-t.bi_valid,t.bi_valid+=i-K):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)
}function l(t,e,i){h(t,i[2*e],i[2*e+1])}function u(t,e){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1}function c(t){16===t.bi_valid?(o(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function d(t,e){var i,n,r,s,a,o,h=e.dyn_tree,l=e.max_code,u=e.stat_desc.static_tree,c=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,_=e.stat_desc.max_length,g=0;for(s=0;s<=J;s++)t.bl_count[s]=0
;for(h[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<W;i++)(s=h[2*h[2*(n=t.heap[i])+1]+1]+1)>_&&(s=_,g++),h[2*n+1]=s,n>l||(t.bl_count[s]++,a=0,n>=f&&(a=d[n-f]),o=h[2*n],t.opt_len+=o*(s+a),c&&(t.static_len+=o*(u[2*n+1]+a)));if(0!==g){do{for(s=_-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[_]--,g-=2}while(g>0);for(s=_;0!==s;s--)for(n=t.bl_count[s];0!==n;)(r=t.heap[--i])>l||(h[2*r+1]!==s&&(t.opt_len+=(s-h[2*r+1])*h[2*r],h[2*r+1]=s),n--)}}function f(t,e,i){
var n,r,s=new Array(J+1),a=0;for(n=1;n<=J;n++)s[n]=a=a+i[n-1]<<1;for(r=0;r<=e;r++){var o=t[2*r+1];0!==o&&(t[2*r]=u(s[o]++,o))}}function _(){var t,e,i,n,s,a=new Array(J+1);for(i=0,n=0;n<V-1;n++)for(ut[n]=i,t=0;t<1<<et[n];t++)lt[i++]=n;for(lt[i-1]=n,s=0,n=0;n<16;n++)for(ct[n]=s,t=0;t<1<<it[n];t++)ht[s++]=n;for(s>>=7;n<U;n++)for(ct[n]=s<<7,t=0;t<1<<it[n]-7;t++)ht[256+s++]=n;for(e=0;e<=J;e++)a[e]=0;for(t=0;t<=143;)at[2*t+1]=8,t++,a[8]++;for(;t<=255;)at[2*t+1]=9,t++,a[9]++;for(;t<=279;)at[2*t+1]=7,
t++,a[7]++;for(;t<=287;)at[2*t+1]=8,t++,a[8]++;for(f(at,H+1,a),t=0;t<U;t++)ot[2*t+1]=5,ot[2*t]=u(t,5);dt=new r(at,et,Z+1,H,J),ft=new r(ot,it,0,U,J),_t=new r(new Array(0),nt,0,G,$)}function g(t){var e;for(e=0;e<H;e++)t.dyn_ltree[2*e]=0;for(e=0;e<U;e++)t.dyn_dtree[2*e]=0;for(e=0;e<G;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*Y]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function v(t){t.bi_valid>8?o(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}
function p(t,e,i,n){v(t),n&&(o(t,i),o(t,~i)),O.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}function m(t,e,i,n){var r=2*e,s=2*i;return t[r]<t[s]||t[r]===t[s]&&n[e]<=n[i]}function w(t,e,i){for(var n=t.heap[i],r=i<<1;r<=t.heap_len&&(r<t.heap_len&&m(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!m(e,n,t.heap[r],t.depth));)t.heap[i]=t.heap[r],i=r,r<<=1;t.heap[i]=n}function y(t,e,i){var n,r,s,o,u=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],
r=t.pending_buf[t.l_buf+u],u++,0===n?l(t,r,e):(l(t,(s=lt[r])+Z+1,e),0!==(o=et[s])&&h(t,r-=ut[s],o),l(t,s=a(--n),i),0!==(o=it[s])&&h(t,n-=ct[s],o))}while(u<t.last_lit);l(t,Y,e)}function b(t,e){var i,n,r,s=e.dyn_tree,a=e.stat_desc.static_tree,o=e.stat_desc.has_stree,h=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=W,i=0;i<h;i++)0!==s[2*i]?(t.heap[++t.heap_len]=l=i,t.depth[i]=0):s[2*i+1]=0;for(;t.heap_len<2;)s[2*(r=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[r]=0,t.opt_len--,
o&&(t.static_len-=a[2*r+1]);for(e.max_code=l,i=t.heap_len>>1;i>=1;i--)w(t,s,i);r=h;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],w(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=n,s[2*r]=s[2*i]+s[2*n],t.depth[r]=(t.depth[i]>=t.depth[n]?t.depth[i]:t.depth[n])+1,s[2*i+1]=s[2*n+1]=r,t.heap[1]=r++,w(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],d(t,e),f(s,l,t.bl_count)}function x(t,e,i){var n,r,s=-1,a=e[1],o=0,h=7,l=4;for(0===a&&(h=138,l=3),e[2*(i+1)+1]=65535,
n=0;n<=i;n++)r=a,a=e[2*(n+1)+1],++o<h&&r===a||(o<l?t.bl_tree[2*r]+=o:0!==r?(r!==s&&t.bl_tree[2*r]++,t.bl_tree[2*X]++):o<=10?t.bl_tree[2*Q]++:t.bl_tree[2*tt]++,o=0,s=r,0===a?(h=138,l=3):r===a?(h=6,l=3):(h=7,l=4))}function S(t,e,i){var n,r,s=-1,a=e[1],o=0,u=7,c=4;for(0===a&&(u=138,c=3),n=0;n<=i;n++)if(r=a,a=e[2*(n+1)+1],!(++o<u&&r===a)){if(o<c){do{l(t,r,t.bl_tree)}while(0!=--o)}else 0!==r?(r!==s&&(l(t,r,t.bl_tree),o--),l(t,X,t.bl_tree),h(t,o-3,2)):o<=10?(l(t,Q,t.bl_tree),
h(t,o-3,3)):(l(t,tt,t.bl_tree),h(t,o-11,7));o=0,s=r,0===a?(u=138,c=3):r===a?(u=6,c=3):(u=7,c=4)}}function C(t){var e;for(x(t,t.dyn_ltree,t.l_desc.max_code),x(t,t.dyn_dtree,t.d_desc.max_code),b(t,t.bl_desc),e=G-1;e>=3&&0===t.bl_tree[2*rt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function k(t,e,i,n){var r;for(h(t,e-257,5),h(t,i-1,5),h(t,n-4,4),r=0;r<n;r++)h(t,t.bl_tree[2*rt[r]+1],3);S(t,t.dyn_ltree,e-1),S(t,t.dyn_dtree,i-1)}function z(t){var e,i=4093624447;for(e=0;e<=31;e++,
i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return N;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return B;for(e=32;e<Z;e++)if(0!==t.dyn_ltree[2*e])return B;return N}function P(t){gt||(_(),gt=!0),t.l_desc=new s(t.dyn_ltree,dt),t.d_desc=new s(t.dyn_dtree,ft),t.bl_desc=new s(t.bl_tree,_t),t.bi_buf=0,t.bi_valid=0,g(t)}function I(t,e,i,n){h(t,(D<<1)+(n?1:0),3),p(t,e,i,!0)}function M(t){h(t,R<<1,3),l(t,Y,at),c(t)}function T(t,e,i,n){var r,s,a=0
;t.level>0?(t.strm.data_type===E&&(t.strm.data_type=z(t)),b(t,t.l_desc),b(t,t.d_desc),a=C(t),r=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=r&&(r=s)):r=s=i+5,i+4<=r&&-1!==e?I(t,e,i,n):t.strategy===L||s===r?(h(t,(R<<1)+(n?1:0),3),y(t,at,ot)):(h(t,(F<<1)+(n?1:0),3),k(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),y(t,t.dyn_ltree,t.dyn_dtree)),g(t),n&&v(t)}function A(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,
t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(lt[i]+Z+1)]++,t.dyn_dtree[2*a(e)]++),t.last_lit===t.lit_bufsize-1}
var O=t("../utils/common"),L=4,N=0,B=1,E=2,D=0,R=1,F=2,j=3,q=258,V=29,Z=256,H=Z+1+V,U=30,G=19,W=2*H+1,J=15,K=16,$=7,Y=256,X=16,Q=17,tt=18,et=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],it=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],nt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],rt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],st=512,at=new Array(2*(H+2));n(at);var ot=new Array(2*U);n(ot);var ht=new Array(st);n(ht);var lt=new Array(q-j+1);n(lt)
;var ut=new Array(V);n(ut);var ct=new Array(U);n(ct);var dt,ft,_t,gt=!1;i._tr_init=P,i._tr_stored_block=I,i._tr_flush_block=T,i._tr_tally=A,i._tr_align=M},{"../utils/common":3}],15:[function(t,e){"use strict";function i(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=i},{}],"/":[function(t,e){"use strict";var i={};(0,
t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=i},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")}),function(t){var e=function(e){return t.pako.inflate(new Uint8Array(atob(e).split("").map(function(t){return t.charCodeAt(0)})),{to:"string"})},i=function(i){return t[e("eJxLLUvMAQAEKAGp")](e(i))};t[e("eJwrKMpPBgAEWwG1")]=i,t[e("eJzLzU/OBgAENgGr")]=e;var n=t[e("eJzzdAsFAAG/AOU=")]
;("string"==typeof n||n instanceof String)&&(t[e("eJxz9/F3cvQBAAX8AbI=")]=JSON.parse(e(n)))}(self),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},writable:!0,configurable:!0});