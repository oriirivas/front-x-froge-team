/*!@licenses
 *
 * This file is part of the Iconfu project
 * Copyright (c) 2017 INCORS GmbH - All Rights Reserved
 *
 * Iconfu uses the following third party software components under the MIT License:
 *
 * Paper.js
 * http://paperjs.org
 * Copyright (c) 2011 - 2016, Juerg Lehni & Jonathan Puckey
 * http://scratchdisk.com/ & http://jonathanpuckey.com/
 *
 * pako
 * http://nodeca.github.io/pako/
 * Copyright (c) 2014-2017 by Vitaly Puzrin and Andrei Tuputcyn
 *
 * Dexie.js
 * http://dexie.org/
 * Copyright David Fahlander
 *
 * AngularJS
 * https://angularjs.org
 * Copyright (c) 2010-2017 Google, Inc.
 *
 * AngularJS Material
 * https://material.angularjs.org/latest/
 * Copyright (c) 2014-2017 Google, Inc.
 *
 * jQuery
 * https://jquery.org
 * Copyright 2017 The jQuery Foundation
 *
 * FileSaver.js
 * https://github.com/eligrey/FileSaver.js
 * Copyright Â© 2016 Eli Grey
 *
 * Hamster.js
 * https://github.com/monospaced/hamster.js
 * (c) 2013 Monospaced
 * http://monospaced.com
 *
 * Angular Mousewheel
 * https://github.com/monospaced/angular-mousewheel
 * (c) 2016 Monospaced
 * http://monospaced.com
 *
 * perfect-scrollbar
 * https://noraesae.github.io/perfect-scrollbar/
 * Copyright (c) 2012-2016 Hyunje Jun and other contributors
 *
 * AngularDevise
 * https://github.com/cloudspace/angular_devise
 * Copyright (c) 2013 Justin Ridgewell
 *
 * Bowser
 * https://github.com/ded/bowser
 * Copyright (c) Dustin Diaz 2015
 *
 *
 * For the third party software components listed above, the following applies:
 *
 * "Permission is hereby granted, free of charge,
 * to any person obtaining a copy of this software and
 * associated documentation files (the "Software"), to
 * deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify,
 * merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom
 * the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice
 * shall be included in all copies or substantial portions of the Software."
 *
 */
!function(e){function t(){return{PAPER:{VIEW_AUTO_UPDATE:!1},USE_WEB_WORKER:!0,RESAMPLE_FACTOR:2,MAX_CANVAS_SIZE_FOR_RESAMPLE:1e4,START_COLLECTION_ID:5,NOT_FULLY_SUPPORTED_DEVICES:["mobile"],FULLY_SUPPORTED_BROWSERS:{chrome:"50",firefox:"45",msedge:"12",safari:"10",opera:"15",vivaldi:"2"}}}"undefined"==typeof angular?e.iconfuConfig=t():angular.module("iconfu.config.module").factory("iconfu.config",[function(e){return t(e)}])}(self),function(e){function t(){let e=function(){
this.set.apply(this,arguments)};const t=Math.round,n=Math.pow,l=Math.min,r=Math.max;let i=function(e){return e<0?0:e>255?255:e},o=function(e){return i(t(e))},a=function(){let e=arguments,n=e.length;if(1==n){let n=e[0];if(!n)return[0,0,0,1];if("string"==typeof n){let e,t=parseInt,l=n.match(/^#?([0-9a-f]{3})($|\s)/i);if(l)return[17*t((e=l[1])[0],16),17*t(e[1],16),17*t(e[2],16),1];if(l=n.match(/^#?([0-9a-f]{6})($|\s)/i))return[t((e=l[1]).substr(0,2),16),t(e.substr(2,2),16),t(e.substr(4,2),16),1]
;if(l=n.match(/^#?([0-9a-f]{8})($|\s)/i))return[t((e=l[1]).substr(0,2),16),t(e.substr(2,2),16),t(e.substr(4,2),16),t(e.substr(6,2),16)];if(l=n.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d*.*\d*)\s*\)($|\s)/i)||n.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)($|\s)/i))return[+l[1],+l[2],+l[3],null==l[4]?1:+l[4]];if(l=n.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)($|\s)/i))return[+l[1],+l[2],+l[3],1]}else{
if(null!=n._r&&null!=n._g&&null!=n._b)return[n._r,n._g,n._b,null==n._a?1:n._a];if(null!=n.r&&null!=n.g&&null!=n.b)return[n.r,n.g,n.b,null==n.a?1:n.a];if("undefined"!=typeof paper&&null!==paper&&n instanceof paper.Color)return[t(255*n.red),t(255*n.green),t(255*n.blue),n.alpha];if(n instanceof Array){if(3==n.length)return n.concat(1);if(4==n.length)return n.slice()}}}else{if(2==n){let t=a(e[0]);return t[3]=e[1],t}if(3==n)return[e[0],e[1],e[2],1];if(4==n)return[e[0],e[1],e[2],e[3]]
;if(0==n)return[0,0,0,1]}for(let t=0;t<e.length;t++)console.log(e[t]);throw console.error(arguments),new Error("Illegal Argument")},s=function(e,n,l){return t(255*((l+=l<0?1:l>1?-1:0)<1/6?e+6*(n-e)*l:l<.5?n:l<2/3?e+(n-e)*(2/3-l)*6:e))};const f=[95.047,100,108.883];let u=function(e){return e>.04045?n((e+.055)/1.055,2.4):e/12.92},c=function(e){return e>.0031308?1.055*n(e,1/2.4)-.055:12.92*e},d=function(e,t,n){
return[.4124*(e=100*u(e/255))+.3576*(t=100*u(t/255))+.1805*(n=100*u(n/255)),.2126*e+.7152*t+.0722*n,.0193*e+.1192*t+.9505*n]},p=function(e,n,l){return[t(255*c((3.2406*e+-1.5372*n+-.4986*l)/100)),t(255*c((-.9689*e+1.8758*n+.0415*l)/100)),t(255*c((.0557*e+-.204*n+1.057*l)/100))]};e.prototype={alphaBlend:function(){let t=a.apply(undefined,arguments),n=this._a,i=t[3],s=l(1,r(0,i*(1-n))),f=l(1,r(0,n+s));return f?new e(o(this._r*n+t[0]*s)/f,o(this._g*n+t[1]*s)/f,o(this._b*n+t[2]*s)/f,f):new e(0,0,0,0)
},blend:function(t){let n=1-(t=l(1,r(0,t))),i=a.apply(undefined,Array.prototype.slice.apply(arguments,[1])),o=this.srlab,s=e.rgbToSrlab(i);return new e(e.srlabToRgb(o[0]*n+s[0]*t,o[1]*n+s[1]*t,o[2]*n+s[2]*t),this._a*n+i[3]*t)},set:function(){let e=a.apply(undefined,arguments);return this.r=e[0],this.g=e[1],this.b=e[2],this.a=e[3],(this.r<0||this.r>255||this.g<0||this.g>255||this.b<0||this.b>255||this.a<0||this.a>1)&&console.log("Color components out of range "+e),this},setHsv:function(){
return this.set(e.hsvToRgb.apply(undefined,arguments),this._a)},toString:function(){return"r: "+this.r+",g: "+this.g+",b: "+this.b+",a: "+this.a},toJSON:function(){return{r:this._r,g:this._g,b:this._b,a:this._a}},equals:function(e){return e&&this._r==e._r&&this._g==e._g&&this._b==e._b&&this._a==e._a},copy:function(){return new e(this)}};let h=["r","g","b","a"];for(let t=0;t<h.length;++t)!function(t){let n="_"+t;Object.defineProperty(e.prototype,t,{get:function(){return this[n]},set:function(e){
this[n]!=e&&(this[n]=e,this.cache=null)}})}(h[t]);let g=["hex","rgba","rgbaFunction","css","luma","hsv","hsl","lab","srlab","lch"];for(let t=0;t<g.length;++t)!function(n){let l=(t<5?"to":"rgbTo")+n.charAt(0).toUpperCase()+n.slice(1);Object.defineProperty(e.prototype,n,{get:function(){let t=this.cache&&this.cache[n];if(null==t){this.cache||(this.cache={});let t=e[l].apply(undefined,[this]);return this.cache[n]=t,t}return t}})}(g[t]);return e.shade_lab=function(t){
let i=a.apply(undefined,Array.prototype.slice.apply(arguments,[1])),o=e.rgbToLch(i),s=o[0],f=s+100*t,u=o[1],c=1-n(2*s/100-1,2),d=1-n(2*f/100-1,2),p=l(2*u,r(u,u*d/c));return new e(e.lchToRgb(f,p,o[2]),i[3])},e.shade_yuv=function(t){let n=a.apply(undefined,Array.prototype.slice.apply(arguments,[1])),l=e.rgbToYbrpb(n),r=l[0],i=Math.max(0,Math.min(1,r+t)),o=l[1],s=l[2];return t>0?(o=Math.max(3.57143*i-3.57143,Math.min(o,-.5814*i+.5814)),
s=Math.max(1.78571*i-1.78571,Math.min(s,-.69444*i+.69444))):(o=Math.min(3.57143*i,Math.max(o,-.5814*i)),s=Math.min(1.78571*i,Math.max(s,-.69444*i))),new e(e.yprpbToRgb(i,o,s),n[3])},e.shade=function(t){let n=a.apply(undefined,Array.prototype.slice.apply(arguments,[1])),l=n[0]/255,r=n[1]/255,o=n[2]/255,s=[.17*l+.72*r+.11*o,.64*l+.28*r+.08*o,.2*l+.23*r+.57*o];s[0]=Math.max(0,Math.min(1,s[0]+t)),s[1]=Math.max(0,Math.min(1,s[1]+t)),s[2]=Math.max(0,Math.min(1,s[2]+t)),
t>0&&(s[0]=Math.max(s[0],3.58377*s[1]-2.58377),s[2]=Math.max(s[2],4.77344*s[1]-3.77344));let f=[i(Math.round(255*(-.65039*s[0]+1.77384*s[1]-.12345*s[2]))),i(Math.round(255*(1.60663*s[0]-.345*s[1]-.26163*s[2]))),i(Math.round(255*(-.42008*s[0]-.48319*s[1]+1.90327*s[2])))];return new e(f,n[3])},e.hsvToRgb=function(){let e,n,l,r=arguments;if(r.length>=3)e=r[0],n=r[1],l=r[2];else{let t=r[0];t instanceof Array?(e=t[0],n=t[1],l=t[2]):(e=t.h||0,n=t.s||0,l=t.v||0)}if(0==n)return[l=t(255*l),l,l];{
let t=l,r=(1-n)*t;return[s(r,t,e+1/3),s(r,t,e),s(r,t,e-1/3)]}},e.hslToRgb=function(){let e,n,l,r=arguments;if(r.length>=3)e=r[0],n=r[1],l=r[2];else{let t=r[0];t instanceof Array?(e=t[0],n=t[1],l=t[2]):(e=t.h||0,n=t.s||0,l=t.l||0)}if(0==n)return[l=t(255*l),l,l];{let t=l<.5?l+l*n:l+n-l*n,r=2*l-t;return[s(r,t,e+1/3),s(r,t,e),s(r,t,e-1/3)]}},e.rgbToHsv=function(){let e,t=a.apply(undefined,arguments),n=t[0],i=t[1],o=t[2],s=l(n,i,o),f=r(n,i,o),u=f-s,c=0==f?0:u/f
;return 0==c?e=0:((e=n==f?(i-o)/u:i==f?2+(o-n)/u:4+(n-i)/u)<0&&(e+=6),e/=6),[e,c,f/255]},e.rgbToHsl=function(){let e=a.apply(undefined,arguments),t=e[0],n=e[1],i=e[2],o=l(t,n,i),s=r(t,n,i),f=s-o,u=0==s?0:f/s,c=0;return u>0&&((c=t==s?(n-i)/f:n==s?2+(i-t)/f:4+(t-n)/f)<0&&(c+=6),c/=6),[c,u,(s+o)/510]},e.rgbToLab=function(){let e=a.apply(undefined,arguments),t=d(e[0],e[1],e[2]);for(let e=0;e<3;e++){let l=t[e]/f[e];t[e]=l<.0088564517?7.787037037*l+4/29:n(l,1/3)}
return[116*t[1]-16,500*(t[0]-t[1]),200*(t[1]-t[2])]},e.labToRgb=function(e,t,n,l){let r=(e+16)/116,o=[r+t/500,r,r-n/200];for(let e=0;e<3;e++){let t=o[e];o[e]=f[e]*(t>6/29?t*t*t:.12841855*(t-4/29))}let a=p(o[0],o[1],o[2]);if(!l)for(let e=0;e<3;e++)a[e]=i(a[e]);return a},e.rgbToLch=function(){let t=e.rgbToLab.apply(undefined,arguments),n=t[1],l=t[2];return[t[0],Math.sqrt(n*n+l*l)/1.045436422,(Math.atan2(l,n)/Math.PI*180+360)%360]},e.lchToRgb=function(t,n,l){if(t>=100)return[255,255,255]
;if(t<=0)return[0,0,0];{l=(l%360+360)%360,l*=Math.PI/180,n=r(0,1.045436422*n);let i=Math.sin(l),o=Math.cos(l),a=e.labToRgb(t,n*o,n*i,!0);if(a[0]>255||a[0]<0||a[1]>255||a[1]<0||a[2]>255||a[2]<0){let l=0,r=n;for(;r-l>.1;)n=(r+l)/2,(a=e.labToRgb(t,n*o,n*i,!0))[0]>255||a[0]<0||a[1]>255||a[1]<0||a[2]>255||a[2]<0?r=n:l=n;n==r&&(a=e.labToRgb(t,l*o,l*i))}return a}},e.rgbToSrlab=function(){let e=a.apply(undefined,arguments);for(let t=0;t<3;t++)e[t]=100*u(e[t]/255)
;let t=[.32053*e[0]+.63692*e[1]+.04256*e[2],.161987*e[0]+.756636*e[1]+.081376*e[2],.017228*e[0]+.10866*e[1]+.874112*e[2]];for(let e=0;e<3;e++){let l=t[e]/100;t[e]=l<.0088564517?9.03296296*l:1.16*n(l,1/3)-.16}return[37.095*t[0]+62.9054*t[1]-8e-4*t[2],663.4684*t[0]-750.5078*t[1]+87.0328*t[2],63.9569*t[0]+108.4576*t[1]-172.4152*t[2]]},e.srlabToRgb=function(e,l,r,o){let a=[.01*e+904127e-9*l+456344e-9*r,.01*e-533159e-9*l-269178e-9*r,.01*e-.0058*r];for(let e=0;e<3;e++){let t=a[e]
;a[e]=t<=.08?.110705646*t:n((t+.16)/1.16,3)}let s=[5.435679*a[0]-4.599131*a[1]+.163593*a[2],-1.16809*a[0]+2.327977*a[1]-.159798*a[2],.03784*a[0]-.198564*a[1]+1.160644*a[2]];for(let e=0;e<3;e++)s[e]=t(255*c(s[e])),o||(s[e]=i(s[e]));return s},e.rgbToYbrpb=function(){let e=a.apply(undefined,arguments),t=e[0]/255,n=e[1]/255,l=e[2]/255;return[.28*t+.58*n+.14*l,-.16279*t-.33721*n+.5*l,.5*t-.40278*n-.09722*l]},e.yprpbToRgb=function(e,n,l,r){let o=[e+1.44*l,e-.41517*n-.69517*l,e+1.72*n]
;for(let e=0;e<3;e++)o[e]=t(255*o[e]),r||(o[e]=i(o[e]));return o},e.rgbToYra=function(){let t=e.rgbToYbrpb.apply(undefined,arguments),n=t[1],l=t[2];return[t[0],Math.sqrt(n*n+l*l),Math.atan2(l,n)]},e.yraToRgb=function(t,n,l){if(t>=1)return[255,255,255];if(t<=0)return[0,0,0];{let r=Math.sin(l),i=Math.cos(l),o=e.yprpbToRgb(t,n*i,n*r,!0);if(o[0]>255||o[0]<0||o[1]>255||o[1]<0||o[2]>255||o[2]<0){let l=0,a=n;for(;a-l>.01;)n=(a+l)/2,
(o=e.yprpbToRgb(t,n*i,n*r,!0))[0]>255||o[0]<0||o[1]>255||o[1]<0||o[2]>255||o[2]<0?a=n:l=n;n==a&&(o=e.yprpbToRgb(t,l*i,l*r))}return o}},e.cmykToRgb=function(e,t,n,l){let r=1-l;return[o(255*(1-e)*r),o(255*(1-t)*r),o(255*(1-n)*r)]},e.getLabDist=function(e,t){let n=e.lab,l=t.lab,r=n[0]-l[0],i=n[1]-l[1],o=n[2]-l[2];return Math.sqrt(r*r+i*i+o*o)},e.clampComponent=function(e){return i(e)},e.roundClamp=function(e){return o(e)},e.toRgba=a,e.toHex=function(){let e=arguments,n=!0,l=!1,r=e.length-1
;"boolean"==typeof e[r]&&(n=e[r],"boolean"==typeof(e=Array.prototype.slice.apply(e,[0,r]))[--r]&&(l=e[r],e=Array.prototype.slice.apply(e,[0,r])));let i=a.apply(undefined,e),o=((1<<24)+i[2]|i[1]<<8|i[0]<<16).toString(16).slice(1);return(n?"#":"")+(l?o+(256+t(255*i[3])).toString(16).substr(1):o)},e.toRgbaFunction=function(){let e=a.apply(undefined,arguments);return"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},e.toCss=function(){let t=a.apply(undefined,arguments)
;return 1==t[3]?e.toHex(t):e.toRgbaFunction(t)},e.toLuma=function(){let e=a.apply(undefined,arguments);return.2126*e[0]+.7152*e[1]+.0722*e[2]},e}"undefined"==typeof angular?e.Color=t():angular.module("iconfu.color.module",[]).factory("iconfu.color.Color",function(){return t()})}(self),function(e){function t(e){let t=function(e,n){if(e)for(let l in e)if(e.hasOwnProperty(l)&&"object"==typeof e[l])if("fill"==l){let t=e[l];if(0!=t.enabled){let e=t.value,l=t.colorRefs
;if("singleColor"==e)n[l[0].colorIndex]=!0;else if("linearGradient"==e||"radialGradient"==e)for(let e=0;e<l.length;e++)n[l[e].colorIndex]=!0}}else t(e[l],n);return n},n=function(e,t){let l=e.data;if(e.shadowBlur&&(e.shadowBlur*=t),e.shadowOffset&&(e.shadowOffset=e.shadowOffset.multiply(t)),l.ifuBlurDefs){let e=l.ifuBlurDefs,n=[];for(let l=0;l<e.length;l++){let r=e[l];n.push({blur:r.blur*t,offset:{x:r.offset.x*t,y:r.offset.y*t},opacity:r.opacity})}l.ifuBlurDefs=n}
let r=["ifuFillData","ifuMaskData"];for(let e=0;e<r.length;e++){let n=l[r[e]];if(n){n=JSON.parse(JSON.stringify(n));let i=["origin","destination","bounds"],o=["x","y","width","height"];for(let e=0;e<i.length;e++){let l=n[i[e]];if(l)for(let e=0;e<o.length;e++)null!=l[o[e]]&&(l[o[e]]*=t)}l[r[e]]=n}}let i=e.children;if(i)for(let e=0;e<i.length;e++)n(i[e],t)},l={isColorLight:function(t,n){return n=n===undefined?245:n,t&&e.toLuma(t)>n},isColorDark:function(t,n){return n=n===undefined?10:n,
t&&e.toLuma(t)<n},isAutoBackgroundDark:function(e,t,n){if(null==n&&(n=250),e){if(e.global.isMonochrome)return l.isColorLight(e.global.primaryColor||"#000",n);if(e.global.useDarkBackground)return!0;if(l.isIconColorsUsed(e)&&l.isColorLight(t,n)){let t=e.background&&e.background[0];if(!t||"cutout"==t.fill.value){let t=e.content.shadow;return!t||!t.enabled||"dropShadow"!=t.value}}return!1}return l.isColorLight(t,n)},getPathItems:function(e,t){if(t||(t=[]),PaperUtils.isPathItem(e))t.push(e);else{
let n=e.children;if(n)for(let e=0;e<n.length;e++)this.getPathItems(n[e],t)}return t},copyEffectSettings:function(e,t){t=$.extend({lazyCopy:!1,primaryColor:null,contentFillDisabled:!1,effectColors:[]},t||{}),e=$.extend(!t.lazyCopy,{},e),t.primaryColor&&l.setPrimaryColor(e,t.primaryColor),t.contentFillDisabled&&(e.content.fill.enabled=!1);let n=l.getUsedEffectColorIndices(e);0==n[0]&&n.shift();let r=t.effectColors;for(let t=0;t<n.length;t++){let l=r[t];l&&(e.global.effectColors[n[t]-1]=l)}return e
},mergeItem:function(e,t,n,r){if(t&&t.visible){let i=t.data;if(PaperUtils.isPathItem(t))r&&i&&i.ifuCutout?e=e&&e.subtract(t):i&&(1==i.ifuShadowType||n&&i.ifuWhitespace)||(e=e?e.unite(t):PaperUtils.clone(t));else if(!i||!i.ifuShadowGroup){let i=t.children;if(i)for(let t=0;t<i.length;t++)e=l.mergeItem(e,i[t],n,r)}}return PaperUtils.simplifyPath(e,.01),e},scaleItem:function(e,t){1!=t&&(e.scale(t,t,[0,0]),n(e,t))},createBlurGroup:function(e,t,n){n=n||0;let r=new paper.Group({data:{ifuBlurGroup:!0,
ifuBlurDefs:t},insert:!1}),i=new paper.Path.Rectangle(e.bounds.center,.1,.1);i.fillColor="rgba(128, 128, 128, 0.001)",i.data.ifuSvgDelete=!0,r.addChild(i);for(let i=0;i<t.length;i++){let o=t[i],a=PaperUtils.clone(e);a.translate(0,-n),a.fillColor="#000",a.shadowColor=e.fillColor.clone(),a.shadowColor.alpha*=o.opacity,a.shadowBlur=o.blur*l.getBlurCorrection(),a.shadowOffset=new paper.Point(o.offset.x,o.offset.y+n),r.addChild(a)}let o=e;return o.visible=!1,r.insertChild(0,o),r},
clipToPath:function(e,t){if(!e)return null;if(t&&!t.isEmpty()){if(PaperUtils.isBasicRectangle(t)&&t.bounds.contains(e.bounds))return e;if(PaperUtils.isPathItem(e)){let n=null;return e.bounds.intersects(t.bounds)&&(n=e.intersect(t))?n.isEmpty()?(e.remove(),n.remove()):(n._resolved=!0,e.replaceWith(n)):e.remove(),n}if("Group"==e.className&&e.isClipped()){let n=e.children[0],r=n&&l.clipToPath(n,t);return!r||r.isEmpty()?(e.remove(),null):(n.replaceWith(r),e)}{let n=e.children
;if(n)for(let e=n.length-1;e>=0;e--)l.clipToPath(n[e],t);return e.reduce()}}e.remove()},getBlurCorrection:function(){if(null==l.blurCorrection)if("undefined"==typeof document)l.blurCorrection=1;else{let e=document.createElement("canvas");e.width=100,e.height=20;let t=e.getContext("2d");t.rect(50,0,20,20),t.shadowColor="#000",t.shadowBlur=32,t.fill();let n=t.getImageData(0,10,100,1),r=42;for(let e=0;e<100;e++)if(n.data[4*e+3]>0){r=50-e;break}l.blurCorrection=null==r?1:42/r}return l.blurCorrection
},setPrimaryColor:function(t,n){t.global.primaryColor=e.toCss(n)},getUsedEffectColorIndices:function(e){if(e){if(l.isMonochrome(e))return[0];{let n=t(e,{});return Object.keys(n).filter(function(e){return n[e]}).map(function(e){return parseInt(e)}).sort()}}return[]},getUsedEffectColors:function(t){if(!t||l.isMonochrome(t))return[];{let n=l.getUsedEffectColorIndices(t),r=t.global.effectColors,i=[];for(let t=0;t<n.length;t++)0!=n[t]&&i.push(new e(r[n[t]-1]));return i}},
getPrimaryColorIfUsed:function(t){let n;return(n=!(t&&!l.isMonochrome(t))||0==l.getUsedEffectColorIndices(t)[0])?new e(t.global.primaryColor):null},isIconColorsUsed:function(e){return!e||!(l.isMonochrome(e)||e.content.fill&&e.content.fill.enabled)},isMonochrome:function(e){return!(!e||!e.global.isMonochrome)},reduceEffectSettings:function(e){let t={};for(let n in e){let r=e[n];Array.isArray(r)?t[n]=r.map(function(e){return l.reduceEffectSettings(e)
}):null!==r&&"object"==typeof r?!1===r.enabled||e.value&&e.value!=n&&!r.hidden||(t[n]=l.reduceEffectSettings(r)):t[n]=r}return t},updateEffectSettingsVersion:function(e){let t=!1;if("1.0"==e.version){t=!0;let n=function(e){if(e){let t=["linear","radial"];for(let n=0;n<t.length;n++){let l=e[t[n]+"Gradient"];l&&(l.stepped={enabled:!!l.steps,steps:l.steps||1},delete l.steps)}}},l=[e.content].concat(e.background);for(let e=0;e<l.length;e++){let t=l[e],r=t.shadow;if(r){let e=["drop","long","stacked"]
;for(let l=0;l<e.length;l++){let i=e[l],o=i+"Shadow",a=r[o];a&&(a.specificLightAngle={enabled:!a.globalLightAngle,lightAngle:a.lightAngle},delete a.globalLightAngle,delete a.lightAngle,"drop"==i&&(a.fill={value:"shade",shade:{intensity:a.intensity}},delete a.intensity),"long"==i&&n(a.fill),"drop"!=i&&"long"!=i||(a.enabled=r.value==o&&r.enabled,t[o]=a))}delete t.shadow}n(t.fill)}e.version="2.0"}if("2.0"==e.version){t=!0;let n=function(e){if(e&&"object"==typeof e)for(let t in e)if("colorRefs"==t){
let t=e.colorRefs;for(let e=0;e<t.length;e++)t[e].opacity/=100}else e.hasOwnProperty(t)&&n(e[t])};n(e),e.version="3.0"}return t}};return l}"undefined"==typeof angular?e.EffectUtils=t(Color):angular.module("iconfu.utils.module").factory("iconfu.EffectUtils",["iconfu.color.Color",function(e){return t(e)}])}(self),function(e){function t(){var e=0,t=1,n=function(e){var t=e.children
;if("Path"==e.className&&e.isClosed()&&!e.isEmpty())e.lastSegment.point.getDistance(e.firstSegment.point)<1e-4&&(e.firstSegment.handleIn=e.lastSegment.handleIn,e.removeSegment(e.segments.length-1));else if(t)for(var l=0;l<t.length;l++)n(t[l])},l=function(e,t){for(var n=new(t=t||paper).Group({insert:!1,data:{ifuWidth:e[0],ifuHeight:e[1]}}),l=e[2],i=0;i<l.length;++i)n.addChild(r(l[i]));return n},r=function(l,r){var i;r=r||paper;var o={insert:!1,pathData:l[0],fillColor:l[1],visible:l[2],data:{
ifuWhitespace:l[3],ifuCutout:l[4],ifuShadowType:l[5],ifuShading:l[6],ifuColorSchemeColorDefIds:l[8],ifuColorSchemeId:l[9],ifuColorSchemeDefId:l[10],ifuColorSchemeColorDefId:l[11]},_resolved:!0};switch(l[7]){case e:i=new r.Path(o);break;case t:i=new r.CompoundPath(o);break;default:throw"unknown path type"}return n(i),i};return{TYPE_PATH:e,TYPE_COMPOUND_PATH:t,correctPathsEnd:n,createItemPaperItem:l,createComponentPaperItem:r}}
"undefined"==typeof angular?e.RenderUtils=t():angular.module("iconfu.utils.module").factory("iconfu.RenderUtils",[function(){return t()}])}(self),function(e){function t(e,t,n,l){let r,i,o=function(e,t){let n=(t=t||"\t").length,l="",r="\n",i=e.split(/(<!--|-->|<!\[CDATA\[|]]>)/g),o=i.length;for(let e=0;e<o;e++){let a=i[e];if("<!--"==a)for(l+=r+a;++e<o&&(l+=i[e],"-->"!=i[e]););else if("<![CDATA"==a)for(l+=r+a;++e<o&&(l+=i[e],"]]>"!=i[e]););else if((a=a.trim()).length){
let e,i,o=a.replace(/>\s+</g,"><").replace(/</g,"~&&~<").split("~&&~");for(let a=0;a<o.length;a++)e=i,i=o[a],/^<[\w:]/.test(i)?/\/>$/.test(i)?l+=r:(l+=r,r+=t):/^<\/[\w:]/.test(i)?/^<[\w:](?!.*\/>)/.test(e)&&/^<[\w:][\w:\-\.]*/.exec(e)==/^<\/[\w:][\w:\-\.]*/.exec(i)[0].replace("/","")?r=r.slice(0,-n):l+=r=r.slice(0,-n):(/^<!/.test(i)||/^<\?/.test(i))&&(l+=r),l+=i}}return"\n"==l[0]?l.slice(1):l},a={href:"http://www.w3.org/1999/xlink",xlink:"http://www.w3.org/2000/xmlns"
},s=new paper.Formatter(5),f=function(e,t,n){let l=document.createElementNS("http://www.w3.org/2000/svg",e);if(n&&l.appendChild(document.createTextNode(n)),t)for(let e in t)if(t.hasOwnProperty(e)){let n=t[e],r=a[e];"number"==typeof n&&(n=s.number(n)),r?l.setAttributeNS(r,e,n):l.setAttribute(e,n)}return l},u=function(e,t){return(t=t||{}).x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,f("rect",t)},c=function(e,t,n,l,r){return n&&(t["in"]=n),l&&(t.in2=l),r&&(t.result=r),f(e,t)
},d=function(e,t,n,l){return c("feGaussianBlur",{stdDeviation:t?e+","+t:e},n,null,l)},p=function(e,t,n,l){let r={};return e&&(r.dx=e),t&&(r.dy=t),c("feOffset",r,n,null,l)},h=function(e,t,n){let l={};if("string"==typeof e)l.values=e;else{let t=e&&e.length;if(t){let n="";for(let l=0;l<t;l++)n+=(l?" ":"")+e[l];l.values=n}}return c("feColorMatrix",l,t,null,n)},g=function(e){let t=f("feMerge");if(e)for(let n=0;n<e.length;n++)t.appendChild(f("feMergeNode",{"in":e[n]}));return t
},m=function(e,t,n,l,r,i,o,a){let u;if((u=l?{cx:s.number(t.x),cy:s.number(t.y),r:s.number(Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2)))}:{x1:s.number(t.x),y1:s.number(t.y),x2:s.number(n.x),y2:s.number(n.y)}).id=e,u.gradientUnits="userSpaceOnUse",a)for(var c in a)u[c]=a[c];let d=f((l?"radial":"linear")+"Gradient",u),p=r.length;for(let e=0;e<p;e++){let t=f("stop",{offset:i?i[e]:e/(p+1),"stop-color":r[e]});o&&null!=o[e]&&t.setAttribute("stopOpacity",o[e]),d.appendChild(t)}return d
},y=function(e,t){let n=e&&e.length;if(n){let l=t.getElementsByTagName("defs")[0];if(!l||l.parentNode!=t){let e;l=f("defs");for(let n=0;n<t.childElementCount&&!e;n++){let l=t.childNodes[n],r=l.nodeName;"title"!=r&&"desc"!=r&&(e=l)}e?t.insertBefore(l,e):t.appendChild(l)}for(let t=0;t<n;t++)l.appendChild(e[t])}},b=function(t,l,r,i){r=r||{};let a,u,c=(l=l||{}).spriteName||"icon-sprite",m=!!l.asStyleable,b=!!l.asSprite,w=l.cssColorPrefix||"",S=i&&i.effectSettings
;m&&(i.usedEffectColorIndices||(i.usedEffectColorIndices=n.getUsedEffectColorIndices(S)),null==i.isIconColorsUsed&&(i.isIconColorsUsed=n.isIconColorsUsed(S)),u=(a=i&&R(w,i,S,l.useFreeColor))&&a.freeColorData);let v=r.defsSet;v||(v=e["new"](),r.defsSet=v),s=new paper.Formatter(l.precision);let I=t.layers;if(I)for(let e=0;e<I.length;e++)C(I[e],m,i);let k=function(e,t){let n=e.blurData;if(n){let l,r,i=e.data.ifuFillData;if(n.isInset)r=new paper.Rectangle(0,0,100,100);else{let t=e.bounds
;l=n.blurBounds;let i=Math.floor(100*(l.x-t.x)/t.width),o=Math.floor(100*(l.y-t.y)/t.height);r=new paper.Rectangle(i,o,Math.ceil((l.x+l.width)/t.width*100-i),Math.ceil((l.y+l.height)/t.height*100-o))}let o="filter-"+paper.generateUUID(),a=f("filter",{id:o,x:r.x+"%",y:r.y+"%",width:r.width+"%",height:r.height+"%","color-interpolation-filters":"sRGB"}),u=n.blurDefs,c=[];for(let e=0;e<u.length;e++){let t=u[e],n="blur"+e
;a.appendChild(h("1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 "+s.number(t.opacity)+" 0","SourceGraphic")),a.appendChild(p(s.number(t.offset.x),s.number(t.offset.y))),a.appendChild(d(s.number(t.blur/2),null,null,n)),c.push(n)}u.length>1&&a.appendChild(g(c)),o=v.addElement(a),t.setAttribute("filter","url(#"+o+")"),i&&l&&(i.blurBounds={x:l.x,y:l.y,width:l.width,height:l.height}),delete e.blurData}},U=JSON.parse(JSON.stringify(l));U.asString=!1,U.onExport=k;let E,T=t.exportSVG(U)
;for(let e=0;e<T.childElementCount;e++)if("g"==T.childNodes[e].nodeName){E=T.childNodes[e];break}if(E){let e="stroke",t="font",n=[e,e+"-width",e+"-linecap",e+"-linejoin",e+"-miterlimit",e+"-dasharray",e+"-dashoffset",t+"-family",t+"-weight",t+"-size","text-anchor"];for(let e=0;e<n.length;e++)E.removeAttribute(n[e])}let D=T.getElementsByTagName("defs")[0],M={};if(D&&D.parentNode==T){for(;D.firstChild;){let e=D.firstChild;M[e.getAttribute("id")]=e,D.removeChild(e)}D.parentNode.removeChild(D)}
if(x(T,M,v),A(T,v,m,w,u,i),b){let e=f("symbol",{id:c+"-"+l.symbolId,"class":c,viewBox:s.rectangle(t.view.bounds)});for(;T.lastChild;)e.appendChild(T.lastChild);T=e}else{l.isFreeSize&&(T.removeAttribute("width"),T.removeAttribute("height")),T.setAttribute("viewBox",s.rectangle(t.view.bounds)),y(v.getDefs(),T);let e=l.description;e&&""!=e&&T.insertBefore(f("desc",null,e),T.childNodes[0]);let n=l.title;n&&""!=n&&T.insertBefore(f("title",null,n),T.childNodes[0])}if(m){
let e=a.colorNames,t=" Color names: ";for(let n=0;n<e.length;n++)t+=(n?", ":"")+e[n];t+=" ",T.insertBefore(document.createComment(t),T.childNodes[0])}if(l.asString||l.asCompactString){let e=(new XMLSerializer).serializeToString(T);return b&&(e=e.replace(/\s*xmlns=".*?"\s*/," ")),l.asCompactString?O(e):b?e:o(e)}return T},x=function(e,t,n){let l=e.childNodes;if(l)for(let e=0;e<l.length;e++)x(l[e],t,n);let r=e.attributes;for(let l=0;l<r.length;l++){let i=r[l];if(i.specified){
let l=i.name,r=/url\("?#([a-zA-Z0-9-]*)"?\)/.exec(i.value);if(r){let i=r[1],o=t[i];if(o){let t=n.addElement(o);i!=t&&e.setAttribute(l,"url(#"+t+")")}}}}},C=function(e,t,n){let l=e.data;if(l&&l.ifuSvgDelete)e.remove();else{if(l){if(t)if(l.ifuFillData)$.isEmptyObject(l.ifuFillData)&&delete l.ifuFillData,delete l.ifuColorSchemeColorDefId;else if(l.ifuColorSchemeColorDefId){let e=n.colorSchemeMap[l.ifuColorSchemeColorDefId];e&&(l.ifuFillData={colorRef:{colorType:"iconColor",colorIndex:e.index,
colorHex:e.color}},l.ifuShading&&(l.ifuFillData.colorRef.lAdjust=100*l.ifuShading))}Object.keys(l).forEach(function(e){0==e.lastIndexOf("ifu",0)&&(t&&"ifuFillData"==e||"ifuMaskData"==e||delete l[e])})}e.blendMode="normal",t&&(e.fillColor=null);let r=e.children;if(r){if(e instanceof paper.Layer&&1==r.length&&r[0]instanceof paper.Group){let t=r[0];t.remove(),e.style.set(t.style),e.addChildren(t.children)}for(let t=r.length-1;t>=0;t--){let n=r[t],l=n.data;if(l)if(l.ifuBlurGroup){let e=n.children[0]
;e.visible=!0,e.blurData=l.ifuBlurData,n.replaceWith(e)}else if(l.ifuSvgIgnoreClip&&(n.remove(),n.children&&n.children.length)){let l=n.removeChildren().slice(1);e.insertChildren(t,l),t+=l.length}}for(let l=e.children.length-1;l>=0;l--)C(e.children[l],t,n)}}},w=function(e,t,n,l,r){let i,o=!0,a=!1,s=f("g");e.parentNode&&e.parentNode.replaceChild(s,e),a&&o?(i=f("g"),s.appendChild(i),i.appendChild(e)):s.appendChild(e);let u=n.colorHex,c=l&&n.colorIndex==l.colorIndex&&n.colorType==l.colorType
;s.setAttribute("color",c?"currentColor":u),o?(s.setAttribute("class",t),a&&i.setAttribute("style","color:var(--"+t+")")):a&&s.setAttribute("style","color:var(--"+t+(c?"":", "+u)+")"),e.setAttribute("fill","currentColor");let d=n.lAdjust;if(d){let t=I(d,!0),n=f("pattern",{id:"pattern-"+paper.generateUUID(),x:"4",y:"4",width:"64",height:"64",patternUnits:"userSpaceOnUse"});n.appendChild(f("rect",{filter:"url(#"+r.addElement(t)+")",fill:"currentColor",x:"0",y:"0",width:"72",height:"72"})),
e.setAttribute("fill","url(#"+n.id+")");let l=f("defs");l.appendChild(n),e.parentNode.insertBefore(l,e)}return s},S=function(e,t,n,l){return(e?e+"-":"")+("effectColor"==t.colorType&&l?"effect-color-":"color-")+(("effectColor"==t.colorType?n.usedEffectColorIndices.indexOf(t.colorIndex):t.colorIndex)+1)},v=function(e,t,n){const l="data-paper-data";let r=f("g");e.parentNode&&e.parentNode.replaceChild(r,e);let i=["clip-path","fill","filter","mask",l];for(let t=0;t<i.length;t++){
let n=i[t],l=e.getAttribute(n);null!=l&&(e.removeAttribute(n),r.setAttribute(n,l))}let o=f("mask",{id:"mask-"+paper.generateUUID(),x:t.x,y:t.y,width:t.width,height:t.height,fill:"#fff",maskUnits:"userSpaceOnUse"});o.appendChild(e);let a=n.addElement(o);return o.setAttribute("id",a),r.appendChild(u(t,{mask:"url(#"+a+")"})),r},A=function(e,n,l,r,i,o){let a=e.childNodes;if(a)for(let e=0;e<a.length;e++)A(a[e],n,l,r,i,o);const s="data-paper-data";let c=JSON.parse(e.getAttribute(s));if(c){
let a=c.ifuFillData;if(a){let d=a.blurBounds;!d||l&&(a.gradient||"fixedColor"==a.colorRef.colorType)||(e=v(e,d,n));let p=d||a.bounds;if(l){1==Object.keys(c).length?e.removeAttribute(s):delete c.ifuFillData;let l,d=["filter","mask","clip-path"],h={};for(let t=0;t<d.length;t++){let n=d[t],l=e.getAttribute(n);null!=l&&(h[n]=l,e.removeAttribute(n))}let g=o.isIconColorsUsed;if(a.gradient){let s=a.stops,c=[],d=[],h=f("g");e.parentNode.replaceChild(h,e);let y=a.steps;if(y){
let e=s[0],l=s[1],b=e.colorRef,x=l.colorRef,C=S(r,b,o,g),v=w(u(p),C,b,i,n);h.appendChild(v);let A=S(r,x,o,g),I=w(u(p),A,x,i,n);h.appendChild(I);let R=s[0].offset,k=s[1].offset,U=[],E=[];for(let e=1;e<=y;e++){let n=R+(k-R)*e/(y+1);U.push(t.toHex(t.hsvToRgb(0,0,(e-1)/y))),E.push(n),U.push(t.toHex(t.hsvToRgb(0,0,e/y))),E.push(n),c.push((b.opacity*(y-(e-1))+x.opacity*(e-1))/y),d.push(n),c.push((b.opacity*(y-e)+x.opacity*e)/y),d.push(n)}
let O=m("color-"+paper.generateUUID(),a.origin,a.destination,a.radial,U,E),T=n.addElement(O),D=f("mask",{id:"mask-"+paper.generateUUID()});D.appendChild(u(p,{fill:"url(#"+T+")"}));let M=n.addElement(D);I.setAttribute("mask","url(#"+M+")")}else for(let e=0;e<s.length;e++){let t=s[e],l=t.colorRef,y=s[e-1],b=y&&y.colorRef;if(c.push(null==t.colorRef.opacity?1:t.colorRef.opacity),d.push(t.offset),
0==e||l.colorType!=b.colorType||l.colorIndex!=b.colorIndex||l.lAdjust!=b.lAdjust||l.colorHex!=b.colorHex){let s,c=u(p);if("fixedColor"==l.colorType)c.setAttribute("fill",l.colorHex);else{let e=S(r,l,o,g);s=w(c,e,l,i,n)}if(h.appendChild(s||c),e>0){let e=m("color-"+paper.generateUUID(),a.origin,a.destination,a.radial,["#000000","#ffffff"],[y.offset,t.offset]),l=n.addElement(e),r=f("mask",{id:"mask-"+paper.generateUUID()});r.appendChild(u(p,{fill:"url(#"+l+")"}));let i=n.addElement(r)
;(s||c).setAttribute("mask","url(#"+i+")")}}}let b=f("mask",{id:"mask-"+paper.generateUUID()});b.appendChild(e);for(let e=c.length-1;e>0;e--)c[e]==c[e-1]&&(e!=c.length-1&&c[e]!=c[e+1]||(c.splice(e,1),d.splice(e,1)));if(c.length>1||1!=c[0]){let e=f("filter",{id:"filter-"+paper.generateUUID(),"color-interpolation-filters":"sRGB"});e.appendChild(f("feOffset"));let t=n.addElement(e);h.setAttribute("filter","url(#"+t+")")}let x=[];for(let e=0;e<c.length;e++)x.push(t.toHex(t.hsvToRgb(0,0,c[e])))
;if(1==x.length)e.setAttribute("fill",x[0]);else{let t=m("color-"+paper.generateUUID(),a.origin,a.destination,a.radial,x,d),l=n.addElement(t);e.setAttribute("fill","url(#"+l+")")}let C=n.addElement(b);h.setAttribute("mask","url(#"+C+")"),l=h}else{let t=a.colorRef,s=t.colorType,f=t.colorHex;if("fixedColor"==s)f&&e.setAttribute("fill",f),l=e;else{let a=S(r,t,o,g);l=w(e,a,t,i,n)}null!=t.opacity&&1!=t.opacity&&e.setAttribute("fill-opacity",t.opacity)}let y=c.ifuMaskData;if(y){delete c.ifuMaskData,
0==Object.keys(c).length?e.removeAttribute(s):e.setAttribute(s,JSON.stringify(c));let t=m("color-"+paper.generateUUID(),y.origin,y.destination,y.radial,y.stopColors,y.stopOffsets),r=n.addElement(t),i=f("mask",{id:"mask-"+paper.generateUUID()}),o=u(y.bounds,{fill:"url(#"+r+")"});if(i.appendChild(o),l.getAttribute("mask")||l.getAttribute("filter")){let e=f("g",{mask:l.getAttribute("mask"),filter:l.getAttribute("filter")});l.removeAttribute("filter"),l.parentNode&&l.parentNode.replaceChild(e,l),
e.appendChild(l),l=e}let a=n.addElement(i);l.setAttribute("mask","url(#"+a+")")}let b=!1;if(Object.keys(h).length)for(let e=0;e<d.length;e++)if(null!=l.getAttribute(d[e])){b=!0;break}if(b){let e=f("g");l.parentNode.replaceChild(e,l),e.appendChild(l),l=e}for(let e in h)l.setAttribute(e,h[e])}}if(!l){let t=c.ifuMaskData;if(t){delete c.ifuMaskData,0==Object.keys(c).length?e.removeAttribute(s):e.setAttribute(s,JSON.stringify(c))
;let l=m("color-"+paper.generateUUID(),t.origin,t.destination,t.radial,t.stopColors,t.stopOffsets),r=n.addElement(l),i=f("mask",{id:"mask-"+paper.generateUUID()}),o=u(t.bounds,{fill:"url(#"+r+")"});i.appendChild(o);let a=n.addElement(i);e.setAttribute("mask","url(#"+a+")")}}}},I=function(e){let t=s.number(e/100),n=e>0,l=f("filter",{id:"filter-"+paper.generateUUID(),"color-interpolation-filters":"sRGB"})
;return l.appendChild(h("0.17 0.72 0.11 0 "+t+" 0.64 0.28 0.08 0 "+t+" 0.20 0.23 0.57 0 "+t+" 0 0 0 1 0",null,n?"r1":null)),n&&(l.appendChild(h("1 0 0 0 0 3.58377 0 0 0 -2.58377 4.77344 0 0 0 -3.77344 0 0 0 1 0")),l.appendChild(c("feBlend",{mode:"lighten"},null,"r1"))),l.appendChild(h("-0.65039 1.77384 -0.12345 0 0 1.60663 -0.345 -0.26163 0 0 -0.42008 -0.48319 1.90327 0 0 0 0 0 1 0")),l},R=function(e,n,l,r){let i,o=[],a=[],s=n.isIconColorsUsed;if(s){let t=n.colorSchemeMap;if(t){
let l=Object.keys(t).map(function(e){return t[e]});l.sort(function(e,t){return e.index-t.index});for(let t=0;t<l.length;t++)o.push(S(e,{colorType:"iconColor",colorIndex:t},n,s)),a.push(l[t].color);r&&(i=1==l.length?{colorName:o[0],defaultValue:a[0],colorType:"iconColor",colorIndex:0}:null)}}var f=n.usedEffectColorIndices;if(l&&f)for(let u=0;u<f.length;u++){let c=f[u],d=0==c?l.global.primaryColor:l.global.effectColors[c-1],p=S(e,{colorType:"effectColor",colorIndex:c},n,s),h=t.toHex(d);o.push(p),
a.push(h),r&&i===undefined&&(i={colorName:p,defaultValue:h,colorType:"effectColor",colorIndex:c})}return{colorNames:o,defaultValues:a,freeColorData:i}},k=function(e,t,n,l){let r=!0,i=!1,o=(n.spriteName,!!n.asStyleable),a=!!n.asSprite,s="Iconfu SVG "+(a?"Sprite ":"")+"Demo",f="",u="",c=function(e){p("<"+e+">"),f+="\t"},d=function(e){f=f.slice(0,-1),p("</"+e+">")},p=function(e){"string"==typeof e&&(e=[e]);for(let t=0;t<e.length;t++)u+=f+e[t]+"\n";return u};p("<!DOCTYPE html>"),c('html lang="en"'),
c("head"),p(['<meta charset="UTF-8">','<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">',"<title>"+s+"</title>"]),p(['<link rel="stylesheet" type="text/css" href="_demo/colorpicker.css" />']),p(['<script src="_demo/colorpicker.js"></script>']),c("style"),u+=U(f),d("style"),c("script"),
o&&p(["function setCssColor(name, value) {","  var styleSheetId = name + '-style-sheet';","  var styleSheet = document.getElementById(styleSheetId);","  if (styleSheet) {","    styleSheet.removeChild(styleSheet.firstChild);","  } else {","    styleSheet = document.createElement('style');","    styleSheet.id = styleSheetId;","    styleSheet.type = 'text/css';","    (document.head || document.getElementsByTagName('head')[0]).appendChild(styleSheet);","  }","  styleSheet.appendChild(document.createTextNode('* .' + name + ' {color: '+ value + '}'));","};",""]),
p(["function colorValueToHex(colorValue, accept3Hex) {","  colorValue = colorValue.toLowerCase();","  var hex = '';","  var rgbMatch = colorValue.match(/rgba?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3}).*\\)/);","  if (rgbMatch) {","    for (var i = 0; i < 3; i++) {","      hex += ('0' + Number(rgbMatch[i + 1]).toString(16)).substr(-2);","    }","  } else {","    var hexMatch = colorValue.match(/[0-9a-f]{6}/);","    if (hexMatch) {","      hex = hexMatch[0];","    } else if (accept3Hex) {","      hexMatch = colorValue.match(/([0-9a-f])([0-9a-f])([0-9a-f])/);","      if (hexMatch) {","        for (var i = 0; i < 3; i++) {","          hex += hexMatch[i + 1] + hexMatch[i + 1];","        }","      }","    }","  }","  return hex == '' ? null : '#' + hex;","};","","function getBackgroundHex(element) {","  var background = window.getComputedStyle(element, null).getPropertyValue('background-color');","  return colorValueToHex(background);","}",""]),
o&&p(["function getColorNameForId(id) {","  var nameMatch = id.match(/(.*)-(?:preview|input)/);","  return nameMatch && nameMatch[1];","}","","function onColorInput(colorInput, isChange) {","  var colorName = getColorNameForId(colorInput.id);","  var colorValue = colorValueToHex(colorInput.value, isChange);","  var colorPreviewElement = document.getElementById(colorName + '-preview');","  var oldColorValue = getBackgroundHex(colorPreviewElement);","  if (colorValue && colorValue != oldColorValue) {","    setCssColor(colorName, colorValue);","    colorPreviewElement.style.background = colorValue;","  }","  if (isChange) {","    colorInput.value = colorValue || oldColorValue;","  }","}","","function showColpick(e) {","  Colorpicker.show(e, function(colorHex, element) {","    var colorName = getColorNameForId(element.id);","    setCssColor(colorName, colorHex);","    var previewElement = document.getElementById(colorName + '-preview');","    previewElement.style.background = colorHex;","    var colorInput = document.getElementById(colorName + '-input');","    colorInput.value = colorHex;","  }, getBackgroundHex(e));","}",""]),
p(["function showBgColpick(e) {","  var iconsElem = document.getElementsByClassName('icons-table')[0];","  Colorpicker.show(e, function(hexColor, element) {","    e.style.background = iconsElem.style.background = hexColor;","  }, getBackgroundHex(e));","}",""]),
o&&p(["function copyCss() {","  var css = '';","  var asVariables = "+(i?r?"document.getElementById('radio-css-var').checked;":"true;":"false;"),"  var previewElems = document.getElementsByClassName('css-color-preview');","  if (asVariables) {","    var css = 'svg {\\r\\n';","    for (var i = 0; i < previewElems.length; i++) {","      css += '  --' + getColorNameForId(previewElems[i].id) + ': ' + getBackgroundHex(previewElems[i]) + ';\\r\\n';","    }","    css += '}\\r\\n';","  } else {","    for (var i = 0; i < previewElems.length; i++) {","      css += '.' + getColorNameForId(previewElems[i].id) + ' { color: ' + getBackgroundHex(previewElems[i]) + '; }\\r\\n';","    }","  }","  copy(css);","}","","function copy(s) {","  if (window.clipboardData && window.clipboardData.setData) {","    // IE specific code path to prevent textarea being shown while dialog is visible.",'    return clipboardData.setData("Text", s);','  } else if (document.queryCommandSupported && document.queryCommandSupported("copy")) {','    var ta = document.createElement("textarea");',"    ta.textContent = s;",'    ta.style.position = "fixed";  // Prevent scrolling to bottom of page in MS Edge.',"    document.body.appendChild(ta);","    ta.select();","    try {",'      return document.execCommand("copy");  // Security exception may be thrown by some browsers.',"    } catch (ex) {","      return false;","    } finally {","      document.body.removeChild(ta);","    }","  }","}"]),
d("script"),d("head"),c("body"),c("header"),p(["<h1>"+s+"</h1>"]),d("header");let h,g=l&&l.effectSettings;if(o){let e=n.cssColorPrefix,t=R(e,l,g,n.useFreeColor);h=t.freeColorData,p("<h2>CSS</h2>"),r&&i&&(p('<input id="radio-css-class" class="ifu-radio-input" type="radio" name="css-style" checked="true" />'),p('<input id="radio-css-var" class="ifu-radio-input" type="radio" name="css-style" />'),c('div style="margin-left: 48px;"'),
p('<label class="ifu-radio-label" for="radio-css-class">CSS Classes</label>'),p('<label class="ifu-radio-label" for="radio-css-var">CSS Variables <span class="ifu-radio-label-small-text">(does not work with Internet Explorer)</span></label>'),d("div")),c('div class="css-code"');let o=function(e,t){c('div style="margin: 10px 0; display: flex; flex-wrap: wrap; align-items: center;"'),r&&p('<span class="css-class" style="flex: 1 0 auto;">.'+e+"&nbsp;</span>"),c("span"),
i&&p('<span class="css-var">&nbsp;&nbsp;--'+e+":</span>"),r&&p('<span class="css-class">{ color:</span>'),c('span style="white-space: nowrap"'),p('<span id="'+e+'-preview" class="color-preview css-color-preview" style="background: '+t+'" onclick="showColpick(this)"></span>'),p('<input id="'+e+'-input" type="text" value="'+t+'" oninput="onColorInput(this, false)" onchange="onColorInput(this, true)" spellcheck="false"><span>;</span>'),r&&p('<span class="css-class">}</span>'),d("span"),d("span"),
d("div")};i&&p('<div class="css-var">* {</div>');for(let e=0;e<t.colorNames.length;e++)o(t.colorNames[e],t.defaultValues[e]);i&&p('<div class="css-var">}</div>'),c('div style="text-align: right;"'),p('<button class="css-button" onclick="copyCss()">Copy CSS to Clipboard</button>'),d("div"),d("div"),c('div class="css-notes"'),h&&p("<div>Note: <code>"+h.colorName+"</code> is a free color which can be set through the <code>color</code> CSS property.</div>"),
p('<div>Click <a href="https://www.iconfu.com/docs/css_colorizable_svgs/overview">here</a> for technical information on CSS colorizable SVGs</a></div>'),d("div")}p("<h2>"+e.length+" Icons</h2>"),c('div style="flex: 0 0 auto; display: flex; justify-content: flex-end; align-items: center; margin: 12px 0;"');let m=l.backgroundColorHex||"#ffffff";p(["<span>Background Color</span>",'<span class="color-preview" style="background: '+m+'" onclick="showBgColpick(this)"></span>']),d("div"),
c('div class="icons-table" style="background: '+m+";"+(h?" color: "+h.defaultValue+";":"")+'"');for(let n=0;n<e.length;n++){let l=e[n];if(c('div class="icon-element"'),p('<div class="icon-index">#'+n+"</div>"),c('div class="svg-icon-128"'),a)c("svg"),p(['<use xlink:href="#'+l+'"></use>']),d("svg");else{let e=t.svgs[n];e=e.replace(/^/gm,f),u+=e+"\n"}d("div"),p('<div class="icon-name">'+l+"</div>"),d("div")}for(let e=0;e<16;e++)p('<div class="icon-element icon-dummy"></div>');if(d("div"),
c("footer"),p(['<div class="footer">Created with <a href="https://www.iconfu.com">Iconfu.com</a> '+E(new Date)+"</div>"]),d("footer"),a){let e=t.svgSprite.replace(/^/gm,f);p(e)}d("body"),d("html");let y=(u=unescape(encodeURIComponent(u))).length,b=new Uint8Array(y);for(let e=0;e<y;e++)b[e]=u.charCodeAt(e);return b},U=function(e){let t="",n=function(n,l){t+=e+n+" {\n";for(let n=0;n<l.length;n++)t+=e+"\t"+l[n]+";\n";t+=e+"}\n"};return n("html, body",["height: 100%"]),
n("body",["display: flex","flex-direction: column","margin: 0","user-select: none"]),n("body, input, button",["color: #222",'font-family: "Roboto", "Helvetica Neue", "Helvetica", "Arial", sans-serif',"font-size: 16px","font-weight: 400","letter-spacing: .01em","line-height: 1.6"]),n("h1, h2",["margin: 0","color: #fff","font-weight: 400"]),n("h1",["padding: 20px 32px","font-size: 28px","background: #00bcd4"]),n("h2",["padding: 8px 32px","font-size: 24px","background: #4dd0e1"]),
n("a",["color: inherit"]),n("button",["margin: 12px 24px","padding: 10px 20px","border: 1px solid #ccc","border-radius: 5px","background: #fff","cursor: pointer"]),n("button:active",["background: #eee"]),n("button:focus",["outline: 0"]),n(".icons-table",["flex: 1 0 auto","display: flex","flex-flow: row wrap","justify-content: space-between"]),n(".icon-element",["width: 200px","margin: 20px","text-align: center"]),n(".icon-dummy",["height: 0","margin: 0"]),
n(".icon-index",["font-size: 12px","font-weight: 400","color: #888"]),n(".icon-name",["font-size: 16px","font-weight: 400","color: #888","user-select: text","overflow-wrap: break-word"]),n(".svg-icon-128 > *",["margin: 10px 0","width: 128px","height: 128px"]),n(".color-preview",["display: inline-block","width: 26px","height: 26px","margin: 0 8px","border-radius: 50%","border: 1.5px solid rgba(0, 0, 0, 0.1)","cursor: pointer"]),!0&&!1&&(n(".ifu-radio-input",["display: none"]),
n(".ifu-radio-label",["display: inline-block","cursor: pointer","position: relative","padding-left: 28px","margin: 16px 40px 0 0","line-height: 20px","font-size: 18px"]),n(".ifu-radio-label:before, .ifu-radio-label:after",["box-sizing: border-box","position: absolute","content: ''","border-radius: 50%","transition: all 400ms","color: #888"]),n(".ifu-radio-label:before",["left: 0","top: 0","width: 20px","height: 20px","border: 2px solid currentColor"]),
n(".ifu-radio-label:after",["top: 5px","left: 5px","width: 10px","height: 10px","background:  currentColor","transform: scale(0)"]),n(".ifu-radio-input:nth-of-type(1):checked ~ *>label:nth-child(1):after,.ifu-radio-input:nth-of-type(1):checked ~ *>label:nth-child(1):before,.ifu-radio-input:nth-of-type(2):checked ~ *>label:nth-child(2):after,.ifu-radio-input:nth-of-type(2):checked ~ *>label:nth-child(2):before",["color: #00BCD4","transform: scale(1)"]),
n("#radio-css-var:checked ~ * .css-class, #radio-css-class:checked ~ * .css-var",["display: none"]),n(".ifu-radio-label-small-text",["font-size: 14px"])),n("code, .css-code",["font-family: Roboto Mono, Helvetica Monospaced, monospace","font-weight: 600"]),n(".css-code",["flex: 0 0 auto","align-self: flex-start","display: inline-block","margin: 32px 48px","font-size: 20px","color: #888"]),n(".css-color-preview",["margin: 0 2px","vertical-align: middle"]),
n(".css-code input",["outline: none","width: 10ch","text-align: center","border-width: 0 0 2px","border-style: solid","border-color: #a0a0a0","font-family: inherit","font-size: inherit","font-weight: inherit","color: inherit"]),n(".css-code input:focus",["border-color: #444"]),n(".css-button",["margin: 24px 4px 0"]),n(".css-notes",["margin: 0 0 16px 48px","color: #888"]),n(".footer",["text-align: center","padding: 8px 0","font-size: 14px","color: #ffffff","background: #a0a0a0"]),t
},E=function(e){let t=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];return(e=e||new Date).getDate()+"-"+t[e.getMonth()]+"-"+e.getFullYear()+", "+e.toLocaleTimeString("en-US")},O=function(e){return e=(e=(e=(e=e.replace(/,/g," ")).replace(/([lLhHvVqcCsSQtTaA])([ .0-9-]*)\1/g,"$1$2 ")).replace(/ {2,}/g," ")).replace(/ -/g,"-")};return{exportSvg:b,exportSvgSprite:function(t,n,l){let r=f("svg",{style:"width: 0; height: 0;"});r.appendChild(f("defs")),
l.defsSet=l.defsSet||e["new"]();let i=l.defsSet;y(i.getDefs(),r),n.description&&r.insertBefore(f("desc",null,n.description),r.childNodes[0]),n.title&&r.insertBefore(f("title",null,n.title),r.childNodes[0]);let a=(new XMLSerializer).serializeToString(r);a=a.replace("<defs/>","<defs></defs>");let s="";for(let e=0;e<t.length;e++)s+=t[e];s='<g style="display: none">'+s+"</g>";let u=a.indexOf("</defs>");return a=a.substr(0,u)+s+a.substr(u),n.asCompactString||(a=o(a)),a},
createDemoFiles:function(e,t,n,l){let o=[];return o=o.concat([{fileName:"demo.html",fileData:k(e,t,n,l)},{fileName:"_demo/colorpicker.js",fileData:r},{fileName:"_demo/colorpicker.css",fileData:i}])},initExport:function(e,t){l.getAssets([["javascripts","src/ui/colorpicker.js",function(e){r=e}],["stylesheets","src/ui/colorpicker.css",function(e){i=e}]],e,t)},beautifyXml:o,normalizePathData:function(e,t){null==t&&(t=2);let n=Math.pow(10,t),l=function(e){return Math.round(e*n)/n},r=function(e){
let t=e.children||[e];for(let e=0;e<t.length;e++){let n=t[e].getSegments();for(let e=0;e<n.length;e++){let t=n[e];t.point.x=l(t.point.x),t.point.y=l(t.point.y),t.handleIn.x=l(t.handleIn.x),t.handleIn.y=l(t.handleIn.y),t.handleOut.x=l(t.handleOut.x),t.handleOut.y=l(t.handleOut.y)}}},i=paper.PathItem.create(e);return r(i),r(i=i.unite()),e=i.getPathData(null),e=O(e)}}}
"undefined"==typeof angular?e.SvgUtils=t():angular.module("iconfu.utils.module").factory("iconfu.SvgUtils",["iconfu.SvgDefsSet","iconfu.color.Color","iconfu.EffectUtils","iconfu.AssetsUtils",function(e,n,l,r){return t(e,n,l,r)}])}(self),function(t){function n(){for(var t=" -.0123456789MmzLlHhVvCcSsQqTtAa",n=new Uint8Array(123),l=0;l<t.length;l++)n[t.charCodeAt(l)]=l;n[90]=15,n[44]=0,n[9]=0,n[13]=0,n[10]=0
;var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(256);for(l=0;l<r.length;l++)i[r.charCodeAt(l)]=l;var o={encode:function(e,t,n,l){if(n)t=o.encode(t,n,null,0);else if(l>0){var r=e.slice(0,l);e=e.slice(l),t=o.encode(t,r,null,0)}for(var i="",a=t.length,s=e.length,f=0;f<s;f++)i+=String.fromCharCode(t.charCodeAt(f%a)^e.charCodeAt(f));return n?n+i:i},inflate:function(e){return pako.inflate(e,{to:"string"})},deflate:function(e){return pako.deflate(e)},
inflateRaw:function(e){return pako.inflateRaw(e,{to:"string"})},deflateRaw:function(e){return pako.deflateRaw(e,{strategy:pako.Z_FILTERED})},inflateObj:function(e){return JSON.parse(pako.inflate(e,{to:"string"}))},deflateObj:function(e){return pako.deflate(JSON.stringify(e))},eSP:function(e){for(var t=0,l=0,r="",i=0;i<e.length;i++){var o=n[e.charCodeAt(i)];o!==undefined&&(t<<=5,t|=o,3==++l&&(r+=String.fromCharCode(t),t=0,l=0))}return l&&(t<<=5*(3-l),r+=String.fromCharCode(t)),r},dSP:function(e){
for(var n="",l=0;l<e.length;l++){var r=e.charCodeAt(l);n+=t[r>>10&31],n+=t[r>>5&31],n+=t[31&r]}return n.trim()},uInt8ToBase64:function(e){return null===e?"null":btoa(String.fromCharCode.apply(null,e))},base64ToUInt8:function(e){return"null"===e?null:new Uint8Array(atob(e).split("").map(function(e){return e.charCodeAt(0)}))},encodeBase64:function(e){var t,n=e.length,l="";for(t=0;t<n;t+=3)l+=r[e[t]>>2],l+=r[(3&e[t])<<4|e[t+1]>>4],l+=r[(15&e[t+1])<<2|e[t+2]>>6],l+=r[63&e[t+2]]
;return n%3==2?l=l.substring(0,l.length-1)+"=":n%3==1&&(l=l.substring(0,l.length-2)+"=="),l},decodeBase64:function(e){var t,n,l,r,o,a=.75*e.length,s=e.length,f=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),c=new Uint8Array(u);for(t=0;t<s;t+=4)n=i[e.charCodeAt(t)],l=i[e.charCodeAt(t+1)],r=i[e.charCodeAt(t+2)],o=i[e.charCodeAt(t+3)],c[f++]=n<<2|l>>4,c[f++]=(15&l)<<4|r>>2,c[f++]=(3&r)<<6|63&o;return c},serializeJsonToRemoteOnly:{write:function(e,t){
return t?e:JSON.stringify(e)},read:function(e,t){return t?e:JSON.parse(e)},localToRemote:function(e){return JSON.stringify(e)},remoteToLocal:function(e){return JSON.parse(e)},asymmetric:!0},createPrivateKey:function(e,t){for(var n=t.length>>1;e.length<n;)e="0"+e;return e=e.substring(0,n),window.btoa(encode(e+e,t))},m:function(t,n){try{var l=o.encode(window.atob(t),n);return l.substring(0,l.length>>1)==l.substring(l.length>>1)}catch(e){return!1}}};return o}
"undefined"==typeof angular?t.IOUtils=n():angular.module("iconfu.utils.module").factory("iconfu.IOUtils",[function(){return n()}])}(self),
self.proc("eJyFVm1v2zYQ/iu2PhhkwjFRsH2xQwRpGhQe0iVo4q5DYBSMdLK5yaRAUXY8W/99R73Yau1kgCHz5ci7e3j33PWTQkdOGU2AbtpxzxLHZmzJMrpZStsDJlkqdpJ0Y8EVVvdAwHarYdX79vnuEaySqfoXbMkWR2Tldkv0FQgvfp8keWQB9I3US5mTc3ZOh4SAiE1ULEA7jrvSwW0KfkaCqJILKOU5uGvnrHopHJBgruJMBSwwSRJQBj/t/gOQoUlLQAlnC8DzjMjKgkxmYPmDNX9D5NB1ypcKVtX5wplJFqN24vjD9cPtF/51fPvn9+vJ0/33ycPH66dbyiQdVbiUTO1dBeYQJ80sUyyqgTNCnyhWCIvfVMQoYljBSCSi7TakJ4ryGbgbox28opcXMTqRi9QvjhdyBh+lkx4cf4qyBHdqXPabqI2OGoSr1YlTac5js9J5JNOOZM4SvKJk8YHBdKOFRnsql6xYEIpe2QoQFuFAovQS7uQaLDNCcahfpVVr+ErFbi4cM3wOajZ3QrKwL4QeDPBJHzzStVVRajSg1v45/ijLeG2igwUuanycyD/AzVylsQVNnmGKlvCifgzKTIlIdsNVJe33MqRubs2q59/21lpjSWAhl4sshV6CDhjbwxjqaeN6L9C77IXBDjYom0FYoruH4NSodIJGujn/gmEj9SwF0tkwCmPVxzL7edFfhAp5otL0xqTGCryeyywDHX8wzpkFsbRkc6GLNGWr+m9c/5k3bfp0d//h+m6EAPTnmLzotF9X4vfH+z94Jm0OZMlBRyYGsjDRP8TyjDLLwUNdeXRtrVwTxVPQMzdHiMX5yFy289Hpqal1FUI9mymG8B4C/2xNOJLi+WJKR2nHveL5HMW5yWSk3Bqn4fRE4/tmRT4nKS3nHUA/WVNkZBM17z6MSlp6pbl4dmcTJs8m09F4MBjjlULk+PXjsBqHU2SVscgRsnkTXv2Q1nFFmsMMb7nAAZpYZ20igGNISa6Soso97Twh/eWBTAYDHl5+9k8sX3KS0Nr/mVjxF1PoOG9CfLTimcmVfxW+FpX8Qr6SGWqqJ0oT+YufyhPCfzvFi2gJaQ69Hw6iVSNo4uDJZGSFQZAfYZQqyt12K2tzVOPBiMA7OGL+MKVzsG7YD0ukOH9EKOYGgwj5HaqLmRwMDKnGmJRCCHkVDiUtd8mBtLNRWrlhh9KRImpWqBIT06YKg8flbHicDBmGkTsRGsHAjxKYOUUqMRBfEfyYbDILkcrx2PACGXW73ZRI1IVnooaX/ecRawtGBJNTZoVt+arAoOyKInxFl7EwKpFTvjbn0W2JdeJtUmoCxJ7olh48k2FU/EhWSKX5IVfN0KHMWIdAkKLxuwPOIxYm/R5EdaYlfHfiQKQ1asZfQBZOJetvi5SkxNfFpvw+mVoPKehO+YOejRfHNWN93oMZvVmA1WK2Z0ykaRvt7PTVZWLT3aXK83hTEk4sjtui4CetRXXhf9cipkVBNP0fw9rOYLTT2dHoC4pbp7A35zTIXoPd8t6yan1Ul+zooCjvYuFSXxnksE51Tg5KcgeHqq8xPLZyVe2TuNlt9vZ4NCAeAWTXQLWamp6pFQhRhDtTXfDlbp+NO4PeuzO8JDXK9Erhtm81WpFha6s9bFIOGxSfV63mNyMcm5hNvlIumhMncsxF3wzJs4jpswizkm4imUNQkZnPs2DYScEImwl3mLfuWDOBIYAVzo2q65oAGR5Hsdux1fJx/RIHB9owb0+08qrF4eDEHqGfz2R6diBd5+gRg/LlobDnhibKunJ15h+Tbjhhf6YsyzaqkxKrSZNeDGscJEpDXCWDFv2QTUR4fvHrKNhtBUK4dQYm6TVEfgXcA48xssRqA5i/REVGV+U1UTOGBlSPxsb39f9tkmADVY3psK0GCxMXWLaD+ihHWo2hXcWYq9u49W7/B40Be27Xo0ontvzNvFW+X2ms2C90zAnYYbfV4GR3K+WUliSHNKGj/wDq74l3",0),
function(e){function t(e,t){let n,l=paper.GradientStop,r=paper.Group,i=paper.Matrix,o=paper.Numerical,a=paper.Color,s=paper.Path,f=paper.Point,u=paper.Rectangle,c=paper.Segment,d=Math.max,p=Math.min,h=Math.abs,g=function(e,t,n){const l=e.length;let r=[l];for(let i=0;i<l;i++){let l=e[i];r[i]=new c(l.point.rotate(t,n),l.handleIn.rotate(t),l.handleOut.rotate(t))}return r},m=function(e,t,n,l,r){const i=Math.PI,a=o.EPSILON;l=(l||0)/100,((n=(n||0)/100)>1-a||l>1-a)&&(l=0,n=1)
;let u=360/e,d=u*(1-l),p=new f(t,t),h=function(e,t,n){let l=e.point,r=t.point,o=r.subtract(l);if(!n.isCollinear(o)){let s=paper.Line.intersect((l.x+r.x)/2,(l.y+r.y)/2,-o.y,o.x,l.x,l.y,-n.y,n.x,!0,!0),f=l.getDistance(s),u=2*Math.asin(o.length/2/f),d=180*u/i,p=d>90+a,h=4/3*f*Math.tan(u/(p?8:4));if(e.handleOut=n.normalize(h),t.handleIn=n.rotate(d).normalize(-h),p)return new c(l.rotate(d/2,s),o.normalize(-h),o.normalize(h))}
},m=new f(p.x+Math.tan(i/180*d/2)*t,p.y+t),y=new c(m),b=new c(m.rotate(d,p)),x=m.subtract(p).normalize(1).rotate(90+(1-n)*d/2),C=h(y,b,x),w=C?[y,C,b]:[y,b];if(l>0){let e=new c(m.rotate(u,p)),t=h(b,e,new f(x.x,-x.y));t&&w.push(t),y.handleIn=e.handleIn.rotate(-u)}else y.handleIn=b.handleIn.rotate(-d),w=w.slice(0,w.length-1);r&&(w=g(w,r,p));let S=w;for(let t=1;t<e;t++)S=S.concat(g(w,u*t,p));let v=new s({segments:S,closed:!0,insert:!1,_resolved:!0});return v._center=p,v._resolved=!0,v
},y=function(e,n,l,i,o,a){let f,u=e.bounds;for(let e=0;e<o.length;e++){let t=u.expand(3*o[e].blur),l=o[e].offset;l&&(t.center.x+=(n?-1:1)*l.x,t.center.y+=(n?-1:1)*l.y),u=u.unite(t)}(f=n?new s.Rectangle({rectangle:u,insert:!1}).subtract(e):e).fillColor=l,f.data.ifuFillData=i;let c=b(f,o,u,n),d=n?e:new s.Rectangle({rectangle:u,insert:!1});if(a){if(!(a=t.clipToPath(d,a)))return null;a._resolved=!0}else a=d;a.fillColor="#888",a.data.ifuFillData={};let p=new r({insert:!1});return p.addChild(a),
p.clipped=!0,!n&&a.compare(d)&&(p.data.ifuSvgIgnoreClip=!0),p.addChild(c),p},b=function(e,n,l,i){let o=l.bottom+2,a=new r({data:{ifuBlurGroup:!0,ifuBlurData:{blurDefs:n,blurBounds:l,isInset:i}},insert:!1}),u=e.fillColor;a.addChild(new s.Rectangle({point:e.bounds.center,size:[.1,.1],insert:!1,fillColor:"rgba(128, 128, 128, 0.01)",data:{ifuSvgDelete:!0}}));for(let l=0;l<n.length;l++){let r=PaperUtils.clone(e);r.translate(0,-o),!u||u.gradient?(r.fillColor="#000",
r.shadowColor="#000"):r.shadowColor=u.clone(),r.shadowColor.alpha*=n[l].opacity,r.shadowBlur=n[l].blur*t.getBlurCorrection(),r.shadowOffset=new f(n[l].offset.x,n[l].offset.y+o),a.addChild(r)}u&&u.gradient&&(a.blendMode="source-over",a.addChild(new s.Rectangle({rectangle:l,insert:!1,fillColor:e.fillColor.clone(),blendMode:"source-in",ifuSvgDelete:!0})));let c=e;return c.visible=!1,a.insertChild(0,c),a},x=function(e,t,n,l,r,i,o,a){if(!r.enabled)return;let s=r.elevation*n/512;if(s){
let n,o,f,u=h(s/3),c=h(s/2),d=(r.specificLightAngle.enabled?r.specificLightAngle:l).lightAngle*Math.PI/180,p=Math.sin(d),g=Math.cos(d),m=r.fill;"shade"==m.value?(o="#000000",f=U(-100,null,i),n=m.shade.intensity/100):(o=R(m,l,i),f=I(m,l,o,i),n=1);let b=y(PaperUtils.clone(t),s<0,o,f,[{opacity:2/3*n,blur:1.1*u,offset:{x:u*g,y:u*p}},{opacity:n,blur:2*u,offset:{x:c*g,y:c*p}}],PaperUtils.clone(a));b&&(s>0?b.insertBelow(e):b.insertAbove(a&&a.data.ifuLongShadow?a:e))}},C=function(t,n,l,i,o,s,f){let c
;if(o.enabled){let d=(o.specificLightAngle.enabled?o.specificLightAngle:i).lightAngle,p=o.length/100*l*Math.SQRT2,h=o.fadeStart/100,g=o.fadeEnd/100,m=o.fill;if(p&&(h>0||g>0)){let l=n.bounds.center;if(c=w(d,p,n)){let o=c.bounds,y=o.topCenter.rotate(d-90,l),b=o.bottomCenter.rotate(d-90,l);c.rotate(d-90,l),f&&(c._disposable=!0,(c=c.intersect(f))._resolved=!0),p<0&&(c._disposable=!0,(c=c.intersect(n))._resolved=!0);let x,C,w=c,v=w.bounds,E={x:v.x,y:v.y,width:v.width,height:v.height},O=m.value
;if("shade"==O){let e=-m.shade.intensity;if(e){let n=p>0?s?s.fillColor:null:t.fillColor,l=p>0?s?s.data.ifuFillData:null:t.data.ifuFillData;n&&0==S(n)?(x=k(e,n),C=U(e,l,E)):(x=new a(0,0,0,-e/100),C=U(e,null,E))}}else if("singleColor"==O){x=A(m.colorRefs[0],i).css;let e=JSON.parse(JSON.stringify(m.colorRefs[0]));e.colorHex=A(m.colorRefs[0],i).hex,e.colorType="effectColor",C={colorRef:e,bounds:E}}else"linearGradient"==O&&(m.angle=d,x=R(m,i,new u({from:y,to:b})),C=I(m,i,x,E));let T=!1
;if(1==h)w.fillColor=x,w.data.ifuFillData=C;else if(null==x.gradient){w.fillColor={gradient:{stops:[[new e(x).css,h],[new e(x,0).css,g]]},origin:y,destination:b};let t=JSON.parse(JSON.stringify(C.colorRef)),n=JSON.parse(JSON.stringify(C.colorRef));n.opacity=0,w.data.ifuFillData={gradient:!0,origin:{x:y.x,y:y.y},destination:{x:b.x,y:b.y},stops:[{colorRef:t,offset:h},{colorRef:n,offset:g}],bounds:{x:E.x,y:E.y,width:E.width,height:E.height}}}else T=!0;if(T){w.fillColor=x,w.data.ifuFillData=C
;let e=PaperUtils.clone(w);e.blendMode="destination-out",w.blendMode="destination-over",e.fillColor={gradient:{stops:[["#fff",h],[new a(1,1,1,0),g]]},origin:y,destination:b},w.data.ifuMaskData={origin:{x:y.x,y:y.y},destination:{x:b.x,y:b.y},radial:!1,stopColors:["#ffffff","#000000"],stopOffsets:[h,g],bounds:E},e.data.ifuSvgDelete=!0,w=new r({children:[e,w]})}w.data.ifuLongShadow=!0,p>0?w.insertBelow(t):w.insertAbove(t)}}}return c},w=function(e,t,n){let l=n.bounds.center;n.applyMatrix=!0,
n.rotate(90-e,l);let r=n.children||[n],i=[];for(let e=0;e<r.length;e++)i=i.concat(E(r[e],t));for(;i.length>1;)for(let e=i.length-1;e>0;e-=2){let t=i[e].unite(i[e-1]);t.isEmpty()||t.segments&&1==t.segments.length?i.splice(e-1,2):(PaperUtils.normalizeOrientation(t,!0),t._resolved=!0,i[e]=t,i.splice(e-1,1))}return n.rotate(e-90,l),i[0]},S=function(e){if(e){if(e.gradient){let t=e.gradient.stops;if(t){let e=null;for(let n=0;n<t.length;n++){let l=t[n].color.alpha;if(1==l){if(e>0)return 1;e=0}else{
if(0!=l)return 1;if(e<2)return 1;e=2}}return null==e?2:e}return 2}return 1==e.alpha?0:0==e.alpha?2:1}return 2},v=function(e,t){return 0==e?t.primaryColor:t.effectColors[e-1]},A=function(t,n){let l=t.colorIndex;return e.shade(t.lAdjust/100,v(l,n),t.opacity)},I=function(t,n,l,r){let i,o=t.value,a=t.colorRefs;if("singleColor"==o){let t=JSON.parse(JSON.stringify(a[0]));t.colorHex=e.toHex(v(a[0].colorIndex,n)),t.colorType="effectColor",i={colorRef:t}}else if("linearGradient"==o||"radialGradient"==o){
let r=t[o],s=l.gradient.stops,f=s[0],u=JSON.parse(JSON.stringify(a[0]));u.colorType="effectColor",u.colorHex=e.toHex(v(a[0].colorIndex,n));let c=s[s.length-1],d=JSON.parse(JSON.stringify(a[1]));d.colorType="effectColor",d.colorHex=e.toHex(v(a[1].colorIndex,n)),i={gradient:!0,radial:"radialGradient"==o,origin:{x:l.origin.x,y:l.origin.y},destination:{x:l.destination.x,y:l.destination.y},steps:r.stepped&&r.stepped.enabled?r.stepped.steps:0,stops:[{colorRef:u,offset:f.offset},{colorRef:d,
offset:c.offset}]}}else if(o==shade){i={colorRef:{colorType:"fixedColor",colorHex:"#000000",opacity:t[o].intensity/100}}}return i&&(i.bounds={x:r.x,y:r.y,width:r.width,height:r.height}),i},R=function(t,n,r){let i=t.value,o=t.colorRefs;if("singleColor"==i)return A(o[0],n).css;if("linearGradient"==i||"radialGradient"==i){let a,s,u=A(o[0],n),c=A(o[1],n),p=t[i],h="radialGradient"==i;if(h)a=new f(r.center.x+r.width*p.offsetX/100,r.center.y+r.height*p.offsetY/100),
s=new f(p.offsetX<0?r.right:r.left,p.offsetY<0?r.bottom:r.top);else{let e=p.angle;null==e&&(e=n.lightAngle);let t=r.center,l=Math.tan(e*Math.PI/180),i=Math.abs(e)>90?1:-1,o=e>0?-1:1;a=Math.abs(l)>r.height/r.width?t.add(i*Math.abs(r.height/l/2),o*r.height/2):t.add(i*r.width/2,o*Math.abs(r.width*l/2)),s=t.multiply(2).subtract(a)}let g=null==p.start?0:p.start/100,m=null==p.end?1:d(g,p.end/100),y=m-g,b=p.stepped,x=b&&b.enabled?b.steps:0,C=0!=x;if(0==x){
let t=new e((u._r+c._r)/2,(u._g+c._g)/2,(u._b+c._b)/2),n=u.lab,l=c.lab,r=new e(e.labToRgb((n[0]+l[0])/2,(n[1]+l[1])/2,(n[2]+l[2])/2));e.getLabDist(r,t)>10&&(x=1)}let w=[new l(u.css,g)];for(let e=0;e<x;e++){let t=(e+1)/(x+1),n=g+y*t;C?(w.push(new l(u.blend(e/x,c).css,n)),w.push(new l(u.blend((e+1)/x,c).css,n))):w.push(new l(u.blend(t,c).css,n))}return w.push(new l(c.css,m)),{gradient:{stops:w,radial:h},origin:a,destination:s}}},k=function(t,n){if(n){if(n.gradient){
let l=n.gradient.clone(),r=l.stops;for(let n=0;n<r.length;n++)r[n].color=e.shade(t/100,r[n].color).hex;return{gradient:l,origin:n.origin&&new f(n.origin),destination:n.destination&&new f(n.destination)}}return e.shade(t/100,n).css}return t>0?e.toCss(255,255,255,t/100):e.toCss(0,0,0,-t/100)},U=function(e,t,n){let l;if(t)if(t)if(t.gradient){let n=(l=JSON.parse(JSON.stringify(t))).stops;for(let t=0;t<n.length;t++)n[t].colorRef.lAdjust=(n[t].colorRef.lAdjust||0)+e
}else(l=JSON.parse(JSON.stringify(t))).colorRef.lAdjust=(l.colorRef.lAdjust||0)+e;else l=null;else l={colorRef:{colorType:"fixedColor",colorHex:e<0?"#000000":"#ffffff",opacity:Math.abs(e)/100}};return l&&(l.bounds={x:n.x,y:n.y,width:n.width,height:n.height}),l},E=function(e,t){let n=h(t),l=PaperUtils.getMonoSegments(e.segments,!0,0),r=l?l.length:0;if(0==r)return null;if(t<0){for(let e=r-1;e>=0;e--)l[e].reverse();l.reverse(),t=-t}let i=0,a=l[0].point.x;for(let e=1;e<r;e++){let t=l[e].point,n=t.x
;(n>a||n==a&&t.y>l[i].point.y)&&(i=e,a=n)}l.unshift.apply(l,l.splice(i));let f,u=[],c=l[0];for(let e=0;e<r;e++){let r=o.GEOMETRIC_EPSILON,i=c.point,a=l[e+1],d=a&&a.point;if(d&&d.isClose(i,r));else if(d&&(i.x-d.x>r||i.x-d.x>=-r&&h(d.y-i.y)<n))f?f.push(a):f=[c,a];else if(f){let e=f.length;if(h(f[0].point.x-f[e-1].point.x)>.01){let n=new Array(2*e);for(let l=0;l<e;l++){let r=f[l];0==l?r.handleIn.length=0:l==e-1&&(r.handleOut.length=0),n[l]=r;let i=r.clone();i.reverse(),r.point.y+=t,
n[n.length-1-l]=i}u.push(new s({segments:n,closed:!0,insert:!1,_resolved:!0}))}f=null}c=a}return u},O=function(e,t,n){let l=t.layout;if(n){let e=n.form;if(e&&"contour"==e.value&&(0==l.enabled||0==l.offsetX&&0==l.offsetY&&0==l.rotation))return!1}else if(0==l.enabled||0==l.offsetX&&0==l.offsetY&&0==l.rotation)return!1;return!0};return{getId:function(){return"generic"},getSettingsModel:function(){return n||(n={effectId:this.getId(),version:"3.0",type:"group",model:{global:{type:"group",
name:"Global",model:{isMonochrome:{type:"boolean",name:"Monochrome","default":!1},useDarkBackground:{type:"boolean",name:"Dark Background","default":!1},lightAngle:{type:"degree",name:"Light Angle",monochrome:!1,"default":45},primaryColor:{type:"color",name:"Primary Color","default":"#e50398"},effectColors:{type:"indexed-group",name:"Base Colors",heading:1,monochrome:!1,model:[],template:{type:"color",indexed:!0,name:"Style Color","default":"#039BE5"}}}},content:{type:"group",name:"Content",
model:{relSize:{type:"percent",min:10,max:100,name:"Size","default":75},layout:{type:"group",name:"Layout",heading:1,enableable:!0,enabled:!1,model:{centerY:{type:"boolean",name:"Center Vertically","default":!1},offsetX:{type:"percent",min:-50,max:50,name:"X-Offset","default":0},offsetY:{type:"percent",min:-50,max:50,name:"Y-Offset","default":0},rotation:{type:"degree",name:"Rotation","default":0}}},fill:{type:"group",name:"Fill",heading:1,selectable:!0,enableable:!0,enabled:!1,monochrome:!1,
"default":"singleColor",model:{colorRefs:{type:"indexed-group",hidden:!0,model:[{type:"colorRef",name:"ColorRef0","default":{colorIndex:0,lAdjust:0,opacity:1}},{type:"colorRef",name:"ColorRef1","default":{colorIndex:0,lAdjust:0,opacity:1}}]},singleColor:{type:"group",name:"Single Color",model:{color:{type:"colorRef",name:"Color",link:"@.colorRefs[0]"}}},linearGradient:{type:"group",name:"Linear Gradient",model:{colors:{type:"colorRefs",name:"Colors",link:"@.colorRefs"},angle:{type:"degree",
name:"Angle","default":90},start:{type:"percent",name:"Start",min:0,max:100,minLimitOf:"@end","default":0},end:{type:"percent",name:"End",min:0,max:100,maxLimitOf:"@start","default":100},stepped:{type:"group",name:"Stepped",enableable:!0,enabled:!1,model:{steps:{type:"int",name:"Steps",min:1,max:20,"default":1}}}}},radialGradient:{type:"group",name:"Radial Gradient",model:{colors:{type:"colorRefs",name:"Colors",link:"@.colorRefs"},offsetX:{type:"percent",name:"X-Offset",min:-50,max:50,
"default":0},offsetY:{type:"percent",name:"Y-Offset",min:-50,max:50,"default":-50},start:{type:"percent",name:"Start",min:0,max:100,minLimitOf:"@end","default":0},end:{type:"percent",name:"End",min:0,max:100,maxLimitOf:"@start","default":100},stepped:{type:"group",name:"Stepped",enableable:!0,enabled:!1,model:{steps:{type:"int",name:"Steps",min:1,max:20,"default":1}}}}},cutout:{type:"group",name:"Cutout",model:{limited:{type:"group",name:"Limit Layers",enableable:!0,enabled:!1,model:{layers:{
type:"int",name:"Layers",min:1,max:10,"default":1}}}}}}},dropShadow:{type:"group",name:"Drop Shadow",heading:1,monochrome:!1,enableable:!0,enabled:!1,model:{elevation:{type:"int",min:-100,max:100,name:"Elevation","default":20},specificLightAngle:{type:"group",name:"Specific Light Angle",enableable:!0,enabled:!1,model:{lightAngle:{type:"degree",name:"Light Angle","default":90}}},fill:{type:"group",name:"Shadow Color",heading:2,selectable:!0,"default":"shade",model:{colorRefs:{
type:"indexed-group",hidden:!0,model:[{type:"colorRef",name:"ColorRef0","default":{colorIndex:0,lAdjust:0,opacity:1}},{type:"colorRef",name:"ColorRef1","default":{colorIndex:0,lAdjust:0,opacity:1}}]},singleColor:{type:"group",name:"Single Color",model:{color:{type:"colorRef",name:"Color",link:"@.colorRefs[0]"}}},linearGradient:{type:"group",name:"Linear Gradient",model:{colors:{type:"colorRefs",name:"Colors",link:"@.colorRefs"},angle:{type:"degree",name:"Angle","default":90},start:{
type:"percent",name:"Start",min:0,max:100,minLimitOf:"@end","default":0},end:{type:"percent",name:"End",min:0,max:100,maxLimitOf:"@start","default":100}}},radialGradient:{type:"group",name:"Radial Gradient",model:{colors:{type:"colorRefs",name:"Colors",link:"@.colorRefs"},offsetX:{type:"percent",name:"X-Offset",min:-50,max:50,"default":0},offsetY:{type:"percent",name:"Y-Offset",min:-50,max:50,"default":-50},start:{type:"percent",name:"Start",min:0,max:100,minLimitOf:"@end","default":0},end:{
type:"percent",name:"End",min:0,max:100,maxLimitOf:"@start","default":100}}},shade:{type:"group",name:"Shade",model:{intensity:{type:"int",name:"Intensity","default":20}}}}}}},longShadow:{type:"group",name:"Long Shadow",heading:1,monochrome:!1,enableable:!0,enabled:!1,model:{length:{type:"int",name:"Length",min:-100,"default":80},fadeStart:{type:"percent",name:"Fade Start",minLimitOf:"@fadeEnd","default":100},fadeEnd:{type:"percent",name:"Fade End",maxLimitOf:"@fadeStart","default":100},
specificLightAngle:{type:"group",name:"Specific Light Angle",enableable:!0,enabled:!1,model:{lightAngle:{type:"degree",name:"Light Angle","default":90}}},fill:{type:"group",name:"Shadow Color",heading:2,selectable:!0,"default":"shade",model:{colorRefs:{type:"indexed-group",hidden:!0,model:[{type:"colorRef",name:"ColorRef0","default":{colorIndex:0,lAdjust:0,opacity:1}},{type:"colorRef",name:"ColorRef1","default":{colorIndex:0,lAdjust:0,opacity:1}}]},singleColor:{type:"group",name:"Single Color",
model:{color:{type:"colorRef",name:"Color",link:"@.colorRefs[0]"}}},linearGradient:{type:"group",name:"Linear Gradient",model:{colors:{type:"colorRefs",name:"Colors",link:"@.colorRefs"},start:{type:"percent",name:"Start",min:0,max:100,minLimitOf:"@end","default":0},end:{type:"percent",name:"End",min:0,max:100,maxLimitOf:"@start","default":100},stepped:{type:"group",name:"Stepped",enableable:!0,enabled:!1,model:{steps:{type:"int",name:"Steps",min:1,max:20,"default":1}}}}},shade:{type:"group",
name:"Shade",model:{intensity:{type:"int",name:"Intensity","default":20}}}}}}},stackedShadow:{type:"group",name:"Stacked Shadow",heading:1,monochrome:!1,enableable:!0,enabled:!1,model:{elevation:{type:"int",min:0,max:100,name:"Elevation","default":20},intensity:{type:"percent",name:"Intensity","default":20},specificLightAngle:{type:"group",name:"Specific Light Angle",enableable:!0,enabled:!1,model:{lightAngle:{type:"degree",name:"Light Angle","default":90}}}}}}},background:{type:"indexed-group",
name:"Background",model:[],template:{type:"group",name:"Background",indexed:!0,model:{relSize:{type:"percent",min:10,max:100,name:"Size","default":90},layout:{type:"group",name:"Layout",heading:1,enableable:!0,enabled:!1,model:{offsetX:{type:"percent",min:-50,max:50,name:"X-Offset","default":0},offsetY:{type:"percent",min:-50,max:50,name:"Y-Offset","default":0},rotation:{type:"degree",name:"Rotation","default":0}}},form:{type:"group",name:"Form",heading:1,selectable:!0,"default":"shape",model:{
shape:{type:"group",name:"Shape",model:{cornerRounding:{type:"percent",name:"Corner Rounding","default":25},circularity:{type:"percent",name:"Circularity","default":0},cornerCount:{type:"int",name:"Corners",min:3,max:8,"default":4},rotation:{type:"degree",name:"Rotation","default":0}}},contour:{type:"group",name:"Contour",model:{fillHoles:{type:"boolean",name:"Fill Holes","default":!1}}}}},fill:{type:"group",name:"Fill",heading:1,selectable:!0,monochrome:!1,"default":"singleColor",model:{
colorRefs:{type:"indexed-group",hidden:!0,model:[{type:"colorRef",name:"ColorRef0","default":{colorIndex:0,lAdjust:0,opacity:1}},{type:"colorRef",name:"ColorRef1","default":{colorIndex:0,lAdjust:0,opacity:1}}]},singleColor:{type:"group",name:"Single Color",model:{color:{type:"colorRef",name:"Color",link:"@.colorRefs[0]"}}},linearGradient:{type:"group",name:"Linear Gradient",model:{colors:{type:"colorRefs",name:"Colors",link:"@.colorRefs"},angle:{type:"degree",name:"Angle","default":90},start:{
type:"percent",name:"Start",min:0,max:100,minLimitOf:"@end","default":0},end:{type:"percent",name:"End",min:0,max:100,maxLimitOf:"@start","default":100},stepped:{type:"group",name:"Stepped",enableable:!0,enabled:!1,model:{steps:{type:"int",name:"Steps",min:1,max:20,"default":1}}}}},radialGradient:{type:"group",name:"Radial Gradient",model:{colors:{type:"colorRefs",name:"Colors",link:"@.colorRefs"},offsetX:{type:"percent",name:"X-Offset",min:-50,max:50,"default":0},offsetY:{type:"percent",
name:"Y-Offset",min:-50,max:50,"default":-50},start:{type:"percent",name:"Start",min:0,max:100,minLimitOf:"@end","default":0},end:{type:"percent",name:"End",min:0,max:100,maxLimitOf:"@start","default":100},stepped:{type:"group",name:"Stepped",enableable:!0,enabled:!1,model:{steps:{type:"int",name:"Steps",min:1,max:20,"default":1}}}}},cutout:{type:"group",name:"Cutout",model:{limited:{type:"group",name:"Limit Layers",enableable:!0,enabled:!1,model:{layers:{type:"int",name:"Layers",min:1,max:10,
"default":1}}}}}}},dropShadow:{type:"group",name:"Drop Shadow",heading:1,monochrome:!1,enableable:!0,enabled:!1,model:{elevation:{type:"int",min:-100,max:100,name:"Elevation","default":20},specificLightAngle:{type:"group",name:"Specific Light Angle",enableable:!0,enabled:!1,model:{lightAngle:{type:"degree",name:"Light Angle","default":90}}},fill:{type:"group",name:"Shadow Color",heading:2,selectable:!0,"default":"shade",model:{colorRefs:{type:"indexed-group",hidden:!0,model:[{type:"colorRef",
name:"ColorRef0","default":{colorIndex:0,lAdjust:0,opacity:1}},{type:"colorRef",name:"ColorRef1","default":{colorIndex:0,lAdjust:0,opacity:1}}]},singleColor:{type:"group",name:"Single Color",model:{color:{type:"colorRef",name:"Color",link:"@.colorRefs[0]"}}},linearGradient:{type:"group",name:"Linear Gradient",model:{colors:{type:"colorRefs",name:"Colors",link:"@.colorRefs"},angle:{type:"degree",name:"Angle","default":90},start:{type:"percent",name:"Start",min:0,max:100,minLimitOf:"@end",
"default":0},end:{type:"percent",name:"End",min:0,max:100,maxLimitOf:"@start","default":100},stepped:{type:"group",name:"Stepped",enableable:!0,enabled:!1,model:{steps:{type:"int",name:"Steps",min:1,max:20,"default":1}}}}},radialGradient:{type:"group",name:"Radial Gradient",model:{colors:{type:"colorRefs",name:"Colors",link:"@.colorRefs"},offsetX:{type:"percent",name:"X-Offset",min:-50,max:50,"default":0},offsetY:{type:"percent",name:"Y-Offset",min:-50,max:50,"default":-50},start:{
type:"percent",name:"Start",min:0,max:100,minLimitOf:"@end","default":0},end:{type:"percent",name:"End",min:0,max:100,maxLimitOf:"@start","default":100},stepped:{type:"group",name:"Stepped",enableable:!0,enabled:!1,model:{steps:{type:"int",name:"Steps",min:1,max:20,"default":1}}}}},shade:{type:"group",name:"Shade",model:{intensity:{type:"int",name:"Intensity","default":20}}}}}}},longShadow:{type:"group",name:"Long Shadow",heading:1,monochrome:!1,enableable:!0,enabled:!1,model:{length:{
type:"int",name:"Length",min:-100,"default":80},fadeStart:{type:"percent",name:"Fade Start",minLimitOf:"@fadeEnd","default":100},fadeEnd:{type:"percent",name:"Fade End",maxLimitOf:"@fadeStart","default":100},specificLightAngle:{type:"group",name:"Specific Light Angle",enableable:!0,enabled:!1,model:{lightAngle:{type:"degree",name:"Light Angle","default":90}}},fill:{type:"group",name:"Shadow Color",heading:2,selectable:!0,"default":"shade",model:{colorRefs:{type:"indexed-group",hidden:!0,model:[{
type:"colorRef",name:"ColorRef0","default":{colorIndex:0,lAdjust:0,opacity:1}},{type:"colorRef",name:"ColorRef1","default":{colorIndex:0,lAdjust:0,opacity:1}}]},singleColor:{type:"group",name:"Single Color",model:{color:{type:"colorRef",name:"Color",link:"@.colorRefs[0]"}}},linearGradient:{type:"group",name:"Linear Gradient",model:{colors:{type:"colorRefs",name:"Colors",link:"@.colorRefs"},start:{type:"percent",name:"Start",min:0,max:100,minLimitOf:"@end","default":0},end:{type:"percent",
name:"End",min:0,max:100,maxLimitOf:"@start","default":100},stepped:{type:"group",name:"Stepped",enableable:!0,enabled:!1,model:{steps:{type:"int",name:"Steps",min:1,max:20,"default":1}}}}},shade:{type:"group",name:"Shade",model:{intensity:{type:"int",name:"Intensity","default":20}}}}}}}}}}}}),n},applyEffect:function(n,l,o,f){n=PaperUtils.clone(n);let u=l.global,c=l.content,g=o||t.isMonochrome(l),b=d(f.width,f.height),w=f.center,v=new s.Rectangle({rectangle:f,insert:!1}),A=v
;if(c.layout.centerY){let e=f.center.y-n.bounds.center.y;h(e)>1&&n.translate(0,e)}let k=[{settings:c}];for(let e=0;e<l.background.length;e++)k.unshift({settings:l.background[e]});let U,E=1,T=new i;for(let e=0;e<k.length;e++){let t=k[e].settings,n=t.relSize/100;E*=n;let l=t.layout,r=new i;r.scale(n,w),l.enabled&&(r.rotate(l.rotation,w),r.preConcatenate((new i).translate(l.offsetX/100*b,l.offsetY/100*b))),T=T.chain(r),k[e].layout={scale:E,matrix:T},k[e].bounds=PaperUtils.transformRect(f,T)}
for(let e=k.length-1;e>=0;e--){let l=k[e].layout;if(e==k.length-1){if(n){n.transform(l.matrix);let r=g||c.fill.enabled&&!(c.stackedShadow&&c.stackedShadow.enabled);Object.defineProperty(k[e],"contour",{get:function(){return this._contour||(this._contour=t.mergeItem(null,n,!1,!1)||new s({insert:!1})),this._contour},set:function(e){this._contour=e}}),r?k[e].contourCutout=t.mergeItem(null,n,!0,!0)||new s({insert:!1}):Object.defineProperty(k[e],"contourCutout",{get:function(){
return this._contourCutout||this.contour},set:function(e){this._contourCutout=e}}),k[e].item=r?k[e].contourCutout:n}}else{let t,n=k[e].settings.form;if("shape"==n.value){let e=n.shape;(t=m(e.cornerCount,b,e.circularity,e.cornerRounding)).scale(b/d(t.bounds.width,t.bounds.height),t._center),t.rotate(e.rotation,t._center),t.translate(w.subtract(t.bounds.center)),t.transform(l.matrix)}else if("contour"==n.value){let r=d(0,(l.scale-k[e+1].layout.scale)*b/2),o=n.contour.fillHoles
;t=PaperUtils.getItemOutline(0==r?k[e+1].contourCutout:k[e+1].contour,r,o);let a=l.matrix.chain((new i).scale(p(1,k[e+1].settings.relSize/100),w).chain(k[e+1].layout.matrix.clone().invert())),s=function(e){return h(e)<1e-15};s(1-a.a)&&s(a.b)&&s(a.c)&&s(1-a.d)&&s(a.tx)&&s(a.ty)||t.transform(a)}k[e].contour=k[e].contourCutout=t,k[e].item=t}}if(g){U=k[0].item;let t=!0
;for(let e=1;e<k.length;e++)100==k[e].settings.relSize&&k[e].item.compare(k[e-1].item)||(U=t?U.subtract(k[e].item):U.unite(k[e].item),t=!t);U.fillColor=e.toCss(u.primaryColor),U.data.ifuFillData={colorRef:{colorType:"effectColor",colorIndex:0,colorHex:e.toHex(u.primaryColor)}}}else{let e=PaperUtils.transformRect(f,k[0].layout.matrix);for(let n=0;n<k.length;n++){let l=k[n],r=l.settings.fill;if(!1!==r.enabled){let i,o;if("cutout"!=r.value){i=R(r,u,e);let t=l.contour.bounds;o=I(r,u,i,t)}else{
i=null,o=null;let e=l.contourCutout,a=0==n?null:t.clipToPath(e,k[n-1].contour),s=r.cutout.limited.enabled?Math.max(0,n-r.cutout.limited.layers):0;for(let t=n-1;t>=s;t--){let l=k[t].item&&k[t].item.subtract(n==t-1?e:a);k[t].item=k[t].contourCutout=l}0==s&&(A=A.subtract(0==n?e:a))}let a=t.getPathItems(l.item);if(a.length>0)for(let e=0;e<a.length;e++)a[e].fillColor=i,o&&(a[e].data.ifuFillData=o)}}if(c.stackedShadow&&c.stackedShadow.enabled&&(!c.fill.enabled||"cutout"!=c.fill.value)){
let e,l=c.stackedShadow,r=t.getPathItems(n,[]),i=l.elevation*b/512,o=l.intensity/100,s=h(i/3),f=h(i/2),d=1.1*s,p=2*f,g=(l.specificLightAngle.enabled?l.specificLightAngle:u).lightAngle/180*Math.PI,m=Math.sin(g),x=Math.cos(g),C=null;for(let t=r.length-1;t>=0;t--){let n=r[t];if(1!=n.data.ifuShadowType){if(e){let t=new a(0,0,0),l={colorRef:{colorType:"fixedColor",colorHex:"#000000"}},r=y(PaperUtils.clone(e),!1,t,l,[{opacity:2/3*o,blur:d,offset:{x:s*x,y:s*m}},{opacity:o,blur:p,offset:{x:f*x,y:f*m}
}],PaperUtils.clone(n));r&&r.insertBelow(C),e=e.unite(n)}else e=PaperUtils.clone(n);C=n}else c.fill.enabled&&n.remove()}}U=new r(paper.Item.NO_INSERT);let l=!1;for(let e=0;e<k.length;e++){let n=k[e],r=n.item;r||(r=new paper.Path.Rectangle({fillColor:null,insert:!1}));let i=0==e?v:k[e-1].contour,o=0==e?A:k[e-1].contourCutout,a=n.settings;U.addChild(r);let s=a.longShadow,f=s.enabled,c=s.length,d=null;if(f&&c){let t=0==e?null:k[e-1].item,l=e==k.length-1?n.contourCutout:n.contour,a=s.length>0?o:i
;d=C(r,l,b,u,s,t,a)}let p=a.dropShadow;if(p.enabled){let t=p.elevation,l=0==e?null:k[e-1].item,a=n.contourCutout;if(!f||0!=c){let e=f&&c*t>0?d:t>0?o:i;x(r,a,b,u,p,n.bounds,l,e)}}if(PaperUtils.isPathItem(r)&&2==S(r.fillColor))r.remove();else if(l||O(r,a,k[e-1]&&k[e-1].settings)){let e=n.contour,o=t.clipToPath(e,i);if(l=o&&!o.compare(e)){n.contour=o;let l=r==e?o:t.clipToPath(r,i);r.replaceWith(l),n.contourCutout=n.contourCutout==e?o:t.clipToPath(n.contourCutout,i)}}}}
let D=k[k.length-1].layout.matrix;return U.data.ifuContentOffsY=D.transform([b/2,b/2]).y/b-.5,U},getEffectOutline:function(e,t){let n=d(t.width,t.height)/e.content.relSize*100,l=m(e.cornerCount,n,e.circularity,e.cornerRounding),r=e.angle;return 0!=r&&(l.rotate(r),l.fitBounds(new u(0,0,n,n))),l.translate(t.x+(t.width-n)/2,t.y+(t.height-n)/2),l},getEffectBounds:function(e,t){let n=d(t.width,t.height)/e.content.relSize*100;return new u(t.x+(t.width-n)/2,t.y+(t.height-n)/2,n,n)}}}
"undefined"==typeof angular?e.EffectGeneric=t(Color,EffectUtils):angular.module("iconfu.effects.module").factory("iconfu.effects.effectGeneric",["iconfu.color.Color","iconfu.EffectUtils",function(e,n){return t(e,n)}])}(self),function(e){function t(e){const t=function(e,t,n,l){var r={},i=function(e,t){Object.defineProperty(r,e,{get:function(){return t},set:function(l){!1!==n.triggerChange(e,l,t)&&(t=l)},enumerable:!0})};for(let n in e){let r;!t||l&&!l.has(n)||(r=t[n]),r===undefined&&(r=e[n]),
i(n,r)}return r},n=64,l=32,r="free",i=[16,24,32,48,64,128,256,512,1024,2048,4096],o=["free",16,24,32,48,64,128,256,512,1024,2048,4096],a={"new":function(l,r,i){return t({size:n,prefix:"",suffix:"",useBackgroundColor:!1,backgroundColor:new e("#fff"),bitDepth:32},l,r,i)},"import":function(t){return Object.assign({},t,{backgroundColor:new e(t.backgroundColor)})},"export":function(e){return Object.assign({},e,{backgroundColor:e.backgroundColor.rgba})},name:"Png"},s={"new":function(e,n,l){return t({
size:r,prefix:"",suffix:"",asStyleable:!1,cssPrefix:"",useFreeColor:!1},e,n,l)},name:"Svg"},f={"new":function(e,n,l){return t({fontName:"iconfu_font",cssIconClassPrefix:"icon"},e,n,l)},name:"Font"},u={"new":function(e,n,l){return t({prefix:"",suffix:"",xp:!1},e,n,l)},name:"Ico"},c={"new":function(n,r,i){return t({size:l,prefix:"",suffix:"",bitDepth:24,useBackgroundColor:!1,backgroundColor:new e("#fff"),useMaskColor:!1,maskColor:new e("#f0f")},n,r,i)},"import":function(t){
return Object.assign({},t,{backgroundColor:new e(t.backgroundColor),maskColor:new e(t.maskColor)})},onChange:function(e,t,n,l){"useMaskColor"==e&&t&&!l.type.useBackgroundColor&&(l.type.useBackgroundColor=!0),"useBackgroundColor"==e&&!t&&l.type.useMaskColor&&(l.type.useMaskColor=!1)},"export":function(e){return Object.assign({},e,{backgroundColor:e.backgroundColor.rgba,maskColor:e.maskColor.rgba})},name:"Bmp"},d={"new":function(e,n,l){return t({asStyleable:!1,cssPrefix:"",spriteName:"icon-sprite"
},e,n,l)},name:"SvgSprite"},p={"new":function(e,l,r){return t({size:n,prefix:"",suffix:""},e,l,r)},name:"PngSprite"},h=[a,s,f,u,c],g=function(e,t){this.typeMap=new Map,this.setType(e||this.getDefaultType(),t),this.showMoreSettings=!1,this.exportDefinition=null,this.onChangeCallbacks=[]};return g.prototype={"delete":function(){this.exportDefinition.remove(this)},get Type(){return this._Type},set Type(e){let t;if(this.type){t={};let e=this.type.size;e&&(t.size=e)}var n=new Set(["prefix","suffix"])
;this.setType(e,this.type,n),this.triggerChange()},setType:function(e,n,l){if(this._Type!==e){this.type&&this.typeMap.set(this._Type,this.type),this._Type=e;let r=this.typeMap.get(e);r=r?t(r,n,this,l):this.Type["new"](n,this,l),this.type=r,this.exportDefinition&&this.exportDefinition.updateTypeSet(),this.showMoreSettings=!1}},getValue:function(e){return this.type[e]},getSizeValue:function(){var e=this.getValue("size");return"free"===e?1024:e},isFreeSizeValue:function(){
return"free"===this.getValue("size")},getDefaultType:function(){return a},"export":function(){return[this.Type.name,this.Type["export"]?this.Type["export"](this.type):this.type]},getFileExtension:function(){return g.getFileExtension(this.Type)},getFileSizes:function(){switch(this.Type){case s:return o;default:return i}},getFileSizeSuffix:function(){switch(this.Type){case s:return"free"===this.type.size?"":"px";default:return"px"}},getFolderName:function(){switch(this.Type){case s:case d:
return"svg";case a:case p:return"png";case c:return"bmp";case u:return this.getValue("xp")?"ico_xp":"ico"}},getExportSubFolder:function(){switch(this.Type){case s:return"/svgs";default:return""}},getName:function(){return g.getName(this.Type)},toggleShowMoreSettings:function(){this.showMoreSettings=!this.showMoreSettings},triggerChange:function(e,t,n){let l=this.onChangeCallbacks;for(let r=0;r<l.length;++r)if(!1===l[r](e,t,n,this))return!1;this.Type.onChange&&this.Type.onChange(e,t,n,this)},
onChange:function(e){this.onChangeCallbacks.push(e)},offChange:function(e){this.onChangeCallbacks.splice(this.onChangeCallbacks.indexOf(e),1)}},Object.assign(g,{Png:a,Svg:s,Font:f,Ico:u,Bmp:c,SvgSprite:d,PngSprite:p,TYPES:h,FILE_SIZES:i,SVG_FILE_SIZES:o,"import":function(e){let t=e[0],n=e[1],l=g[t];return new g(l,l["import"]?l["import"](n):n)},getFileExtension:function(e){switch(e){case s:case d:return"svg";case a:case p:return"png";case c:return"bmp";case u:return"ico"}},getName:function(e){
switch(e){case s:return"SVG";case d:return"SVG Sprite";case a:return"PNG";case p:return"PNG Sprite";case f:return"Font";case c:return"BMB";case u:return"ICO"}}}),g}"undefined"==typeof angular?e.ExportSetting=t(Color):angular.module("iconfu.export.module").factory("iconfu.ExportSetting",["iconfu.color.Color",function(e){return t(e)}])}(self),function(e){function t(e){let t=1,n=function(e){this.exportSettings=e=e||[],this.onChangeCallbacks=[],this.triggerChangeBind=this.triggerChange.bind(this),
this.maxBitmapSize=null;for(let t=0;t<e.length;++t){let n=e[t];n.onChange(this.triggerChangeBind),n.exportDefinition=this}this.updateTypeSet()};n.prototype={copy:function(){return n["import"](this["export"]())},insert:function(e){e.exportDefinition=this,e.exportDefinitionIndex=this.exportSettings.length,this.exportSettings.push(e),this.TypeSet.add(e.Type),e.onChange(this.triggerChangeBind),this.triggerChange()},remove:function(e){e.exportDefinition=null,e.exportDefinitionIndex=null
;let t=this.exportSettings;t.splice(t.indexOf(e),1),this.updateTypeSet(),this.triggerChange()},typesIncluded:function(e){let t=this.TypeSet;for(let n=0;n<e.length;++n)if(t.has(e[n]))return!0;return!1},getTypeIndexes:function(e){let t=this.exportSettings,n=[];for(let l=0;l<t.length;++l){let r=t[l];-1!==e.indexOf(r.Type)&&n.push(l)}return n},getSettings:function(e){let t=this.exportSettings,n=[];for(let l=0;l<t.length;++l){let r=t[l];-1!==e.indexOf(r.Type)&&n.push(r)}return n},
updateTypeSet:function(){let e=this.TypeSet=new Set,t=this.exportSettings;for(let n=0;n<t.length;++n){let l=t[n];t[n].exportDefinitionIndex=n,e.add(l.Type)}},getMaxBitmapSize:function(){if(null!==this.maxBitmapSize)return this.maxBitmapSize;{let t=this.exportSettings,n=0;for(let l=0;l<t.length;++l){let r=t[l];switch(r.Type){case e.Png:case e.PngSprite:case e.Bmp:n=Math.max(n,r.getSizeValue());break;case e.Ico:n=Math.max(n,r.getValue("xp")?96:256)}}return this.maxBitmapSize=n,n}},
"export":function(){let e=this.exportSettings,n=new Array(e.length);for(let t=0;t<e.length;++t)n[t]=e[t]["export"]();return[t,n]},triggerChange:function(e,t,n,l){e&&"size"!=e||(this.maxBitmapSize=null);let r=this.onChangeCallbacks;for(let i=0;i<r.length;++i)if(!1===r[i](e,t,n,l,this))return!1},onChange:function(e){this.onChangeCallbacks.push(e)},offChange:function(e){let t=this.onChangeCallbacks.indexOf(e);t>=0&&this.onChangeCallbacks.splice(t,1)}};let l=[];return Object.assign(n,{
"import":function(t){n.update(t);let l=t[1],r=new Array(l.length);for(let t=0;t<l.length;++t)r[t]=e["import"](l[t]);return new n(r)},update:function(e){if(e){let n=e[0];if(n!==t){let r=e[1];for(let e=0;e<r.length;++e){let i=r[e],o=i[0],a=i[1];for(let e=n;e<t;++e)l[e-1](o,a)}e[0]=t}}return e}}),n}"undefined"==typeof angular?e.ExportDefinition=t(ExportSetting):angular.module("iconfu.export.module").factory("iconfu.ExportDefinition",["iconfu.ExportSetting",function(e){return t(e)}])}(self)
;var PaperUtils=function(t){let n=t.Line,l=t.Curve,r=t.Segment,i=t.Point,o=t.Path,a=t.CompoundPath,s=t.Numerical,f=s.GEOMETRIC_EPSILON,u=Math.abs,c=Math.PI,d=function(e,n){if(!n||n.isIdentity())return e.clone();{let l=e.x,r=e.y,i=l+e.width,o=r+e.height,a=n.transform(l,r),s=n.transform(i,r),f=n.transform(i,o),u=n.transform(l,o),c=Math.min(a.x,s.x,f.x,u.x),d=Math.max(a.x,s.x,f.x,u.x),p=Math.min(a.y,s.y,f.y,u.y),h=Math.max(a.y,s.y,f.y,u.y);return new t.Rectangle(c,p,d-c,h-p)}},p=function(e){
return e&&"Path"==e.className},h=function(e){return e&&"CompoundPath"==e.className},g=function(e){return p(e)||h(e)},m=function(e,t,n){let l;return e&&((l=e.clone(!!t))._resolved=e._resolved,n&&y(l,!!t)),l},y=function(e,t){if(e._data&&(e.data=b(e.data)),t){let n=e.children;if(n)for(let e=0;e<n.length;e++)y(n[e],t)}},b=function(e){if(null==e||"object"!=typeof e)return e;if(e.clone instanceof Function)return e.clone();{let t=e.constructor()
;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=b(e[n]));return t}},x=function(e,t){let n=.001;if(p(e)){let l=e.segments;for(let e=0;e<l.length;e++){let r=l[e],i=r.point;if(t.getDistance(i)>n||t.getDistance(i.add(r.handleIn)>n||t.getDistance(i.add(r.handleOut))>n))return!1}}else{let n=e.children;if(n)for(let e=0;e<n.length;e++)if(!x(n[e],t))return!1}return!0},C=function(e){if(p(e)){let t=f,n=e.segments;if(n&&4==n.length){
let e=n[0].point,l=n[1].point,r=n[2].point,o=n[3].point,a=new i(l.x,o.y),s=new i(o.x,l.y);if(e.isClose(a,t)&&r.isClose(s,t)||e.isClose(s,t)&&r.isClose(a,t)){for(let e=0;e<4;e++)if(n[e].handleIn.length>t||n[e].handleOut.length>t)return!1;return!0}}}return!1},w=function(e,n,l){let r;if(g(e))return r=e[l](n),h(r)&&(r=r.reduce()),r;if(e&&e.children){let r=new e.constructor(t.Item.NO_INSERT);r.copyAttributes(e);for(let t=0;t<e.children.length;t++){let i=w(e.children[t],n,l)
;i&&!i.isEmpty()&&r.addChild(i)}return r}},S=function(e,n,l){if(p(e))e.setClockwise(!0);else if(h(e)){let r=e,i=r.children;i=i.slice().sort(function(e,t){return t.getBounds().getArea()-e.getBounds().getArea()});let o=t.sweepAndPrune(i,null,f),a=i[0],s=[a],u={},c=[];for(let e=0;e<i.length;e++)c.push(i[e].isClockwise()?1:-1);a.setClockwise(!0);for(let e=1;e<i.length;e++){let t=i[e],r=null,f=!1,d=null,p=!1,h=o[e];if(h)for(let o=h.length-1;o>=0&&!d;o--){let a=h[o]
;if(a<e&&(r||(r=t.getInteriorPoint()),i[a].contains(r)&&!i[a].getCrossings[t])){if(l){p=u[e]=!0;break}if(n&&!f&&(c[e]+=c[a],c[e]&&c[a])){p=u[e]=!0;break}f=!0,d=!u[a]&&i[a]}}p||(t.setClockwise(d?!d.isClockwise():a.isClockwise()),s.push(t))}r.removeChildren(),r.insertChildren(0,s,!0)}else if(e.children)for(let t=0;t<e.children.length;t++)S(e.children[t],n)},v=function(e,t,l){let r;if(t){let i,a=e.getBounds(),s=new n(a.bottomLeft,a.topRight);x(e,s)?((i=new o([a.bottomLeft,a.topRight])).closePath(),
i.remove()):(s=new n(a.topLeft,a.bottomRight),x(e,s)?((i=new o([a.topLeft,a.bottomRight])).closePath(),i.remove()):i=e.clone(!1));let f=t<12?t:8,u=0;for(H(r=i,.2);u<t;)r=A(r,f,t-u,l),f=t-(u+=f),H(r,.2)}else r=m(e);return r?l&&S(r,!0,!0):r=new o.Circle({center:e.position,radius:t,insert:!1}),r},A=function(e,n,l,r){if(h(e)){S(e,!0,!1);let t,i=[],s=[],f=function(){if(i.length){if(i.length>1){let e=new a({children:i,insert:!1});e.fillRule="nonzero",t=e.unite(t)}else t=t?t.unite(i[0]):i[0];i=[]}
s.length&&(t&&(t=s.length>1?t.subtract(new a({children:s,insert:!1})):t.subtract(s[0])),s=[])},u=e.children;for(let e=0;e<u.length;e++){let t=A(u[e],n,l,r);t&&!t.isEmpty()&&(t.children||t.isClosed())&&(t.isClockwise()?(s&&f(),i.push(t)):(i&&f(),s.push(t)))}return f(),t||new o({insert:!1})}if(p(e)){if(e.isEmpty())return null;if(e.isClosed()){let t=e.getArea();if(r&&t<0)return null;let n=e.getBounds();if(t*l<0&&(u(t)<=l*l*c||u(l)>=Math.min(n.width,n.height)/2))return null}
let i=[[]],a=e.lastCurve,s=(a.point2.add(a.getNormalAt(1,!0).normalize(n)),[]);for(let t=0;t<e.curves.length;t++)U(e.curves[t],i,s,n);let d=e.firstCurve,p=d.point1.add(d.getNormalAt(0,!0).normalize(n));k(s,p,i,n)&&i.length>1&&i[0][0].point1.isClose(p)&&(i[0]=i.pop().concat(i[0]));let h=I(i),g=[];for(let e=0;e<h.length;e++){let t=h[e?e-1:h.length-1].segment2,n=t.point,l=t.handleIn,r=h[e].segment1.handleOut;g.push([n.x,n.y,l.x,l.y,r.x,r.y])}let m=new o({segments:g,insert:!1,closed:!0})
;if(e.isClockwise())m._disposable=!0,m=m.unite();else if((m=m.resolveCrossings()).children){let e=m.children.slice().sort(function(e,t){return t.getBounds().getArea()-e.getBounds().getArea()}),n=t.sweepAndPrune(e,null,f);for(let t=e.length-1;t>=0;t--){let l=e[t],r=!0;if(!l.isClockwise()){let i=-1,o=n[t];if(o){let n=null;for(let r=o.length-1;r>=0;r--)if(o[r]<t){n||(n=l.getInteriorPoint());let t=e[o[r]];t&&t.contains(n)&&(i+=t.isClockwise()?1:-1)}}-1==i&&(r=!1)}r&&e.splice(t,1)}m.setChildren(e)
}else m.isClockwise()&&(m=null);return m&&((m=m.reduce())._resolved=!0),m}},I=function(e){0==e[e.length-1].length&&e.pop();let n=[];for(;e.length;){let r,i,o,a,f=n=n.concat(e.shift()),u=e.length?e[0]:n,c=null;if(o=f[f.length-1],a=u[0],o&&a){let e=o.getNormalAt(1,!0),n=a.getNormalAt(0,!0);if(e.getAngle(n)<.1){let s=l.getCurveLineIntersections(o.getValues(),a.point1.x,a.point1.y,n.x,n.y).sort(),u=s.length&&l.getCurveLineIntersections(a.getValues(),o.point2.x,o.point2.y,e.x,e.y).sort()
;s.length&&u.length&&o.getPointAt(s[s.length-1],!0).getDistance(a.point1)<.02&&a.getPointAt(u[0],!0).getDistance(o.point2)<.02&&((c=new t.CurveLocation(o,1,o.point2))._intersection=new t.CurveLocation(a,u[0],a.getPointAt(u[0],!0)),r=f.length-1,i=0)}}if(!c){let e=f!=u?8:n.length>1||curve2.length>1?1:0,t=Math.max(f.length-e,0),l=Math.min(u.length,e);for(let e=f.length-1;!c&&e>=t;e--){o=f[e];for(let t=0;!c&&t<l;t++){a=u[t];let n=o.getIntersections(a)
;n.length&&((c=n[n.length-1]).parameter<1e-8&&0==e?c=null:(r=e,i=t))}}}let d=!1;if(c){let t=c.parameter,n=c.intersection.parameter,p=l.getArea(l.subdivide(o.getValues())[1]);for(let e=r+1;e<f.length;e++)p+=l.getArea(f[e].getValues());for(let e=0;e<i;e++)p+=l.getArea(u[e].getValues());p+=l.getArea(l.subdivide(a.getValues())[0]);let h=f[f.length-1].segment2.point,g=u[0].segment1.point;if((p+=l.getArea([h.x,h.y,h.x,h.y,g.x,g.y,g.x,g.y]))>0){o.divideAtTime(t);let l=a.divideAtTime(n)
;l&&(l.point1.set(o.point2),u[i]=l),u.splice(0,i+(n<1-s.CURVETIME_EPSILON?0:1)),u.length||e.shift(),f.splice(r+(t<s.CURVETIME_EPSILON?0:1)),d=!0}}if(!d){let e=f[f.length-1].point2,t=u[0].point1;e.getDistance(t)>.02&&f.push(new l(e,t))}}return n},R=function(e,t,n){let r=e.subtract(n),o=t.subtract(n),a=r.getAngle(o);z(r.x,r.y,-o.y,o.x)>0&&(a=360-a);let s=e.getDistance(n),f=a>95,u=4/3*s*Math.tan(a*c/180/(f?8:4));if(f){let a=t.subtract(e).normalize(s);a.set(a.y,-a.x);let f=n.add(a)
;return[new l(e,new i(-r.y,r.x).normalize(u),new i(-a.y,a.x).normalize(-u),f),new l(f,new i(-a.y,a.x).normalize(u),new i(-o.y,o.x).normalize(-u),t)]}return[new l(e,new i(-r.y,r.x).normalize(u),new i(-o.y,o.x).normalize(-u),t)]},k=function(e,t,n,r){let o=n[n.length-1],a=!1,f=e[0];if(f){let n=e[1],u=t,c=n.getDistance(u);if(c<s.GEOMETRIC_EPSILON&&o&&o.length)o[o.length-1].segment2.point.set(u),a=!0;else{
let e=n.subtract(f),t=u.subtract(f),s=new i(-t.y,t.x),d=r>0,p=e.dot(t),h=e.normalize().dot(s.normalize());if(p>=0==d&&h<0==d||p<=0==d&&h<.02==d){if(c>.02){let e=R(n,u,f);for(let t=0;t<e.length;t++)o.push(e[t])}else o&&o.length&&o.push(new l(n,u));a=!0}}}return a||o.length&&n.push([]),a},U=function(e,t,n,r){let i=e.getValues(),o=e.point1.add(l.getNormal(i,0).normalize(r)),a=e.point2.add(l.getNormal(i,1).normalize(r));k(n,o,t,r);let s=t[t.length-1];if(0==e.length);else if(l.isStraight(i)){
let e=new l(o,a);s.push(e)}else{let e=N(i,r),n=e.length;if(n){for(let o=0;o<n;o++){(o>0||0!=e[0][0])&&s.length&&(s=[],t.push(s));let n=[l.getPart(i,e[o][0],e[o][1])],a=[O(n[0],r)];L(n[0],a[0],r)||E(n,a,r);for(let e=0;e<n.length;e++)s.push(new l(a[e]))}1!=e[n-1][1]&&s.length&&t.push([])}else s.length&&t.push([])}n[0]=e.point2,n[1]=a},E=function(e,t,n){let l=e[0],r=[l],i=D(l).sort();if(i[0]){let e=_(r[0],i[0]);e&&(r.push(e),i[1]&&(i[1]=(i[1]-i[0])/(1-i[0]))),
i[1]&&(e=_(r[r.length-1],i[1]))&&r.push(e)}let o=[];for(let e=0;e<r.length;e++){let t=O(r[e],n);if(L(r[e],t,n))o[e]=t;else{let t=P(r,e,93);for(let l=0;l<=t;l++)o[l+e]=O(r[l+e],n),L(r[l+e],o[l+e],n)||P(r,l+e,null)&&(o[l+e]=O(r[l+e],n),o[l+e+1]=O(r[l+e+1],n),e++);e+=t}}for(let n=0;n<r.length;n++)e[n]=r[n],t[n]=o[n]},O=function(e,t){if(l.isStraight(e)){let n=l.getNormal(e,.5).normalize(t),r=n.x,i=n.y;return[e[0]+r,e[1]+i,e[0]+r,e[1]+i,e[6]+r,e[7]+i,e[6]+r,e[7]+i]}
let n=f,r=l.getTangent(e,0).normalize(1),i=l.getTangent(e,1).normalize(1),o=r.x,a=r.y,s=-i.x,c=-i.y,d=o/a,p=s/c;if(u(p-d)<n)return T(e,t);r=r.normalize(t),i=i.normalize(t);let h,g,m,y,b=e[0]+r.y,x=e[1]-r.x,C=e[6]+i.y,w=e[7]-i.x,S=l.getNormal(e,.5),v=l.getPoint(e,.5).add(S.normalize(t));u(a)<n?(g=x,y=(8*v.y-x-3*g-w)/3,m=u(c)<n?C:p*(y-w)+C,h=u(o)<n?b:(8*v.x-b-3*m-C)/3):u(c)<n?(y=w,h=d*((g=(8*v.y-x-3*y-w)/3)-x)+b,
m=u(s)<n?C:(8*v.x-b-3*h-C)/3):(h=d*((g=(8*(p*v.y-v.x)-(3*d+p)*x+4*(b+C-p*w))/(3*(p-d)))-x)+b,m=p*((y=(8*(v.x-d*v.y)+(3*p+d)*w-4*(b+C-d*x))/(3*(p-d)))-w)+C);let A=[b,x,h,g,m,y,C,w];return L(e,A,t)?A:T(e,t)},T=function(e,t){
let r,o,a=new i(e[0],e[1]),s=new i(e[2],e[3]),f=new i(e[6],e[7]),u=new i(e[4],e[5]),c=l.getTangent(e,0).normalize(t),d=l.getTangent(e,1).normalize(t),p=a.add([c.y,-c.x]),h=f.add([d.y,-d.x]),g=n.intersect(e[0],e[1],c.x,c.y,e[6],e[7],d.x,d.y,!0,!0),m=n.intersect(p.x,p.y,c.x,c.y,h.x,h.y,d.x,d.y,!0,!0);if(g&&m){let e=g.subtract(a),t=g.subtract(f);e.dot(t)<=0&&(r=e.isZero()?null:m.subtract(p).multiply(s.getDistance(a)/e.length),o=t.isZero()?null:m.subtract(h).multiply(u.getDistance(f)/t.length))}
return r||(r=(r=s.subtract(a)).multiply(p.getDistance(h)/a.getDistance(f))),o||(o=(o=u.subtract(f)).multiply(p.getDistance(h)/a.getDistance(f))),(c.dot(r)<0||d.dot(o)>0)&&(r.set(0,0),o.set(0,0)),[p.x,p.y,p.x+r.x,p.y+r.y,h.x+o.x,h.y+o.y,h.x,h.y]},D=function(e,t){let n=e[2]-e[0],l=e[4]-e[2]-n,r=e[6]-e[4]-n-2*l,i=e[3]-e[1],o=e[5]-e[3]-i,a=e[7]-e[5]-i-2*o,f=[];return s.solveQuadratic(l*a-o*r,n*a-i*r,n*o-i*l,f,0,1),f.sort(),!t&&f.length&&(0==f[0]&&f.shift(),1==f[f.length-1]&&f.pop()),f
},M=function(e,t){let n,l=3*(e[6]-e[0])+9*(e[2]-e[4]),r=6*(e[0]-2*e[2]+e[4]),i=3*(e[2]-e[0]),o=3*(e[7]-e[1])+9*(e[3]-e[5]),a=6*(e[1]-2*e[3]+e[5]),f=3*(e[3]-e[1]),c=[],d=s.CURVETIME_EPSILON,p=u(t.y)<u(t.x);p?(n=t.y/t.x,s.solveQuadratic(o-n*l,a-n*r,f-n*i,c,d,1-d)):(n=t.x/t.y,s.solveQuadratic(l-n*o,r-n*a,i-n*f,c,d,1-d));for(let e=c.length-1;e>=0;e--){let n=c[e];(p&&(n*n*l+n*r+i)*t.x<0||!p&&(n*n*o+n*a+f)*t.y<0)&&c.splice(e,1)}return c},P=function(e,t,n){
let r=0,o=e[t],a=l.getTangent(o,0).normalize(),f=l.getTangent(o,1).normalize(),u=a.getAngle(f),d=B(o,.5)>0;if((d&&z(a.x,a.y,f.y,-f.x)<0||!d&&z(a.x,a.y,-f.y,f.x)<0)&&(u=360-u),!n||u>n){let l=a.getAngle(),f=d?1:-1,p=n?Math.floor(u/(n+s.GEOMETRIC_EPSILON)):1;for(let a=p;a>0;a--){let s;if(n){let e=a/(p+1),t=l+f*e*u,n=new i(Math.cos(t*c/180),Math.sin(t*c/180)),r=M(o,n);s=r.length?r[0]:e}else s=.5;let d=_(o,s);d&&(e.splice(t+1,0,d),r++)}}return r},L=function(e,t,n,r,o){
r=null==r?Math.pow(6*u(n)/100,2):r*r,null==o&&(o=2);let a=l.getTangent(e,0).normalize(),s=l.getTangent(e,1).normalize();if(z(a.x,a.y,t[2]-t[0],t[3]-t[1])<0||z(s.x,s.y,t[6]-t[4],t[7]-t[5])<0||z(e[4]-e[0],e[5]-e[1],t[4]-t[0],t[5]-t[1])<0||z(e[6]-e[2],e[7]-e[3],t[6]-t[2],t[7]-t[3])<0)return!1;let f=a.getAngle(s),d=B(e,.5)>0;(d&&z(a.x,a.y,s.y,-s.x)<0||!d&&z(a.x,a.y,-s.y,s.x)<0)&&(f=360-f);let p=a.getAngle(),h=d?1:-1,g=[1/3,.5,2/3];for(let a=0;a<g.length;a++){
let s=p+h*g[a]*f,u=new i(Math.cos(s*c/180),Math.sin(s*c/180)),d=M(e,u),m=Number.MAX_VALUE,y=null;if(d.length){let r=l.getPoint(e,d[0]),o=new i(u.y,-u.x).normalize(n||1),a=l.getCurveLineIntersections(t,r.x,r.y,o.x,o.y),s=n?r.add(o):r;for(let e=0;e<a.length;e++){let n=l.getPoint(t,a[e]),r=s.getDistance(n,!0);r<m&&(m=r,y=a[e])}}if(m>r)return!1;if(u.getAngle(l.getTangent(t,y))>o)return!1}return!0},N=function(e,t){
let r=D(e,!1).concat([0,1]).sort(),i=[],o=1/t,a=e[0],f=e[1],c=e[2],d=e[3],p=3*(c-a),h=3*(e[4]-c)-p,g=2*h,m=3*(e[6]-a-p-h),y=3*(d-f),b=3*(e[5]-d)-y,x=2*b,C=3*(e[7]-f-y-b),w=function(e){let t=m*e,n=C*e,l=(t+g)*e+p,r=(n+x)*e+y,i=l*(2*n+x)-r*(2*t+g),a=Math.pow(l*l+r*r,1.5);return u(o/(s.isZero(a)?0:i/a))>1},S=function(e,t){for(let n=0;n<16;n++){let n=(e+t)/2;w(n)?t=n:e=n}return t},v=null;for(let n=0;n<r.length-1;n++){let o=r[n],a=r[n+1];if(B(e,(o+a)/2)*t<0){
let t=l.getPart(e,o,a),n=G(t).concat([0,1]).sort(),r=o;for(let e=0;e<n.length;e++){let t=o+n[e]*(a-o);if(w(t))null==v&&(v=0==t?0:S(r,t));else if(null!=v){let e=S(t,r);e!=v&&i.push([v,e]),v=null}r=t}}else null==v&&(v=o)}if(null!=v&&1!=v&&i.push([v,1]),2==i.length){let r=l.getPart(e,i[0][0],i[0][1]),o=l.getPart(e,i[1][0],i[1][1]),a=(r[6]-r[0])*(r[6]-r[0])+(r[7]-r[1])*(r[7]-r[1])<(o[6]-o[0])*(o[6]-o[0])+(o[7]-o[1])*(o[7]-o[1]);if(a){let e=o;o=r,r=e}
let s=r[a?0:1],f=o[a?1:0],c=o[6]-o[0],d=o[7]-o[1],p=u(t);n.getDistance(s,f,c,d,o[0],o[1])<p&&n.getDistance(s,f,c,d,o[6],o[7])<p&&n.getDistance(s,f,c,d,o[2],o[3])<p&&n.getDistance(s,f,c,d,o[4],o[5])<p&&(a?i.shift():i.pop())}return i},B=function(e,t){let n=e[0],l=e[1],r=e[2],i=e[3],o=3*(r-n),a=3*(e[4]-r)-o,s=e[6]-n-o-a,f=3*(i-l),u=3*(e[5]-i)-f,c=e[7]-l-f-u,d=((3*s*t+2*a)*t+o)*(6*c*t+2*u)-((3*c*t+2*u)*t+f)*(6*s*t+2*a);return d>0?1:d<0?-1:0},z=function(e,t,n,l){return e*n+t*l},_=function(e,t){
let n=s.CURVETIME_EPSILON;if(t>n&&t<1-n){let n=l.subdivide(e,t),r=n[0],i=n[1];if((i[0]!=i[6]||l.getLength(i,0,1)>0)&&(r[0]!=r[6]||l.getLength(r,0,1)>0))return e.splice(0,8,r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]),i}return null},V=function(e,t,n,i){let o=l.subdivide(i||l.getValues(e,t),n),a=o[0],s=o[1];return e.handleOut.set(a[2]-a[0],a[3]-a[1]),t.handleIn.set(s[4]-s[6],s[5]-s[7]),new r(a[6],a[7],a[4]-a[6],a[5]-a[7],s[2]-s[0],s[3]-s[1])},F=function(e,t,n){null==n&&(n=1);let r=e?e.length:0
;if(0==r)return[];let i=e[0].clone(),o=[];for(let a=1;a<=r;a++)if(o.push(i),a<r||t){let t=a==r?o[0]:e[a].clone(),f=l.getValues(i,t),u=f[n],c=f[2+n],d=f[4+n],p=f[6+n];if(!(u>=c==c>=d&&c>=d==d>=p||l.isStraight(f)||u==d&&c==p&&0===l.getLength(f))){let e=3*(c-d)-u+p,n=2*(u+d)-4*c,l=c-u,r=4e-7,a=1-r,h=[],g=s.solveQuadratic(e,n,l,h,r,a);if(g>0){h.sort();let e=h[0],n=V(i,t,e,f);o.push(n),g>1&&(e=(h[1]-e)/(1-e),n=V(n,t,e),o.push(n))}}i=t}return o},G=function(e){
let t=e[0],n=e[2],l=e[4],r=e[6],i=e[1],o=e[3],a=e[5],f=3*n-t-3*l+r,u=3*t-6*n+3*l,c=-3*t+3*n,d=3*o-i-3*a+e[7],p=3*i-6*o+3*a,h=-3*i+3*o,g=[],m=s.solveCubic(9*(f*f+d*d),9*(f*u+p*d),2*(u*u+p*p)+3*(c*f+h*d),c*u+p*h,g,0,1);return g.sort(),m>0&&(3==m&&g.splice(1,1),m>1&&(g[1]<0||g[1]>1)&&g.splice(1,1),(g[0]<=0||g[0]>=1)&&g.splice(0,1)),g},H=function(e,t){if(e)if(p(e))for(let r=0;r<e.segments.length;r++){let i=e.segments,o=i.length,a=r,s=r==o-1?0:r+1,f=r>=o-2?r-o+2:r+2,c=i[a],d=i[s],p=i[f]
;if(c===d)return;let h=l.getValues(c,d),g=l.getValues(d,p);if(l.isStraight(h)&&(c.handleOut.length=d.handleIn.length=0),c.point.getDistance(d.point)<t&&l.getLength(h)<t)c.handleOut.set(d.handleOut),e.removeSegment(s);else if(o>2)if(c.point.getDistance(p.point)<t){let n=l.getArea(h);n+=l.getArea(g),n+=(p.point.y+c.point.y)*(-c.point.x+p.point.x)/2,u(n)<t&&(c.handleOut.set(p.handleOut),e.removeSegment(f>s?f:s),e.removeSegment(f>s?s:f),r-=s<a?2:f<a?1:0)}else{
let l=n.getDistance,r=h[0],i=h[1],o=g[6],a=g[7];l(r,i,o,a,h[6],h[7])<t&&.75*l(r,i,o,a,h[2],h[3])<t&&.75*l(r,i,o,a,h[4],h[5])<t&&.75*l(r,i,o,a,g[2],g[3])<t&&.75*l(r,i,o,a,g[4],g[5])<t&&(e.removeSegment(s),c.handleOut.length=p.handleIn.length=0)}}else if(e.children)for(let n=0;n<e.children.length;n++)H(e.children[n],t)},j=function(){let t=function(){switch(t.debugMode){case t.DEBUG_CONSOLE_WARN:console.warn(arguments);break;case t.COLLECT:t.warnings.push(Array.prototype.slice.call(arguments))
;break;case t.DEBUG_THROW:throw e}};return t.DEBUG_CONSOLE_WARN=0,t.DEBUG_NO_MESSAGE=1,t.DEBUG_THROW=2,t.COLLECT=3,t.debugMode=t.DEBUG_CONSOLE_WARN,t.warnings=[],t.OPEN_PATH_EXCEPTION=function(e){this.e=e},t}();return{transformRect:d,isBasicRectangle:C,isPathItem:g,clone:m,subtractPath:function(e,t){return w(e,t,"subtract")},unitePath:function(e,t){return w(e,t,"unite")},intersectPath:function(e,t){return w(e,t,"intersect")},excludePath:function(e,t){return w(e,t,"exclude")},
dividePath:function(e,t){return w(e,t,"divide")},getItemOutline:v,normalizeOrientation:S,getMonoSegments:F,getInflectionTs:D,getTangentTs:M,warn:j,simplifyPath:H,splitCurveWithLargeAngle:P,checkOffsetCurveQuality:L,getPathOffset:A}}(paper);let writePng=function(){function e(e,t,n){let l=s,r=-1;for(;t<n;t++)r=r>>>8^l[255&(r^e[t])];return r^-1>>>0}let t=function(e,t,s,f,u,c,d,p,h){if(t*s*4!=e.length)throw"Data length does not match width and height";let g;if(24!=f||d||(d=new Uint8Array([0,0,0])),
d&&ImageUtils.applyBackgroundColor(e,d,p),u||(u=new ArrayWriter(1024)),u.writeUint32(2303741511,218765834),a(u,1229472850,function(){n(t,s,f,u)}),8==f){if(h){let e=-1;p||(e=h.indexOf(p))<0&&(h=h.slice(0).splice(0,0,p),e=0),g=new ImageUtils.FastPalette(h,e)}else g=ImageUtils.createPalette(e,256,p);a(u,1347179589,function(){l(g,u)}),p||a(u,1951551059,function(){r(g.getMaskIndex(),u)})}if(a(u,1229209940,function(){i(e,t,s,f,d,p,g,u)}),c)for(let e in c)if(c.hasOwnProperty(e)){let t=c[e]
;t&&t.length&&a(u,1950701684,function(){o(e,t,u)})}return a(u,1229278788),u.getArrayView()},n=function(e,t,n,l){l.writeUint32(e,t),l.writeUint8(8,8===n?3:24===n?2:6,0,0,0)},l=function(e,t){for(let n=0;n<e.length;n++){let l=e.getRgb(n);t.writeUint8(l[0],l[1],l[2])}},r=function(e,t){t.writeUint8N(255,e),t.writeUint8(0)},i=function(e,t,n,l,r,i,o,a){let s,f,u=new pako.Deflate({windowBits:15,level:3,memLevel:8,strategy:0
}),c=8===l?ImageUtils.floydSteinbergDither(e,t,n,o,0):e,d=t*l/8,p=new Uint8Array(d+1),h=l/8,g=0;for(let e=0;e<n;e++){if(24===l){f=0,s||(s=new Uint8Array(d));for(let n=0,l=4*e*t;n<d;)s[n++]=c[l++],s[n++]=c[l++],s[n++]=c[l++],l++}else s=c,f=e*d;let r=new Uint8Array(256);if(l>8){let e=0,t=0;for(let n=f,l=f+d;n<l;n++){let l=s[n],i=255&l-(n<f+h?0:s[n-h]);0==(1&r[l])&&(r[l]|=1,t++),0==(2&r[i])&&(r[i]|=2,e++)}g=e<t*(1==g?.75:.5)?1:0}if(p[0]=g,1==g)for(let e=0,t=f;e<d;e++,
t++)p[e+1]=s[t]-(e<h?0:s[t-h]);else p.set(s.subarray(f,f+d),1);u.push(p,e===n-1)}a.writeTypedArray(u.result)},o=function(e,t,n){n.writeString(e),n.writeInt8(0),n.writeString(t)},a=function(t,n,l){let r=t.index;t.index+=4,t.writeUint32(n),l&&l(),t.writeUint32(e(t.getArrayView(),r+4,t.index));let i=t.index;t.index=r,t.writeUint32(i-r-12),t.index=i},s=function(){let e,t=[];for(let n=0;n<256;n++){e=n;for(let t=0;t<8;t++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();return t
}(),writeBmp=function(e,t,n,l,r,i,o,a){24!=l||o||(o=new Uint8Array([0,0,0])),o&&ImageUtils.applyBackgroundColor(e,o,a);let s,f,u=8==l?1078:24==l?54:122,c=i?i.length:0,d=t*n*l/8+u+c;if(r?r.ensureCapacity(d,!0):r=new ArrayWriter(d),r.writeUint16LE(19778),r.writeUint32LE(d,0,u,32==l?108:40,t,n),r.writeUint16LE(1,l),r.writeUint32LE(32==l?3:0,(l*t+31)/32,2835,2835,0,0),32==l&&(r.writeUint32LE(16711680,65280,255,4278190080,1934772034),r.writeUint8N(0,48)),8==l){let l=ImageUtils.createPalette(e,256,a)
;for(let e=0;e<l.length;e++){let t=l.getRgb(e);r.writeUint8(t[2],t[1],t[0],0)}r.writeUint8N(0,4*(256-l.length));let i=ImageUtils.floydSteinbergDither(e,t,n,l),o=3-(t+3)%4;for(s=(f=n*t)-t;s>=0;f=s,s-=t)r.writeTypedArray(i.subarray(s,f)),r.writeUint8N(0,o)}else{let i=4*t;for(s=(f=n*i)-i;s>=0;f=s,s-=i)for(let t=s;t<f;t+=4)r.writeUint8(e[t+2],e[t+1],e[t]),32==l&&r.writeUint8(e[t+3])}return c&&r.writeString(i),r.getArrayView()},writeIco=function(){let e,t=function(){if(!e){
let t,n=[0,16777215,8421504,12632256,8388608,16711680,8421376,16776960,32768,65280,32896,65535,128,255,8388736,16711935],l=255;for(let e=0;e<16;e++)t=n[e],n[e]=new Uint8Array([t>>16&l,t>>8&l,t&l]);e=new ImageUtils.FastPalette(n,0)}return e},n=function(e,n,i,o,a,s,f){s||(s=new ArrayWriter);let u,c=0,d=[[4,n],[8,i],[32,o]];for(let e=0;e<d.length;e++){let t=d[e][0],n=d[e][1];for(let e=0;e<n.length;e++){let l=n[e];(l<=0||l>256||256==l&&"32"!==t)&&n.splice(e,1)}c+=n.length}s.writeUint16LE(0,1,c)
;let p=6+16*c;f&&(p+=f.length);for(let t=0;t<d.length;t++){let n=d[t][0],r=d[t][1];for(let t=0;t<r.length;t++){let i,o=r[t],a=r[t];s.writeUint8(256==o?0:o,256==a?0:a,4==n?16:0,0),s.writeUint16LE(1,n),256==o?i=(u=writePng(e,256,256,32)).length:(i=40,n<=8&&(i+=4<<n),i+=(l(o*n)+l(o))*a),s.writeUint32LE(i,p),p+=i}}f&&s.writeString(f);for(let e=0;e<d.length;e++){let n=d[e][0],i=d[e][1],o=4==n?16:8==n?256:0;for(let e=0;e<i.length;e++){let f=i[e],c=i[e];if(256===f)s.writeTypedArray(u);else{
let e=a.getRgbData(f);if(s.writeUint32LE(40,f,2*c),s.writeUint16LE(1,n),s.writeUint32LE(0,(l(f*n)+l(f))*c,0,0,0,0),4===n||8===n){let l;l=4===n?t():ImageUtils.createPalette(e,o,new Uint8Array([0,0,0]));for(let e=0;e<l.length;e++){let t=l.getRgb(e);s.writeUint8(t[2],t[1],t[0],0)}s.writeUint8N(0,4*(o-l.length));let i,a,u,d=ImageUtils.floydSteinbergDither(e,f,c,l,!0),p=3-(Math.ceil(f*n/8)+3)%4;if(4===n)for(a=(i=c*f)-f;a>=0;i=a,a-=f){for(u=a;u<i;){let e=d[u++],t=u<i?d[u++]:0
;s.writeUint8(e<<4&240|15&t)}s.writeUint8N(0,p)}else if(8===n)for(a=(i=c*f)-f;a>=0;i=a,a-=f)s.writeTypedArray(d.subarray(a,i)),s.writeUint8N(0,p);r(d.alphaData,f,c,!0,s)}else{let t,n,l,i;for(l=(n=c*(t=4*f))-t;l>=0;n=l,l-=t)for(i=l;i<n;i+=4)s.writeUint8(e[i+2],e[i+1],e[i],e[i+3]);r(e,f,c,!1,s)}}}}return s.getArrayView()},l=function(e){return Math.ceil(e/8)+3&-4},r=function(e,t,n,r,i){let o=8*l(t),a=r?1:4;for(let l=n-1;l>=0;l--){let n=l*t*a+(a-1),r=0,s=0
;for(let l=0;l<o;l++)l<t&&(e[n]<ImageUtils.ALPHA_THRESHOLD&&++s,n+=a),8==++r?(i.writeUint8(s),r=s=0):s<<=1}};return n}(),ImageUtils={createPalette:function(e,t,n){let l=ImageUtils.octreeQuantize(e,t,n),r=new ImageUtils.FastPalette(l,0);return r.containsAllPixels=!r.isReduced,r}};ImageUtils.octreeQuantize=function(){let e,t,n=7,l=!1,r=function(r,s,f){e=0,t=n;let u=[[],[],[],[],[],[],[]],c={childCount:0,children:new Array(8),pixelCount:0,rSum:0,gSum:0,bSum:0}
;for(let t=r.length-1;t>=0;)r[t--]>0?(i(c,r[t--],r[t--],r[t--],u),e>s&&o(u)):t-=3;let d=[];if(a(d,c),d.isReduced=l,f){let e=-1,t=196609;for(let n=0;n<d.length;n++){let l=Math.pow(f[0]-d[n][0],2)+Math.pow(f[1]-d[n][1],2)+Math.pow(f[1]-d[n][2],2);if(l<t&&(t=l,e=n,0==l))break}0!=t&&d.length!=s||(d.splice(e,1),t>0&&(d.isReduced=!0)),d.unshift(f)}return d},i=function(l,r,i,o,a){let s,f=0,u=l;for(;!u.isLeaf;){let l=(o>>(s=n-f)&1)<<2|(i>>s&1)<<1|r>>s&1,c=u.children[l];c||(c={childCount:0,
children:new Array(8),pixelCount:0,rSum:0,gSum:0,bSum:0},u.children[l]=c,f+1>=t&&(c.isLeaf=!0,e++),2==++u.childCount&&a[f].push(u)),u=c,f++}u.pixelCount++,u.rSum+=o,u.gSum+=i,u.bSum+=r},o=function(n){let r=t-1;for(;!n[r].length;)r--;let i=n[r].pop();for(let e=0;e<i.children.length;e++){let t=i.children[e];null!=t&&(i.pixelCount+=t.pixelCount,i.rSum+=t.rSum,i.gSum+=t.gSum,i.bSum+=t.bSum)}i.isLeaf=!0,i.children=null,e-=i.childCount-1,r<t-1&&(t=r+1),l=!0},a=function(e,t){if(t.isLeaf){
let n=t.pixelCount,l=Math.round,r=new Uint8Array([l(t.rSum/n),l(t.gSum/n),l(t.bSum/n)]);e.push(r)}else for(let n=0,l=t.children;n<l.length;n++)l[n]&&a(e,l[n])};return r}(),ImageUtils.ALPHA_THRESHOLD=120,ImageUtils.floydSteinbergDither=function(e,t,n,l,r){let i,o,a,s,f,u,c=l.getMaskIndex(),d=l.length>128?32:128,p=function(e){return e>d?d:e<-d?-d:e},h=4*t,g=new Uint8Array(t*n),m=r?new Uint8Array(t*n):null,y=new Int16Array(h),b=new Int16Array(h),x=new Int16Array(h),C=new Int16Array(3),w=0,S=0
;for(let r=0;r<n;r++){for(let d=0;d<h;d+=4,w+=4,S++)if(0==(a=e[w+3]))g[S]=c;else{C[0]=e[w]+p(b[d]),C[1]=e[w+1]+p(b[d+1]),C[2]=e[w+2]+p(b[d+2]),255!=a&&(a+=b[d+3]),i=l.getNearestIndex(C[0],C[1],C[2]),o=l.getRgb(i),a<ImageUtils.ALPHA_THRESHOLD?(g[S]=c,s=0):(g[S]=i,s=255,null!=m&&(m[S]=255));for(let l=0;l<4;l++){if(3==l){f=a-s;for(let n=-1;n<=1&&0!=f;n++)for(let l=-1;l<=1&&0!=f;l++){let r=w+4*(n*t+l)+3;r>=0&&r<e.length&&0==e[r]&&(f=0)}}else f=C[l]-o[l];if(f>1||f<-1){let e=d-4,t=d+4;u=f<0?9:6,
t<h&&(b[t+l]+=7*f+u>>4),r+1<n&&(x[d+l]+=5*f+u>>4,d>0&&(x[e+l]+=3*f+u>>4),t<h&&(x[t+l]+=f+u>>4))}}}let d=b;b=x,(x=d).set(y)}return null!=m&&(g.alphaData=m),g},ImageUtils.FastPalette=function(e,t){null==t&&(t=-1);let n,l,r=t<0?null:e[t],i=new Array(t<0?e.length:e.length-1),o=new Uint8Array(256);for(n=0,l=0;l<e.length;n++,l++)n==t&&l++,i[n]=new Uint8Array(e[l]),i[n].index=l;for(i.sort(function(e,t){return e[0]-t[0]}),n=0,l=0;n<256;n++){for(;n>i[l][0]&&l<i.length-1;)l++;o[n]=l}
this.getNearestIndex=function(e,n,l){let a=o[e<=0?0:e>=255?255:e],s=this.getRgbSquaredDistance(e,n,l,i[a]);if(!s)return i[a].index;for(let t=-1;t<=1;t+=2)for(let r=a+t;r>=0&&r<i.length;r+=t){let t=i[r];if(Math.pow(e-t[0],2)>=s)break;let o=this.getRgbSquaredDistance(e,n,l,t);if(!o)return t.index;o<s&&(s=o,a=r)}return null!=r&&this.getRgbSquaredDistance(e,n,l,r)<s?t:i[a].index},this.length=e.length,this.getRgb=function(t){return e[t]},this.getMaskIndex=function(){return t}},
ImageUtils.FastPalette.prototype.getRgbSquaredDistance=function(e,t,n,l){return Math.pow(e-l[0],2)+Math.pow(t-l[1],2)+Math.pow(n-l[2],2)},ImageUtils.applyBackgroundColor=function(e,t,n,l,r){let i;n||(n=t),r||(r=0);let o=e.length-1;for(;o>=0;)(i=e[o])<255?i<=r?l?(e[o]=0,o-=4):(e[o--]=255,e[o--]=n[2],e[o--]=n[1],e[o--]=n[0]):(i>0||!l)&&(e[o--]=255,e[o]=ImageUtils.alphaBlendComp(e[o--],t[2],i),e[o]=ImageUtils.alphaBlendComp(e[o--],t[1],i),e[o]=ImageUtils.alphaBlendComp(e[o--],t[0],i)):o-=4},
ImageUtils.alphaBlendComp=function(e,t,n){return n/=255,Math.round(e*n+t*(1-n))},ImageUtils.createResizedData=function(e,t,n,l,r){if(t<l){let e=document.createElement("canvas");e.width=l,e.height=r;let t=e.getContext("2d");return t.drawImage(e,0,0,l,r),t.getImageData(0,0,l,r).getData()}return t>l?this.downscaleRgbData(e,t,n,null,l,r):e},ImageUtils.downscaleImageData=function(e,t){ImageUtils.downscaleRgbData(e.data,e.width,e.height,t.data,t.width,t.height)},
ImageUtils.downscaleRgbData=function(e,t,n,l,r,i){l||(l=new("undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array)(4*r*i));let o=t/r,a=n/i;if(1==o&&1==a)l.set(e);else{let s,f,u,c,d,p=1/(o*a),h=0,g=0,m=0,y=0;if(a%1==0&&a%1==0){d=l.length-1;let r=4*(t*a-o),i=4*(t-o);for(u=n-1;u>=0;u-=a)for(c=4*(u+1)*t-1,f=t-1;f>=0;f-=o,c+=r){for(let t=0;t<a;t++){for(let t=0;t<o;t++)(s=e[c--])?(m+=e[c--]*s,g+=e[c--]*s,h+=e[c--]*s,y+=s):c-=3;c-=i}y?(l[d--]=y*p,l[d--]=m/y,l[d--]=g/y,l[d--]=h/y,
h=g=m=y=0):d-=4}}else{let n,b,x,C,w,S,v,A=0,I=0;for(d=0,u=0;u<i;u++)for(w=A,S=I,I=~~(A=(u+1)*a),b=C=0,f=0;f<r;f++){n=b,x=C,C=~~(b=(f+1)*o);for(let l=S;l<A;l++){v=l==S?1-w%1:l==I?A%1:1,c=4*(l*t+x);for(let t=x;t<b;t++)(s=e[c+3])&&(s*=t==x?v*(1-n%1):t==C?v*(b%1):v,h+=e[c]*s,g+=e[c+1]*s,m+=e[c+2]*s,y+=s),c+=4}y?(l[d++]=h/y,l[d++]=g/y,l[d++]=m/y,l[d++]=y*p,h=g=m=y=0):d+=4}}}return l};var ArrayWriter=function(e){this.index=0,this.capacity=null==e?1024:e,this.dataArray=new Uint8Array(this.capacity)}
;ArrayWriter.prototype={writeUint8N:function(e,t){for(this.ensureCapacity(this.index+t);t>0;t--)this.dataArray[this.index++]=e},writeInt8:function(){let e,t=arguments,n=t.length;this.ensureCapacity(this.index+n);for(let l=0;l<n;l++)(e=t[l])<0&&(e+=256),this.dataArray[this.index++]=e},writeUint8:function(){let e=arguments,t=e.length;this.ensureCapacity(this.index+t);for(let n=0;n<t;n++)this.dataArray[this.index++]=e[n]},writeUint16:function(){let e,t=arguments,n=t.length
;this.ensureCapacity(this.index+2*n);for(let l=0;l<n;l++)e=t[l],this.dataArray[this.index++]=e>>>8,this.dataArray[this.index++]=e},writeInt16:function(){let e,t=arguments,n=t.length;this.ensureCapacity(this.index+2*n);for(let l=0;l<n;l++)(e=t[l])<0&&(e+=65536),this.dataArray[this.index++]=e>>>8,this.dataArray[this.index++]=e},writeUint16LE:function(){let e,t=arguments,n=t.length;this.ensureCapacity(this.index+2*n);for(let l=0;l<n;l++)e=t[l],this.dataArray[this.index++]=e,
this.dataArray[this.index++]=e>>>8},writeInt32:function(){let e,t=arguments,n=t.length,l=this.index;this.ensureCapacity(l+4*n);let r=this.dataArray;for(let i=0;i<n;i++)(e=t[i])<0&&(e+=4294967296),r[l++]=e>>>24,r[l++]=e>>>16,r[l++]=e>>>8,r[l++]=e;this.index=l},writeUint32:function(){let e,t=arguments,n=t.length,l=this.index;this.ensureCapacity(l+4*n);let r=this.dataArray;for(let i=0;i<n;i++)e=t[i],r[l++]=e>>>24,r[l++]=e>>>16,r[l++]=e>>>8,r[l++]=e;this.index=l},writeUint32LE:function(){
let e,t=arguments,n=t.length,l=this.index;this.ensureCapacity(l+4*n);let r=this.dataArray;for(let i=0;i<n;i++)e=t[i],r[l++]=e,r[l++]=e>>>8,r[l++]=e>>>16,r[l++]=e>>>24;this.index=l},writeUint64:function(){let e,t=arguments.length;this.ensureCapacity(this.index+(t<<3));for(let n=0;n<t;n++){e=arguments[n];let t=Math.floor(e/4294967296),l=e-4294967296*t;this.writeUint32(t,l)}},writeUnicodeString:function(e){this.ensureCapacity(this.index+2*e.length);for(let t=0;t<e.length;++t){let n=e.charCodeAt(t)
;this.dataArray[this.index++]=n>>8,this.dataArray[this.index++]=n}},writeString:function(e){let t=e.length;this.ensureCapacity(this.index+t);for(let n=0;n<t;n++)this.dataArray[this.index++]=e.charCodeAt(n)},writeTypedArray:function(e){this.ensureCapacity(this.index+e.byteLength),this.dataArray.set(e,this.index),this.index+=e.byteLength},getArrayView:function(e,t){return e=e||0,null==t&&(t=this.index-e),this.dataArray.subarray(e,t)},getArrayData:function(e,t){return e=e||0,
null==t&&(t=this.index-e),new Uint8Array(this.dataArray.buffer.slice(e,t))},reset:function(){this.index=0},ensureCapacity:function(e,t){for(;this.capacity<e;)if(this.capacity=t?e:this.capacity*=2,this.capacity>=e){let e=new Uint8Array(this.capacity);e.set(this.dataArray),this.dataArray=e}}};